
> hotdog-diaries@1.0.0 test
> jest

🧪 [CI] Injecting CI-safe API key defaults...
✅ [CI] API key defaults injected successfully
FAIL __tests__/app/api/admin/social/endpoints.test.ts
  ● Test suite failed to run

    ReferenceError: Cannot access 'mockQuery' before initialization

    [0m [90m 24 |[39m [36mconst[39m mockQuery [33m=[39m jest[33m.[39mfn()
     [90m 25 |[39m jest[33m.[39mmock([32m'@/lib/db-query-builder'[39m[33m,[39m () [33m=>[39m ({
    [31m[1m>[22m[39m[90m 26 |[39m   query[33m:[39m mockQuery
     [90m    |[39m          [31m[1m^[22m[39m
     [90m 27 |[39m }))
     [90m 28 |[39m
     [90m 29 |[39m describe([32m'Social Media API Endpoints'[39m[33m,[39m () [33m=>[39m {[0m

      at mockQuery (__tests__/app/api/admin/social/endpoints.test.ts:26:10)
      at Object.<anonymous> (app/api/admin/social/performance/route.ts:13:25)
      at Object.<anonymous> (__tests__/app/api/admin/social/endpoints.test.ts:20:17)

PASS __tests__/lib/services/unsplash-scanning.test.ts
PASS __tests__/lib/services/lemmy-scanning.test.ts
PASS __tests__/lib/services/giphy-scanning.test.ts
FAIL __tests__/lib/services/reddit-scanning.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/got/dist/source/index.js:1
    import create from './create.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

    [0m [90m 20 |[39m   is_gallery[33m:[39m boolean
     [90m 21 |[39m   is_video[33m:[39m boolean
    [31m[1m>[22m[39m[90m 22 |[39m   over_18[33m:[39m boolean
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 23 |[39m   spoiler[33m:[39m boolean
     [90m 24 |[39m   stickied[33m:[39m boolean
     [90m 25 |[39m   link_flair_text[33m?[39m[33m:[39m string[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/services/redditClient.ts:22:53)
      at Object.<anonymous> (lib/services/reddit.ts:14:23)
      at Object.<anonymous> (lib/services/reddit-scanning.ts:19:17)
      at Object.<anonymous> (__tests__/lib/services/reddit-scanning.test.ts:39:25)

PASS __tests__/lib/services/youtube.test.ts
PASS __tests__/lib/services/pixabay-scanning.test.ts
FAIL __tests__/app/api/admin/schedule/forecast/refill/route.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../../../lib/jobs/schedule-content-production' from '__tests__/app/api/admin/schedule/forecast/refill/route.test.ts'

    [0m [90m  7 |[39m
     [90m  8 |[39m [90m// Mock the schedule-content-production functions[39m
    [31m[1m>[22m[39m[90m  9 |[39m jest[33m.[39mmock([32m'../../../../../../lib/jobs/schedule-content-production'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 10 |[39m   generateDailySchedule[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 11 |[39m   refillTwoDays[33m:[39m jest[33m.[39mfn()
     [90m 12 |[39m }))[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (__tests__/app/api/admin/schedule/forecast/refill/route.test.ts:9:6)

FAIL __tests__/lib/services/health.test.ts
  ● HealthService › checkContentQueue › should return warning for low pending items

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "healthy"

    [0m [90m 253 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m healthService[33m.[39mcheckContentQueue()
     [90m 254 |[39m
    [31m[1m>[22m[39m[90m 255 |[39m       expect(result[33m.[39mstatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mWARNING[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 256 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'running low'[39m)
     [90m 257 |[39m     })
     [90m 258 |[39m[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:255:29)

  ● HealthService › checkContentQueue › should return warning for large backlog

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "healthy"

    [0m [90m 270 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m healthService[33m.[39mcheckContentQueue()
     [90m 271 |[39m
    [31m[1m>[22m[39m[90m 272 |[39m       expect(result[33m.[39mstatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mWARNING[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 273 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'large backlog'[39m)
     [90m 274 |[39m     })
     [90m 275 |[39m   })[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:272:29)

  ● HealthService › checkScheduler › should return critical status for no recent posts

    expect(received).toBe(expected) // Object.is equality

    Expected: "critical"
    Received: "healthy"

    [0m [90m 302 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m healthService[33m.[39mcheckScheduler()
     [90m 303 |[39m
    [31m[1m>[22m[39m[90m 304 |[39m       expect(result[33m.[39mstatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mCRITICAL[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 305 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'No posts have been made'[39m)
     [90m 306 |[39m     })
     [90m 307 |[39m[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:304:29)

  ● HealthService › checkScheduler › should return warning for low posting activity

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "healthy"

    [0m [90m 317 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m healthService[33m.[39mcheckScheduler()
     [90m 318 |[39m
    [31m[1m>[22m[39m[90m 319 |[39m       expect(result[33m.[39mstatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mWARNING[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 320 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Only 3 posts made'[39m)
     [90m 321 |[39m     })
     [90m 322 |[39m   })[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:319:29)

  ● HealthService › generateHealthReport › should set overall status to warning if any check is warning

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "critical"

    [0m [90m 418 |[39m       [36mconst[39m report [33m=[39m [36mawait[39m healthService[33m.[39mgenerateHealthReport()
     [90m 419 |[39m
    [31m[1m>[22m[39m[90m 420 |[39m       expect(report[33m.[39moverallStatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mWARNING[39m)
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 421 |[39m       expect(report[33m.[39msummary[33m.[39mwarningChecks)[33m.[39mtoBeGreaterThan([35m0[39m)
     [90m 422 |[39m     })
     [90m 423 |[39m[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:420:36)

  ● HealthService › isHealthy › should return true for healthy system

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 475 |[39m     it([32m'should return true for healthy system'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 476 |[39m       [36mconst[39m isHealthy [33m=[39m [36mawait[39m isolatedHealthService[33m.[39misHealthy()
    [31m[1m>[22m[39m[90m 477 |[39m       expect(isHealthy)[33m.[39mtoBe([36mtrue[39m)
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 478 |[39m     })
     [90m 479 |[39m
     [90m 480 |[39m     it([32m'should return true for system with warnings'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:477:25)

  ● HealthService › isHealthy › should return true for system with warnings

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 486 |[39m
     [90m 487 |[39m       [36mconst[39m isHealthy [33m=[39m [36mawait[39m isolatedHealthService[33m.[39misHealthy()
    [31m[1m>[22m[39m[90m 488 |[39m       expect(isHealthy)[33m.[39mtoBe([36mtrue[39m) [90m// Warnings are still considered "healthy"[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 489 |[39m     })
     [90m 490 |[39m
     [90m 491 |[39m     it([32m'should return false for critical system'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:488:25)

PASS __tests__/lib/services/imgur-scanning.test.ts
PASS __tests__/lib/services/youtube-monitoring.test.ts
PASS __tests__/lib/services/bluesky-scanning.test.ts
PASS __tests__/lib/services/tumblr-scanning.test.ts
FAIL __tests__/lib/jobs/schedule-content-production-refill.test.ts
  ● Two-Day Refill Functionality › ensureDayFilled › should fill day with normal strategy when pool is adequate

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:75:22)

  ● Two-Day Refill Functionality › ensureDayFilled › should use aggressive fallback when normal strategy insufficient

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:122:22)

  ● Two-Day Refill Functionality › ensureDayFilled › should handle small pool gracefully when aggressive fallback still insufficient

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:165:22)

  ● Two-Day Refill Functionality › ensureDayFilled › should handle ET boundary correctness for date calculations

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:193:22)

  ● Two-Day Refill Functionality › refillTwoDays › should orchestrate both today and tomorrow with aggressive fallback

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at refillTwoDays (lib/jobs/schedule-content-production.ts:998:23)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:261:22)

  ● Two-Day Refill Functionality › refillTwoDays › should handle tomorrow calculation correctly across month boundaries

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at refillTwoDays (lib/jobs/schedule-content-production.ts:998:23)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:294:22)

  ● Two-Day Refill Functionality › refillTwoDays › should log structured summary with emoji indicators

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at refillTwoDays (lib/jobs/schedule-content-production.ts:998:23)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:311:7)

  ● Two-Day Refill Functionality › Platform Counter Accuracy › should accurately reflect platform adds per individual day

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:358:22)

  ● Two-Day Refill Functionality › Platform Counter Accuracy › should combine platform counters correctly across two days

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at refillTwoDays (lib/jobs/schedule-content-production.ts:998:23)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:399:22)

PASS __tests__/api/errorHandling.test.ts
  ● Console

    console.log
      Found 214 route files to test

      at Object.log (__tests__/api/errorHandling.test.ts:96:13)

    console.log
      Routes with error handling: 206

      at Object.log (__tests__/api/errorHandling.test.ts:357:15)

    console.log
      Routes without error handling: 8

      at Object.log (__tests__/api/errorHandling.test.ts:358:15)

PASS __tests__/regression/component-regression.test.tsx
FAIL __tests__/integration/multi-platform-content-flow.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/got/dist/source/index.js:1
    import create from './create.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

    [0m [90m 20 |[39m   is_gallery[33m:[39m boolean
     [90m 21 |[39m   is_video[33m:[39m boolean
    [31m[1m>[22m[39m[90m 22 |[39m   over_18[33m:[39m boolean
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 23 |[39m   spoiler[33m:[39m boolean
     [90m 24 |[39m   stickied[33m:[39m boolean
     [90m 25 |[39m   link_flair_text[33m?[39m[33m:[39m string[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/services/redditClient.ts:22:53)
      at Object.<anonymous> (lib/services/reddit.ts:14:23)
      at Object.<anonymous> (lib/services/reddit-scanning.ts:19:17)
      at Object.<anonymous> (__tests__/integration/multi-platform-content-flow.test.tsx:12:25)

PASS __tests__/lib/services/youtube-scanning.test.ts
PASS __tests__/regression/api-regression.test.ts
PASS __tests__/app/api/admin/scan-lemmy-now/route.test.ts
  ● Console

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: 2/2

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      📊 Lemmy scan complete: 22 processed, 16 approved

      at log (app/api/admin/scan-lemmy-now/route.ts:68:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: undefined/undefined

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      📊 Lemmy scan complete: 12 processed, 9 approved

      at log (app/api/admin/scan-lemmy-now/route.ts:68:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: 1/2

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      📊 Lemmy scan complete: 10 processed, 7 approved

      at log (app/api/admin/scan-lemmy-now/route.ts:68:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: undefined/undefined

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      📊 Lemmy scan complete: 18 processed, 0 approved

      at log (app/api/admin/scan-lemmy-now/route.ts:68:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: undefined/undefined

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: undefined/undefined

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      📊 Lemmy scan complete: 15 processed, 11 approved

      at log (app/api/admin/scan-lemmy-now/route.ts:68:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: undefined/undefined

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      📊 Lemmy scan complete: 10 processed, 7 approved

      at log (app/api/admin/scan-lemmy-now/route.ts:68:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: undefined/undefined

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      📊 Lemmy scan complete: 15 processed, 10 approved

      at log (app/api/admin/scan-lemmy-now/route.ts:68:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: 2/2

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      📊 Lemmy scan complete: 20 processed, 14 approved

      at log (app/api/admin/scan-lemmy-now/route.ts:68:13)

    console.log
      🌐 Starting Lemmy federated scan...

      at log (app/api/admin/scan-lemmy-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Lemmy scan

      at log (app/api/admin/scan-lemmy-now/route.ts:35:13)

    console.log
      ✅ Lemmy federated access available (no API key required)

      at log (app/api/admin/scan-lemmy-now/route.ts:38:13)

    console.log
      🧪 Testing Lemmy federated network connection...

      at log (app/api/admin/scan-lemmy-now/route.ts:41:13)

    console.log
      ✅ Lemmy federated network connection successful

      at log (app/api/admin/scan-lemmy-now/route.ts:54:13)

    console.log
      🌐 Connected to communities: undefined/undefined

      at log (app/api/admin/scan-lemmy-now/route.ts:55:13)

    console.log
      🎯 Starting Lemmy federated scan with up to 20 posts

      at log (app/api/admin/scan-lemmy-now/route.ts:61:13)

    console.log
      📊 Lemmy scan complete: 12 processed, 8 approved

      at log (app/api/admin/scan-lemmy-now/route.ts:68:13)

PASS __tests__/regression/integration-regression.test.ts
FAIL tests/api/queue-health.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/api/queue-health.test.ts'

    [0m [90m 3 |[39m [36mimport[39m { [33mNextRequest[39m } [36mfrom[39m [32m'next/server'[39m
     [90m 4 |[39m [36mimport[39m { db } [36mfrom[39m [32m'@/lib/db'[39m
    [31m[1m>[22m[39m[90m 5 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 6 |[39m [90m// Mock dependencies[39m
     [90m 7 |[39m vi[33m.[39mmock([32m'@/lib/services/logging'[39m[33m,[39m () [33m=>[39m ({
     [90m 8 |[39m   loggingService[33m:[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/api/queue-health.test.ts:5:17)

FAIL __tests__/lib/services/reddit.test.ts
  ● Test suite failed to run

    Cannot find module 'snoowrap' from '__tests__/lib/services/reddit.test.ts'

    [0m [90m 32 |[39m
     [90m 33 |[39m [90m// Mock snoowrap to prevent real API calls[39m
    [31m[1m>[22m[39m[90m 34 |[39m jest[33m.[39mmock([32m'snoowrap'[39m[33m,[39m () [33m=>[39m {
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 35 |[39m   [36mreturn[39m jest[33m.[39mfn()[33m.[39mmockImplementation(() [33m=>[39m ({
     [90m 36 |[39m     config[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 37 |[39m     getSubreddit[33m:[39m jest[33m.[39mfn()[33m.[39mmockReturnValue({[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (__tests__/lib/services/reddit.test.ts:34:6)

PASS __tests__/app/api/admin/scan-pixabay-now/route.test.ts
  ● Console

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 16, firstChars: 'test-pix...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

    console.log
      🧪 Test response status: 200

      at log (app/api/admin/scan-pixabay-now/route.ts:70:13)

    console.log
      ✅ Pixabay API key test successful!

      at log (app/api/admin/scan-pixabay-now/route.ts:107:13)

    console.log
      🎯 Searching Pixabay with term: "hotdog", offset: 18

      at log (app/api/admin/scan-pixabay-now/route.ts:128:13)

    console.log
      🔍 Fetching hotdog images from Pixabay API...

      at log (app/api/admin/scan-pixabay-now/route.ts:130:13)

    console.log
      ✅ Pixabay API response received, images found: 2

      at log (app/api/admin/scan-pixabay-now/route.ts:160:13)

    console.log
      🔍 Processing Pixabay image 123456: "hotdog, food, grill, barbecue"

      at log (app/api/admin/scan-pixabay-now/route.ts:188:17)

    console.log
      🔍 Generated unique hash: 04cdb80d3a05... (timestamp-based to avoid collisions)

      at log (app/api/admin/scan-pixabay-now/route.ts:189:17)

    console.log
      📝 Attempting to save image: "hotdog, food, grill, barbecue" by TestPhotographer

      at log (app/api/admin/scan-pixabay-now/route.ts:210:17)

    console.log
      ✅ Successfully saved image with ID: 1

      at log (app/api/admin/scan-pixabay-now/route.ts:235:19)

    console.log
      🔍 Processing Pixabay image 789012: "frankfurter, sausage, bun"

      at log (app/api/admin/scan-pixabay-now/route.ts:188:17)

    console.log
      🔍 Generated unique hash: cab32ee20bf7... (timestamp-based to avoid collisions)

      at log (app/api/admin/scan-pixabay-now/route.ts:189:17)

    console.log
      📝 Attempting to save image: "frankfurter, sausage, bun" by FoodPhotog

      at log (app/api/admin/scan-pixabay-now/route.ts:210:17)

    console.log
      ✅ Successfully saved image with ID: 1

      at log (app/api/admin/scan-pixabay-now/route.ts:235:19)

    console.log
      📊 Pixabay scan complete: 2 images added, 0 duplicates, 0 quality-filtered, 0 errors

      at log (app/api/admin/scan-pixabay-now/route.ts:248:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 16, firstChars: 'test-pix...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

    console.log
      🧪 Test response status: 200

      at log (app/api/admin/scan-pixabay-now/route.ts:70:13)

    console.log
      ✅ Pixabay API key test successful!

      at log (app/api/admin/scan-pixabay-now/route.ts:107:13)

    console.log
      🎯 Searching Pixabay with term: "sausage", offset: 16

      at log (app/api/admin/scan-pixabay-now/route.ts:128:13)

    console.log
      🔍 Fetching hotdog images from Pixabay API...

      at log (app/api/admin/scan-pixabay-now/route.ts:130:13)

    console.log
      ✅ Pixabay API response received, images found: 2

      at log (app/api/admin/scan-pixabay-now/route.ts:160:13)

    console.log
      🔍 Processing Pixabay image 123456: "hotdog, food, grill, barbecue"

      at log (app/api/admin/scan-pixabay-now/route.ts:188:17)

    console.log
      🔍 Generated unique hash: 91f59158e045... (timestamp-based to avoid collisions)

      at log (app/api/admin/scan-pixabay-now/route.ts:189:17)

    console.log
      📝 Attempting to save image: "hotdog, food, grill, barbecue" by TestPhotographer

      at log (app/api/admin/scan-pixabay-now/route.ts:210:17)

    console.log
      ✅ Successfully saved image with ID: 1

      at log (app/api/admin/scan-pixabay-now/route.ts:235:19)

    console.log
      🔍 Processing Pixabay image 789012: "frankfurter, sausage, bun"

      at log (app/api/admin/scan-pixabay-now/route.ts:188:17)

    console.log
      🔍 Generated unique hash: ebc875e2ad49... (timestamp-based to avoid collisions)

      at log (app/api/admin/scan-pixabay-now/route.ts:189:17)

    console.log
      📝 Attempting to save image: "frankfurter, sausage, bun" by FoodPhotog

      at log (app/api/admin/scan-pixabay-now/route.ts:210:17)

    console.log
      ✅ Successfully saved image with ID: 1

      at log (app/api/admin/scan-pixabay-now/route.ts:235:19)

    console.log
      📊 Pixabay scan complete: 2 images added, 0 duplicates, 0 quality-filtered, 0 errors

      at log (app/api/admin/scan-pixabay-now/route.ts:248:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: false, length: 0, firstChars: 'N/A' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 11, firstChars: 'invalid-...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

    console.log
      🧪 Test response status: 403

      at log (app/api/admin/scan-pixabay-now/route.ts:70:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 8, firstChars: 'test-key...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

    console.log
      🧪 Test response status: 429

      at log (app/api/admin/scan-pixabay-now/route.ts:70:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 8, firstChars: 'test-key...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

    console.log
      🧪 Test response status: 200

      at log (app/api/admin/scan-pixabay-now/route.ts:70:13)

    console.log
      ✅ Pixabay API key test successful!

      at log (app/api/admin/scan-pixabay-now/route.ts:107:13)

    console.log
      🎯 Searching Pixabay with term: "sausage", offset: 14

      at log (app/api/admin/scan-pixabay-now/route.ts:128:13)

    console.log
      🔍 Fetching hotdog images from Pixabay API...

      at log (app/api/admin/scan-pixabay-now/route.ts:130:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 8, firstChars: 'test-key...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

    console.log
      🧪 Test response status: 200

      at log (app/api/admin/scan-pixabay-now/route.ts:70:13)

    console.log
      ✅ Pixabay API key test successful!

      at log (app/api/admin/scan-pixabay-now/route.ts:107:13)

    console.log
      🎯 Searching Pixabay with term: "frankfurter", offset: 13

      at log (app/api/admin/scan-pixabay-now/route.ts:128:13)

    console.log
      🔍 Fetching hotdog images from Pixabay API...

      at log (app/api/admin/scan-pixabay-now/route.ts:130:13)

    console.log
      ✅ Pixabay API response received, images found: 0

      at log (app/api/admin/scan-pixabay-now/route.ts:160:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 8, firstChars: 'test-key...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

    console.log
      🧪 Test response status: 200

      at log (app/api/admin/scan-pixabay-now/route.ts:70:13)

    console.log
      ✅ Pixabay API key test successful!

      at log (app/api/admin/scan-pixabay-now/route.ts:107:13)

    console.log
      🎯 Searching Pixabay with term: "sausage", offset: 8

      at log (app/api/admin/scan-pixabay-now/route.ts:128:13)

    console.log
      🔍 Fetching hotdog images from Pixabay API...

      at log (app/api/admin/scan-pixabay-now/route.ts:130:13)

    console.log
      ✅ Pixabay API response received, images found: 2

      at log (app/api/admin/scan-pixabay-now/route.ts:160:13)

    console.log
      ⚠️ Skipping low-quality image: hotdog (5 likes, 50 views)

      at log (app/api/admin/scan-pixabay-now/route.ts:180:19)

    console.log
      🔍 Processing Pixabay image 2: "hotdog"

      at log (app/api/admin/scan-pixabay-now/route.ts:188:17)

    console.log
      🔍 Generated unique hash: 2e778211c8ff... (timestamp-based to avoid collisions)

      at log (app/api/admin/scan-pixabay-now/route.ts:189:17)

    console.log
      📝 Attempting to save image: "hotdog" by TestUser

      at log (app/api/admin/scan-pixabay-now/route.ts:210:17)

    console.log
      ✅ Successfully saved image with ID: 1

      at log (app/api/admin/scan-pixabay-now/route.ts:235:19)

    console.log
      📊 Pixabay scan complete: 1 images added, 0 duplicates, 1 quality-filtered, 0 errors

      at log (app/api/admin/scan-pixabay-now/route.ts:248:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 8, firstChars: 'test-key...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

    console.log
      🧪 Test response status: 200

      at log (app/api/admin/scan-pixabay-now/route.ts:70:13)

    console.log
      ✅ Pixabay API key test successful!

      at log (app/api/admin/scan-pixabay-now/route.ts:107:13)

    console.log
      🎯 Searching Pixabay with term: "frankfurter", offset: 19

      at log (app/api/admin/scan-pixabay-now/route.ts:128:13)

    console.log
      🔍 Fetching hotdog images from Pixabay API...

      at log (app/api/admin/scan-pixabay-now/route.ts:130:13)

    console.log
      ✅ Pixabay API response received, images found: 2

      at log (app/api/admin/scan-pixabay-now/route.ts:160:13)

    console.log
      🔍 Processing Pixabay image 123456: "hotdog, food, grill, barbecue"

      at log (app/api/admin/scan-pixabay-now/route.ts:188:17)

    console.log
      🔍 Generated unique hash: 084c8a957c30... (timestamp-based to avoid collisions)

      at log (app/api/admin/scan-pixabay-now/route.ts:189:17)

    console.log
      📝 Attempting to save image: "hotdog, food, grill, barbecue" by TestPhotographer

      at log (app/api/admin/scan-pixabay-now/route.ts:210:17)

    console.log
      🔍 Processing Pixabay image 789012: "frankfurter, sausage, bun"

      at log (app/api/admin/scan-pixabay-now/route.ts:188:17)

    console.log
      🔍 Generated unique hash: 7518fe3c540b... (timestamp-based to avoid collisions)

      at log (app/api/admin/scan-pixabay-now/route.ts:189:17)

    console.log
      📝 Attempting to save image: "frankfurter, sausage, bun" by FoodPhotog

      at log (app/api/admin/scan-pixabay-now/route.ts:210:17)

    console.log
      📊 Pixabay scan complete: 0 images added, 0 duplicates, 0 quality-filtered, 2 errors

      at log (app/api/admin/scan-pixabay-now/route.ts:248:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 8, firstChars: 'test-key...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

    console.log
      🧪 Test response status: 200

      at log (app/api/admin/scan-pixabay-now/route.ts:70:13)

    console.log
      ✅ Pixabay API key test successful!

      at log (app/api/admin/scan-pixabay-now/route.ts:107:13)

    console.log
      🎯 Searching Pixabay with term: "frankfurter", offset: 16

      at log (app/api/admin/scan-pixabay-now/route.ts:128:13)

    console.log
      🔍 Fetching hotdog images from Pixabay API...

      at log (app/api/admin/scan-pixabay-now/route.ts:130:13)

    console.log
      ✅ Pixabay API response received, images found: 2

      at log (app/api/admin/scan-pixabay-now/route.ts:160:13)

    console.log
      🔍 Processing Pixabay image 123456: "hotdog, food, grill, barbecue"

      at log (app/api/admin/scan-pixabay-now/route.ts:188:17)

    console.log
      🔍 Generated unique hash: 8aa19b1c537c... (timestamp-based to avoid collisions)

      at log (app/api/admin/scan-pixabay-now/route.ts:189:17)

    console.log
      📝 Attempting to save image: "hotdog, food, grill, barbecue" by TestPhotographer

      at log (app/api/admin/scan-pixabay-now/route.ts:210:17)

    console.log
      ⚠️ Duplicate constraint violation: "hotdog, food, grill, barbecue" (hash: 8aa19b1c...)

      at log (app/api/admin/scan-pixabay-now/route.ts:229:21)

    console.log
      🔍 Processing Pixabay image 789012: "frankfurter, sausage, bun"

      at log (app/api/admin/scan-pixabay-now/route.ts:188:17)

    console.log
      🔍 Generated unique hash: e369ea10b503... (timestamp-based to avoid collisions)

      at log (app/api/admin/scan-pixabay-now/route.ts:189:17)

    console.log
      📝 Attempting to save image: "frankfurter, sausage, bun" by FoodPhotog

      at log (app/api/admin/scan-pixabay-now/route.ts:210:17)

    console.log
      ⚠️ Duplicate constraint violation: "frankfurter, sausage, bun" (hash: e369ea10...)

      at log (app/api/admin/scan-pixabay-now/route.ts:229:21)

    console.log
      📊 Pixabay scan complete: 0 images added, 2 duplicates, -2 quality-filtered, 2 errors

      at log (app/api/admin/scan-pixabay-now/route.ts:248:13)

    console.log
      📸 Starting Pixabay scan with enhanced diagnostics...

      at log (app/api/admin/scan-pixabay-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Pixabay scan

      at log (app/api/admin/scan-pixabay-now/route.ts:35:13)

    console.log
      🔑 Pixabay API Key Status: { exists: true, length: 8, firstChars: 'test-key...' }

      at log (app/api/admin/scan-pixabay-now/route.ts:39:13)

    console.log
      🧪 Testing Pixabay API key validity...

      at log (app/api/admin/scan-pixabay-now/route.ts:60:13)

PASS __tests__/app/api/admin/scan-tumblr-now/route.test.ts
  ● Console

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ✅ Tumblr API key configured

      at log (app/api/admin/scan-tumblr-now/route.ts:40:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      ✅ Tumblr connection successful: Tumblr connection successful

      at log (app/api/admin/scan-tumblr-now/route.ts:59:13)

    console.log
      🎯 Starting Tumblr scan with up to 20 posts

      at log (app/api/admin/scan-tumblr-now/route.ts:65:13)

    console.log
      📊 Tumblr scan complete: 20 processed, 15 approved

      at log (app/api/admin/scan-tumblr-now/route.ts:72:13)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ✅ Tumblr API key configured

      at log (app/api/admin/scan-tumblr-now/route.ts:40:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      ✅ Tumblr connection successful: Tumblr connection successful

      at log (app/api/admin/scan-tumblr-now/route.ts:59:13)

    console.log
      🎯 Starting Tumblr scan with up to 20 posts

      at log (app/api/admin/scan-tumblr-now/route.ts:65:13)

    console.log
      📊 Tumblr scan complete: 10 processed, 8 approved

      at log (app/api/admin/scan-tumblr-now/route.ts:72:13)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ⚠️ Tumblr API key not configured, using mock data for testing

      at log (app/api/admin/scan-tumblr-now/route.ts:42:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      ✅ Tumblr connection successful: Tumblr connection successful (mock mode)

      at log (app/api/admin/scan-tumblr-now/route.ts:59:13)

    console.log
      🎯 Starting Tumblr scan with up to 20 posts

      at log (app/api/admin/scan-tumblr-now/route.ts:65:13)

    console.log
      📊 Tumblr scan complete: 5 processed, 3 approved

      at log (app/api/admin/scan-tumblr-now/route.ts:72:13)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ✅ Tumblr API key configured

      at log (app/api/admin/scan-tumblr-now/route.ts:40:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      ✅ Tumblr connection successful: Tumblr connection successful

      at log (app/api/admin/scan-tumblr-now/route.ts:59:13)

    console.log
      🎯 Starting Tumblr scan with up to 20 posts

      at log (app/api/admin/scan-tumblr-now/route.ts:65:13)

    console.log
      📊 Tumblr scan complete: 15 processed, 0 approved

      at log (app/api/admin/scan-tumblr-now/route.ts:72:13)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ⚠️ Tumblr API key not configured, using mock data for testing

      at log (app/api/admin/scan-tumblr-now/route.ts:42:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      ✅ Tumblr connection successful: Tumblr connection successful (mock mode)

      at log (app/api/admin/scan-tumblr-now/route.ts:59:13)

    console.log
      🎯 Starting Tumblr scan with up to 20 posts

      at log (app/api/admin/scan-tumblr-now/route.ts:65:13)

    console.log
      📊 Tumblr scan complete: 3 processed, 0 approved

      at log (app/api/admin/scan-tumblr-now/route.ts:72:13)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ✅ Tumblr API key configured

      at log (app/api/admin/scan-tumblr-now/route.ts:40:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ✅ Tumblr API key configured

      at log (app/api/admin/scan-tumblr-now/route.ts:40:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      ✅ Tumblr connection successful: Tumblr connection successful

      at log (app/api/admin/scan-tumblr-now/route.ts:59:13)

    console.log
      🎯 Starting Tumblr scan with up to 20 posts

      at log (app/api/admin/scan-tumblr-now/route.ts:65:13)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ✅ Tumblr API key configured

      at log (app/api/admin/scan-tumblr-now/route.ts:40:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      ✅ Tumblr connection successful: Tumblr connection successful

      at log (app/api/admin/scan-tumblr-now/route.ts:59:13)

    console.log
      🎯 Starting Tumblr scan with up to 20 posts

      at log (app/api/admin/scan-tumblr-now/route.ts:65:13)

    console.log
      📊 Tumblr scan complete: 12 processed, 8 approved

      at log (app/api/admin/scan-tumblr-now/route.ts:72:13)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ✅ Tumblr API key configured

      at log (app/api/admin/scan-tumblr-now/route.ts:40:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      ✅ Tumblr connection successful: Tumblr connection successful

      at log (app/api/admin/scan-tumblr-now/route.ts:59:13)

    console.log
      🎯 Starting Tumblr scan with up to 20 posts

      at log (app/api/admin/scan-tumblr-now/route.ts:65:13)

    console.log
      📊 Tumblr scan complete: 8 processed, 6 approved

      at log (app/api/admin/scan-tumblr-now/route.ts:72:13)

    console.log
      🎨 Starting Tumblr creative content scan...

      at log (app/api/admin/scan-tumblr-now/route.ts:5:11)

    console.log
      ✅ Authentication successful for Tumblr scan

      at log (app/api/admin/scan-tumblr-now/route.ts:35:13)

    console.log
      ✅ Tumblr API key configured

      at log (app/api/admin/scan-tumblr-now/route.ts:40:15)

    console.log
      🧪 Testing Tumblr API connection...

      at log (app/api/admin/scan-tumblr-now/route.ts:46:13)

    console.log
      ✅ Tumblr connection successful: Tumblr connection successful

      at log (app/api/admin/scan-tumblr-now/route.ts:59:13)

    console.log
      🎯 Starting Tumblr scan with up to 20 posts

      at log (app/api/admin/scan-tumblr-now/route.ts:65:13)

    console.log
      📊 Tumblr scan complete: 15 processed, 8 approved

      at log (app/api/admin/scan-tumblr-now/route.ts:72:13)

FAIL __tests__/app/api/admin/analytics/route.test.ts
  ● Console

    console.log
      🧪 [MockLayer] Returning mock data for endpoint: analytics

      at log (app/api/admin/route-utils.ts:11:11)

    console.log
      🧪 [MockLayer] Returning mock data for endpoint: analytics

      at log (app/api/admin/route-utils.ts:11:11)

    console.log
      🧪 [MockLayer] Returning mock data for endpoint: analytics

      at log (app/api/admin/route-utils.ts:11:11)

    console.log
      🧪 [MockLayer] Returning mock data for endpoint: analytics

      at log (app/api/admin/route-utils.ts:11:11)

    console.log
      🧪 [MockLayer] Returning mock data for endpoint: analytics

      at log (app/api/admin/route-utils.ts:11:11)

    console.log
      🧪 [MockLayer] Returning mock data for endpoint: analytics

      at log (app/api/admin/route-utils.ts:11:11)

    console.log
      🧪 [MockLayer] Returning mock data for endpoint: analytics

      at log (app/api/admin/route-utils.ts:11:11)

  ● /api/admin/analytics › GET › should return comprehensive analytics data

    expect(received).toMatchObject(expected)

    - Expected  - 46
    + Received  + 21

      Object {
    -   "contentTrends": ArrayContaining [
    -     ObjectContaining {
    -       "approvalRate": Any<Number>,
    -       "approvedContent": Any<Number>,
    -       "avgConfidence": Any<Number>,
    -       "date": Any<String>,
    -       "postedContent": Any<Number>,
    -       "totalContent": Any<Number>,
    +   "data": Object {
    +     "performance": Object {
    +       "approval_rate": 0.75,
    +       "avg_confidence_score": 0.82,
    +       "posting_frequency": 6,
          },
    +     "timestamp": "2025-10-17T21:43:15.601Z",
    +     "trends": Object {
    +       "daily_content": Array [
    +         5,
    +         7,
    +         4,
    +         8,
    +         6,
    +         9,
    +         5,
            ],
    -   "engagementMetrics": ObjectContaining {
    -     "avgEngagementScore": Any<Number>,
    -     "topPerformingContent": Any<Array>,
    -     "totalViews": Any<Number>,
    -   },
    -   "filteringMetrics": ObjectContaining {
    -     "avgConfidenceScore": Any<Number>,
    -     "flaggedCount": Any<Number>,
    -     "flaggedPatterns": Any<Array>,
    -     "totalAnalyzed": Any<Number>,
    -   },
    -   "overview": Object {
    -     "approvalRate": 0.6,
    -     "approvedContent": 90,
    -     "avgConfidenceScore": 0.78,
    -     "errorRate": 0.05,
    -     "postedContent": 60,
    -     "queueSize": 30,
    -     "totalContent": 150,
    -   },
    -   "platformMetrics": ArrayContaining [
    -     ObjectContaining {
    -       "approvalRate": Any<Number>,
    -       "avgConfidenceScore": Any<Number>,
    -       "platform": "reddit",
    -       "totalApproved": Any<Number>,
    -       "totalPosted": Any<Number>,
    -       "totalScanned": Any<Number>,
    +       "platform_distribution": Object {
    +         "giphy": 20,
    +         "imgur": 20,
    +         "reddit": 35,
    +         "youtube": 25,
            },
    -   ],
    -   "platformTrends": ObjectContaining {
    -     "reddit": Any<Array>,
    -     "youtube": Any<Array>,
          },
    -   "queueHealth": ObjectContaining {
    -     "errorRate": 0.05,
    -     "isHealthy": Any<Boolean>,
    -     "lastPostTime": "2025-09-12T08:00:00Z",
    -     "lastScanTime": "2025-09-12T10:00:00Z",
    -     "queueSize": 30,
        },
    +   "success": true,
      }

    [0m [90m 54 |[39m
     [90m 55 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 56 |[39m       expect(data)[33m.[39mtoMatchObject({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 57 |[39m         overview[33m:[39m {
     [90m 58 |[39m           totalContent[33m:[39m [35m150[39m[33m,[39m
     [90m 59 |[39m           approvedContent[33m:[39m [35m90[39m[33m,[39m[0m

      at Object.toMatchObject (__tests__/app/api/admin/analytics/route.test.ts:56:20)

  ● /api/admin/analytics › GET › should return analytics with minimal data when services return empty results

    TypeError: Cannot read properties of undefined (reading 'totalContent')

    [0m [90m 154 |[39m
     [90m 155 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 156 |[39m       expect(data[33m.[39moverview[33m.[39mtotalContent)[33m.[39mtoBe([35m0[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 157 |[39m       expect(data[33m.[39mplatformMetrics)[33m.[39mtoEqual([])
     [90m 158 |[39m       expect(data[33m.[39mcontentTrends)[33m.[39mtoEqual([])
     [90m 159 |[39m       expect(data[33m.[39mqueueHealth[33m.[39misHealthy)[33m.[39mtoBe([36mtrue[39m) [90m// Empty queue is healthy[39m[0m

      at Object.totalContent (__tests__/app/api/admin/analytics/route.test.ts:156:28)

  ● /api/admin/analytics › GET › should handle platform performance errors gracefully

    TypeError: Cannot read properties of undefined (reading 'totalContent')

    [0m [90m 194 |[39m
     [90m 195 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 196 |[39m       expect(data[33m.[39moverview[33m.[39mtotalContent)[33m.[39mtoBe([35m100[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 197 |[39m       expect(data[33m.[39mplatformTrends)[33m.[39mtoEqual(expect[33m.[39mobjectContaining({
     [90m 198 |[39m         reddit[33m:[39m [{ date[33m:[39m [32m'2025-09-10'[39m[33m,[39m posts[33m:[39m [35m5[39m }][33m,[39m
     [90m 199 |[39m         youtube[33m:[39m [][33m,[39m[0m

      at Object.totalContent (__tests__/app/api/admin/analytics/route.test.ts:196:28)

  ● /api/admin/analytics › GET › should return 500 error when dashboard metrics fails

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

    [0m [90m 210 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 211 |[39m
    [31m[1m>[22m[39m[90m 212 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 213 |[39m       expect(data)[33m.[39mtoEqual({
     [90m 214 |[39m         error[33m:[39m [32m'Failed to fetch analytics data'[39m
     [90m 215 |[39m       })[0m

      at Object.toBe (__tests__/app/api/admin/analytics/route.test.ts:212:31)

  ● /api/admin/analytics › GET › should return 500 error when content trends fails

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

    [0m [90m 243 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 244 |[39m
    [31m[1m>[22m[39m[90m 245 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 246 |[39m       expect(data)[33m.[39mtoEqual({
     [90m 247 |[39m         error[33m:[39m [32m'Failed to fetch analytics data'[39m
     [90m 248 |[39m       })[0m

      at Object.toBe (__tests__/app/api/admin/analytics/route.test.ts:245:31)

  ● /api/admin/analytics › GET › should validate response structure matches frontend expectations

    expect(received).toHaveProperty(path)

    Expected path: "overview"
    Received path: []

    Received value: {"data": {"performance": {"approval_rate": 0.75, "avg_confidence_score": 0.82, "posting_frequency": 6}, "timestamp": "2025-10-17T21:43:15.639Z", "trends": {"daily_content": [5, 7, 4, 8, 6, 9, 5], "platform_distribution": {"giphy": 20, "imgur": 20, "reddit": 35, "youtube": 25}}}, "success": true}

    [0m [90m 314 |[39m
     [90m 315 |[39m       [90m// Validate all required fields are present and correctly typed[39m
    [31m[1m>[22m[39m[90m 316 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'overview'[39m)
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 317 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'platformMetrics'[39m)
     [90m 318 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'engagementMetrics'[39m)
     [90m 319 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'filteringMetrics'[39m)[0m

      at Object.toHaveProperty (__tests__/app/api/admin/analytics/route.test.ts:316:20)

  ● /api/admin/analytics › GET › should correctly calculate queue health status

    TypeError: Cannot read properties of undefined (reading 'isHealthy')

    [0m [90m 379 |[39m
     [90m 380 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 381 |[39m       expect(data[33m.[39mqueueHealth[33m.[39misHealthy)[33m.[39mtoBe([36mfalse[39m) [90m// Should be unhealthy[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 382 |[39m       expect(data[33m.[39mqueueHealth[33m.[39mqueueSize)[33m.[39mtoBe([35m150[39m)
     [90m 383 |[39m       expect(data[33m.[39mqueueHealth[33m.[39merrorRate)[33m.[39mtoBe([35m0.15[39m)
     [90m 384 |[39m     })[0m

      at Object.isHealthy (__tests__/app/api/admin/analytics/route.test.ts:381:31)

PASS __tests__/app/api/admin/giphy/scan/route.test.ts
PASS __tests__/lib/services/reddit-monitoring.test.ts
FAIL __tests__/app/api/admin/content-scheduled.test.ts
  ● Console

    console.log
      [AdminContentAPI] GET /api/admin/content request received

      at log (app/api/admin/content/route.ts:10:11)

    console.log
      [AdminContentAPI] Environment: test

      at log (app/api/admin/content/route.ts:11:11)

    console.log
      [AdminContentAPI] Database URL set: false

      at log (app/api/admin/content/route.ts:12:11)

    console.log
      [AdminContentAPI] Supabase URL set: false

      at log (app/api/admin/content/route.ts:13:11)

    console.log
      [AdminContentAPI] User verified: admin

      at log (app/api/admin/content/route.ts:54:11)

    console.log
      [AdminContentAPI] Query params - status: scheduled, page: 1, limit: 50, offset: 0

      at log (app/api/admin/content/route.ts:65:11)

    console.log
      [AdminContentAPI] Database health: { status: 'healthy' }

      at log (app/api/admin/content/route.ts:70:13)

    console.log
      [AdminContentAPI] Verifying database schema...

      at log (app/api/admin/content/route.ts:73:13)

    console.log
      [AdminContentAPI] Available columns in content_queue: 19

      at log (app/api/admin/content/route.ts:77:13)

    console.log
      [AdminContentAPI] Available columns in posted_content: 19

      at log (app/api/admin/content/route.ts:78:13)

    console.log
      [AdminContentAPI] Safe SELECT clause built with fallbacks for missing columns

      at log (app/api/admin/content/route.ts:125:15)

    console.log
      🧩 [ContentAPI] ORDER BY scheduled_for ASC applied for scheduled filter

      at log (app/api/admin/content/route.ts:220:19)

    console.log
      🧩 [ContentAPI] Scheduled filter - hasContentStatus: false hasScheduledPostTime: false hasStatus: true hasScheduledFor: true

      at log (app/api/admin/content/route.ts:231:17)

    console.log
      [AdminContentAPI] Filtering for scheduled content with WHERE: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:235:15)

    console.log
      🧩 [ContentAPI] Final WHERE Clause: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:254:15)

    console.log
      🧩 [ContentAPI] Detected Columns: 19 (has status) (has scheduled_for)

      at log (app/api/admin/content/route.ts:255:15)

    console.log
      [AdminContentAPI] Executing content query for status: scheduled

      at log (app/api/admin/content/route.ts:260:13)

    console.log
      [AdminContentAPI] Query success: 1 rows

      at log (app/api/admin/content/route.ts:264:13)

    console.log
      🧩 [ContentAPI] Row Count Returned: 1

      at log (app/api/admin/content/route.ts:265:13)

    console.log
      [AdminContentAPI] Total count: 1

      at log (app/api/admin/content/route.ts:271:13)

    console.group
        🧩 [Diagnostics] Scheduled Query Result

      at group (app/api/admin/content/route.ts:274:13)

    console.log
        Requested status: scheduled

      at log (app/api/admin/content/route.ts:275:13)

    console.log
        Rows returned from DB: 1

      at log (app/api/admin/content/route.ts:276:13)

    console.log
        First row sample: {
        id: 1,
        content_text: 'Test scheduled content',
        status: 'scheduled',
        scheduled_for: '2025-10-09 10:30:00',
        source_platform: 'reddit',
        created_at: '2025-10-08 12:00:00'
      }

      at log (app/api/admin/content/route.ts:277:13)

    console.log
        Scheduled content IDs: [ 1 ]

      at log (app/api/admin/content/route.ts:279:15)

    console.log
        Scheduled times: [ '2025-10-09 10:30:00' ]

      at log (app/api/admin/content/route.ts:280:15)

    console.group
        🧩 [Diagnostics] Response Data

      at group (app/api/admin/content/route.ts:330:13)

    console.log
        Mapped content length: 1

      at log (app/api/admin/content/route.ts:331:13)

    console.log
        Response structure: { hasContent: true, contentLength: 1, filter: 'scheduled', total: 1 }

      at log (app/api/admin/content/route.ts:332:13)

    console.log
        First mapped scheduled item: {
        id: 1,
        content_text: 'Test scheduled content',
        content_type: undefined,
        source_platform: 'reddit',
        original_url: undefined,
        original_author: undefined,
        content_image_url: undefined,
        content_video_url: undefined,
        scraped_at: undefined,
        is_posted: undefined,
        is_approved: undefined,
        posted_at: undefined,
        admin_notes: undefined,
        created_at: '2025-10-08 12:00:00',
        updated_at: undefined,
        post_order: 1,
        content_status: 'scheduled',
        status: 'scheduled',
        scheduled_for: '2025-10-09 10:30:00',
        scheduled_post_time: undefined,
        reviewed_at: undefined,
        reviewed_by: undefined,
        rejection_reason: undefined,
        confidence_score: undefined,
        is_spam: undefined,
        is_inappropriate: undefined,
        is_unrelated: undefined,
        is_valid_hotdog: undefined
      }

      at log (app/api/admin/content/route.ts:339:15)

    console.log
      [AdminContentAPI] Successfully returning 1 content items

      at log (app/api/admin/content/route.ts:343:13)

    console.log
      [AdminContentAPI] GET /api/admin/content request received

      at log (app/api/admin/content/route.ts:10:11)

    console.log
      [AdminContentAPI] Environment: test

      at log (app/api/admin/content/route.ts:11:11)

    console.log
      [AdminContentAPI] Database URL set: false

      at log (app/api/admin/content/route.ts:12:11)

    console.log
      [AdminContentAPI] Supabase URL set: false

      at log (app/api/admin/content/route.ts:13:11)

    console.log
      [AdminContentAPI] User verified: admin

      at log (app/api/admin/content/route.ts:54:11)

    console.log
      [AdminContentAPI] Query params - status: scheduled, page: 1, limit: 50, offset: 0

      at log (app/api/admin/content/route.ts:65:11)

    console.log
      [AdminContentAPI] Database health: { status: 'healthy' }

      at log (app/api/admin/content/route.ts:70:13)

    console.log
      [AdminContentAPI] Verifying database schema...

      at log (app/api/admin/content/route.ts:73:13)

    console.log
      [AdminContentAPI] Available columns in content_queue: 19

      at log (app/api/admin/content/route.ts:77:13)

    console.log
      [AdminContentAPI] Available columns in posted_content: 19

      at log (app/api/admin/content/route.ts:78:13)

    console.log
      [AdminContentAPI] Safe SELECT clause built with fallbacks for missing columns

      at log (app/api/admin/content/route.ts:125:15)

    console.log
      🧩 [ContentAPI] ORDER BY scheduled_for ASC applied for scheduled filter

      at log (app/api/admin/content/route.ts:220:19)

    console.log
      🧩 [ContentAPI] Scheduled filter - hasContentStatus: false hasScheduledPostTime: false hasStatus: true hasScheduledFor: true

      at log (app/api/admin/content/route.ts:231:17)

    console.log
      [AdminContentAPI] Filtering for scheduled content with WHERE: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:235:15)

    console.log
      🧩 [ContentAPI] Final WHERE Clause: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:254:15)

    console.log
      🧩 [ContentAPI] Detected Columns: 19 (has status) (has scheduled_for)

      at log (app/api/admin/content/route.ts:255:15)

    console.log
      [AdminContentAPI] Executing content query for status: scheduled

      at log (app/api/admin/content/route.ts:260:13)

    console.log
      [AdminContentAPI] Query success: 1 rows

      at log (app/api/admin/content/route.ts:264:13)

    console.log
      🧩 [ContentAPI] Row Count Returned: 1

      at log (app/api/admin/content/route.ts:265:13)

    console.log
      [AdminContentAPI] Total count: 1

      at log (app/api/admin/content/route.ts:271:13)

    console.group
        🧩 [Diagnostics] Scheduled Query Result

      at group (app/api/admin/content/route.ts:274:13)

    console.log
        Requested status: scheduled

      at log (app/api/admin/content/route.ts:275:13)

    console.log
        Rows returned from DB: 1

      at log (app/api/admin/content/route.ts:276:13)

    console.log
        First row sample: {
        id: 15,
        content_text: 'Pixabay scheduled content',
        status: 'scheduled',
        scheduled_for: '2025-10-09 10:30:00',
        source_platform: 'pixabay'
      }

      at log (app/api/admin/content/route.ts:277:13)

    console.log
        Scheduled content IDs: [ 15 ]

      at log (app/api/admin/content/route.ts:279:15)

    console.log
        Scheduled times: [ '2025-10-09 10:30:00' ]

      at log (app/api/admin/content/route.ts:280:15)

    console.group
        🧩 [Diagnostics] Response Data

      at group (app/api/admin/content/route.ts:330:13)

    console.log
        Mapped content length: 1

      at log (app/api/admin/content/route.ts:331:13)

    console.log
        Response structure: { hasContent: true, contentLength: 1, filter: 'scheduled', total: 1 }

      at log (app/api/admin/content/route.ts:332:13)

    console.log
        First mapped scheduled item: {
        id: 15,
        content_text: 'Pixabay scheduled content',
        content_type: undefined,
        source_platform: 'pixabay',
        original_url: undefined,
        original_author: undefined,
        content_image_url: undefined,
        content_video_url: undefined,
        scraped_at: undefined,
        is_posted: undefined,
        is_approved: undefined,
        posted_at: undefined,
        admin_notes: undefined,
        created_at: undefined,
        updated_at: undefined,
        post_order: 15,
        content_status: 'scheduled',
        status: 'scheduled',
        scheduled_for: '2025-10-09 10:30:00',
        scheduled_post_time: undefined,
        reviewed_at: undefined,
        reviewed_by: undefined,
        rejection_reason: undefined,
        confidence_score: undefined,
        is_spam: undefined,
        is_inappropriate: undefined,
        is_unrelated: undefined,
        is_valid_hotdog: undefined
      }

      at log (app/api/admin/content/route.ts:339:15)

    console.log
      [AdminContentAPI] Successfully returning 1 content items

      at log (app/api/admin/content/route.ts:343:13)

    console.log
      [AdminContentAPI] GET /api/admin/content request received

      at log (app/api/admin/content/route.ts:10:11)

    console.log
      [AdminContentAPI] Environment: test

      at log (app/api/admin/content/route.ts:11:11)

    console.log
      [AdminContentAPI] Database URL set: false

      at log (app/api/admin/content/route.ts:12:11)

    console.log
      [AdminContentAPI] Supabase URL set: false

      at log (app/api/admin/content/route.ts:13:11)

    console.log
      [AdminContentAPI] User verified: admin

      at log (app/api/admin/content/route.ts:54:11)

    console.log
      [AdminContentAPI] Query params - status: scheduled, page: 1, limit: 50, offset: 0

      at log (app/api/admin/content/route.ts:65:11)

    console.log
      [AdminContentAPI] Database health: { status: 'healthy' }

      at log (app/api/admin/content/route.ts:70:13)

    console.log
      [AdminContentAPI] Verifying database schema...

      at log (app/api/admin/content/route.ts:73:13)

    console.log
      [AdminContentAPI] Available columns in content_queue: 19

      at log (app/api/admin/content/route.ts:77:13)

    console.log
      [AdminContentAPI] Available columns in posted_content: 19

      at log (app/api/admin/content/route.ts:78:13)

    console.log
      [AdminContentAPI] Safe SELECT clause built with fallbacks for missing columns

      at log (app/api/admin/content/route.ts:125:15)

    console.log
      🧩 [ContentAPI] ORDER BY scheduled_for ASC applied for scheduled filter

      at log (app/api/admin/content/route.ts:220:19)

    console.log
      🧩 [ContentAPI] Scheduled filter - hasContentStatus: false hasScheduledPostTime: false hasStatus: true hasScheduledFor: true

      at log (app/api/admin/content/route.ts:231:17)

    console.log
      [AdminContentAPI] Filtering for scheduled content with WHERE: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:235:15)

    console.log
      🧩 [ContentAPI] Final WHERE Clause: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:254:15)

    console.log
      🧩 [ContentAPI] Detected Columns: 19 (has status) (has scheduled_for)

      at log (app/api/admin/content/route.ts:255:15)

    console.log
      [AdminContentAPI] Executing content query for status: scheduled

      at log (app/api/admin/content/route.ts:260:13)

    console.log
      [AdminContentAPI] Query success: 1 rows

      at log (app/api/admin/content/route.ts:264:13)

    console.log
      🧩 [ContentAPI] Row Count Returned: 1

      at log (app/api/admin/content/route.ts:265:13)

    console.log
      [AdminContentAPI] Total count: 1

      at log (app/api/admin/content/route.ts:271:13)

    console.group
        🧩 [Diagnostics] Scheduled Query Result

      at group (app/api/admin/content/route.ts:274:13)

    console.log
        Requested status: scheduled

      at log (app/api/admin/content/route.ts:275:13)

    console.log
        Rows returned from DB: 1

      at log (app/api/admin/content/route.ts:276:13)

    console.log
        First row sample: {
        id: 20,
        content_text: 'Approved content with scheduled time',
        status: 'approved',
        scheduled_for: '2025-10-09 12:00:00',
        source_platform: 'tumblr'
      }

      at log (app/api/admin/content/route.ts:277:13)

    console.log
        Scheduled content IDs: [ 20 ]

      at log (app/api/admin/content/route.ts:279:15)

    console.log
        Scheduled times: [ '2025-10-09 12:00:00' ]

      at log (app/api/admin/content/route.ts:280:15)

    console.group
        🧩 [Diagnostics] Response Data

      at group (app/api/admin/content/route.ts:330:13)

    console.log
        Mapped content length: 1

      at log (app/api/admin/content/route.ts:331:13)

    console.log
        Response structure: { hasContent: true, contentLength: 1, filter: 'scheduled', total: 1 }

      at log (app/api/admin/content/route.ts:332:13)

    console.log
        First mapped scheduled item: {
        id: 20,
        content_text: 'Approved content with scheduled time',
        content_type: undefined,
        source_platform: 'tumblr',
        original_url: undefined,
        original_author: undefined,
        content_image_url: undefined,
        content_video_url: undefined,
        scraped_at: undefined,
        is_posted: undefined,
        is_approved: undefined,
        posted_at: undefined,
        admin_notes: undefined,
        created_at: undefined,
        updated_at: undefined,
        post_order: 20,
        content_status: 'approved',
        status: 'approved',
        scheduled_for: '2025-10-09 12:00:00',
        scheduled_post_time: undefined,
        reviewed_at: undefined,
        reviewed_by: undefined,
        rejection_reason: undefined,
        confidence_score: undefined,
        is_spam: undefined,
        is_inappropriate: undefined,
        is_unrelated: undefined,
        is_valid_hotdog: undefined
      }

      at log (app/api/admin/content/route.ts:339:15)

    console.log
      [AdminContentAPI] Successfully returning 1 content items

      at log (app/api/admin/content/route.ts:343:13)

    console.log
      [AdminContentAPI] GET /api/admin/content request received

      at log (app/api/admin/content/route.ts:10:11)

    console.log
      [AdminContentAPI] Environment: test

      at log (app/api/admin/content/route.ts:11:11)

    console.log
      [AdminContentAPI] Database URL set: false

      at log (app/api/admin/content/route.ts:12:11)

    console.log
      [AdminContentAPI] Supabase URL set: false

      at log (app/api/admin/content/route.ts:13:11)

    console.log
      [AdminContentAPI] User verified: admin

      at log (app/api/admin/content/route.ts:54:11)

    console.log
      [AdminContentAPI] Query params - status: scheduled, page: 1, limit: 50, offset: 0

      at log (app/api/admin/content/route.ts:65:11)

    console.log
      [AdminContentAPI] Database health: { status: 'healthy' }

      at log (app/api/admin/content/route.ts:70:13)

    console.log
      [AdminContentAPI] Verifying database schema...

      at log (app/api/admin/content/route.ts:73:13)

    console.log
      [AdminContentAPI] Available columns in content_queue: 19

      at log (app/api/admin/content/route.ts:77:13)

    console.log
      [AdminContentAPI] Available columns in posted_content: 19

      at log (app/api/admin/content/route.ts:78:13)

    console.log
      [AdminContentAPI] Safe SELECT clause built with fallbacks for missing columns

      at log (app/api/admin/content/route.ts:125:15)

    console.log
      🧩 [ContentAPI] ORDER BY scheduled_for ASC applied for scheduled filter

      at log (app/api/admin/content/route.ts:220:19)

    console.log
      🧩 [ContentAPI] Scheduled filter - hasContentStatus: false hasScheduledPostTime: false hasStatus: true hasScheduledFor: true

      at log (app/api/admin/content/route.ts:231:17)

    console.log
      [AdminContentAPI] Filtering for scheduled content with WHERE: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:235:15)

    console.log
      🧩 [ContentAPI] Final WHERE Clause: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:254:15)

    console.log
      🧩 [ContentAPI] Detected Columns: 19 (has status) (has scheduled_for)

      at log (app/api/admin/content/route.ts:255:15)

    console.log
      [AdminContentAPI] Executing content query for status: scheduled

      at log (app/api/admin/content/route.ts:260:13)

    console.log
      [AdminContentAPI] Query success: 2 rows

      at log (app/api/admin/content/route.ts:264:13)

    console.log
      🧩 [ContentAPI] Row Count Returned: 2

      at log (app/api/admin/content/route.ts:265:13)

    console.log
      [AdminContentAPI] Total count: 2

      at log (app/api/admin/content/route.ts:271:13)

    console.group
        🧩 [Diagnostics] Scheduled Query Result

      at group (app/api/admin/content/route.ts:274:13)

    console.log
        Requested status: scheduled

      at log (app/api/admin/content/route.ts:275:13)

    console.log
        Rows returned from DB: 2

      at log (app/api/admin/content/route.ts:276:13)

    console.log
        First row sample: {
        id: 15,
        content_text: 'Scheduled status content',
        status: 'scheduled',
        scheduled_for: '2025-10-09 10:30:00',
        source_platform: 'pixabay'
      }

      at log (app/api/admin/content/route.ts:277:13)

    console.log
        Scheduled content IDs: [ 15, 20 ]

      at log (app/api/admin/content/route.ts:279:15)

    console.log
        Scheduled times: [ '2025-10-09 10:30:00', '2025-10-09 12:00:00' ]

      at log (app/api/admin/content/route.ts:280:15)

    console.group
        🧩 [Diagnostics] Response Data

      at group (app/api/admin/content/route.ts:330:13)

    console.log
        Mapped content length: 2

      at log (app/api/admin/content/route.ts:331:13)

    console.log
        Response structure: { hasContent: true, contentLength: 2, filter: 'scheduled', total: 2 }

      at log (app/api/admin/content/route.ts:332:13)

    console.log
        First mapped scheduled item: {
        id: 15,
        content_text: 'Scheduled status content',
        content_type: undefined,
        source_platform: 'pixabay',
        original_url: undefined,
        original_author: undefined,
        content_image_url: undefined,
        content_video_url: undefined,
        scraped_at: undefined,
        is_posted: undefined,
        is_approved: undefined,
        posted_at: undefined,
        admin_notes: undefined,
        created_at: undefined,
        updated_at: undefined,
        post_order: 15,
        content_status: 'scheduled',
        status: 'scheduled',
        scheduled_for: '2025-10-09 10:30:00',
        scheduled_post_time: undefined,
        reviewed_at: undefined,
        reviewed_by: undefined,
        rejection_reason: undefined,
        confidence_score: undefined,
        is_spam: undefined,
        is_inappropriate: undefined,
        is_unrelated: undefined,
        is_valid_hotdog: undefined
      }

      at log (app/api/admin/content/route.ts:339:15)

    console.log
      [AdminContentAPI] Successfully returning 2 content items

      at log (app/api/admin/content/route.ts:343:13)

    console.log
      [AdminContentAPI] GET /api/admin/content request received

      at log (app/api/admin/content/route.ts:10:11)

    console.log
      [AdminContentAPI] Environment: test

      at log (app/api/admin/content/route.ts:11:11)

    console.log
      [AdminContentAPI] Database URL set: false

      at log (app/api/admin/content/route.ts:12:11)

    console.log
      [AdminContentAPI] Supabase URL set: false

      at log (app/api/admin/content/route.ts:13:11)

    console.log
      [AdminContentAPI] User verified: admin

      at log (app/api/admin/content/route.ts:54:11)

    console.log
      [AdminContentAPI] Query params - status: scheduled, page: 1, limit: 50, offset: 0

      at log (app/api/admin/content/route.ts:65:11)

    console.log
      [AdminContentAPI] Database health: { status: 'healthy' }

      at log (app/api/admin/content/route.ts:70:13)

    console.log
      [AdminContentAPI] Verifying database schema...

      at log (app/api/admin/content/route.ts:73:13)

    console.log
      [AdminContentAPI] Available columns in content_queue: 4

      at log (app/api/admin/content/route.ts:77:13)

    console.log
      [AdminContentAPI] Available columns in posted_content: 4

      at log (app/api/admin/content/route.ts:78:13)

    console.log
      [AdminContentAPI] Safe SELECT clause built with fallbacks for missing columns

      at log (app/api/admin/content/route.ts:125:15)

    console.log
      🧩 [ContentAPI] ORDER BY scheduled_for ASC applied for scheduled filter

      at log (app/api/admin/content/route.ts:226:19)

    console.log
      🧩 [ContentAPI] Scheduled filter - hasContentStatus: false hasScheduledPostTime: false hasStatus: false hasScheduledFor: true

      at log (app/api/admin/content/route.ts:231:17)

    console.log
      [AdminContentAPI] Filtering for scheduled content with WHERE: cq.scheduled_for IS NOT NULL

      at log (app/api/admin/content/route.ts:235:15)

    console.log
      🧩 [ContentAPI] Final WHERE Clause: cq.scheduled_for IS NOT NULL

      at log (app/api/admin/content/route.ts:254:15)

    console.log
      🧩 [ContentAPI] Detected Columns: 4  (has scheduled_for)

      at log (app/api/admin/content/route.ts:255:15)

    console.log
      [AdminContentAPI] Executing content query for status: scheduled

      at log (app/api/admin/content/route.ts:260:13)

    console.log
      [AdminContentAPI] Query success: 0 rows

      at log (app/api/admin/content/route.ts:264:13)

    console.log
      🧩 [ContentAPI] Row Count Returned: 0

      at log (app/api/admin/content/route.ts:265:13)

    console.log
      [AdminContentAPI] Total count: 0

      at log (app/api/admin/content/route.ts:271:13)

    console.group
        🧩 [Diagnostics] Scheduled Query Result

      at group (app/api/admin/content/route.ts:274:13)

    console.log
        Requested status: scheduled

      at log (app/api/admin/content/route.ts:275:13)

    console.log
        Rows returned from DB: 0

      at log (app/api/admin/content/route.ts:276:13)

    console.log
        First row sample: undefined

      at log (app/api/admin/content/route.ts:277:13)

    console.log
        Scheduled content IDs: []

      at log (app/api/admin/content/route.ts:279:15)

    console.log
        Scheduled times: []

      at log (app/api/admin/content/route.ts:280:15)

    console.group
        🧩 [Diagnostics] Response Data

      at group (app/api/admin/content/route.ts:330:13)

    console.log
        Mapped content length: 0

      at log (app/api/admin/content/route.ts:331:13)

    console.log
        Response structure: { hasContent: true, contentLength: 0, filter: 'scheduled', total: 0 }

      at log (app/api/admin/content/route.ts:332:13)

    console.log
      [AdminContentAPI] Successfully returning 0 content items

      at log (app/api/admin/content/route.ts:343:13)

    console.log
      [AdminContentAPI] GET /api/admin/content request received

      at log (app/api/admin/content/route.ts:10:11)

    console.log
      [AdminContentAPI] Environment: test

      at log (app/api/admin/content/route.ts:11:11)

    console.log
      [AdminContentAPI] Database URL set: false

      at log (app/api/admin/content/route.ts:12:11)

    console.log
      [AdminContentAPI] Supabase URL set: false

      at log (app/api/admin/content/route.ts:13:11)

    console.log
      [AdminContentAPI] User verified: admin

      at log (app/api/admin/content/route.ts:54:11)

    console.log
      [AdminContentAPI] Query params - status: scheduled, page: 1, limit: 50, offset: 0

      at log (app/api/admin/content/route.ts:65:11)

    console.log
      [AdminContentAPI] Database health: { status: 'healthy' }

      at log (app/api/admin/content/route.ts:70:13)

    console.log
      [AdminContentAPI] Verifying database schema...

      at log (app/api/admin/content/route.ts:73:13)

    console.log
      [AdminContentAPI] Available columns in content_queue: 4

      at log (app/api/admin/content/route.ts:77:13)

    console.log
      [AdminContentAPI] Available columns in posted_content: 4

      at log (app/api/admin/content/route.ts:78:13)

    console.log
      [AdminContentAPI] Safe SELECT clause built with fallbacks for missing columns

      at log (app/api/admin/content/route.ts:125:15)

    console.log
      🧩 [ContentAPI] Scheduled filter - hasContentStatus: false hasScheduledPostTime: false hasStatus: true hasScheduledFor: false

      at log (app/api/admin/content/route.ts:231:17)

    console.log
      [AdminContentAPI] Filtering for scheduled content with WHERE: cq.status = 'scheduled'

      at log (app/api/admin/content/route.ts:235:15)

    console.log
      🧩 [ContentAPI] Final WHERE Clause: cq.status = 'scheduled'

      at log (app/api/admin/content/route.ts:254:15)

    console.log
      🧩 [ContentAPI] Detected Columns: 4 (has status)

      at log (app/api/admin/content/route.ts:255:15)

    console.log
      [AdminContentAPI] Executing content query for status: scheduled

      at log (app/api/admin/content/route.ts:260:13)

    console.log
      [AdminContentAPI] Query success: 0 rows

      at log (app/api/admin/content/route.ts:264:13)

    console.log
      🧩 [ContentAPI] Row Count Returned: 0

      at log (app/api/admin/content/route.ts:265:13)

    console.log
      [AdminContentAPI] Total count: 0

      at log (app/api/admin/content/route.ts:271:13)

    console.group
        🧩 [Diagnostics] Scheduled Query Result

      at group (app/api/admin/content/route.ts:274:13)

    console.log
        Requested status: scheduled

      at log (app/api/admin/content/route.ts:275:13)

    console.log
        Rows returned from DB: 0

      at log (app/api/admin/content/route.ts:276:13)

    console.log
        First row sample: undefined

      at log (app/api/admin/content/route.ts:277:13)

    console.log
        Scheduled content IDs: []

      at log (app/api/admin/content/route.ts:279:15)

    console.log
        Scheduled times: []

      at log (app/api/admin/content/route.ts:280:15)

    console.group
        🧩 [Diagnostics] Response Data

      at group (app/api/admin/content/route.ts:330:13)

    console.log
        Mapped content length: 0

      at log (app/api/admin/content/route.ts:331:13)

    console.log
        Response structure: { hasContent: true, contentLength: 0, filter: 'scheduled', total: 0 }

      at log (app/api/admin/content/route.ts:332:13)

    console.log
      [AdminContentAPI] Successfully returning 0 content items

      at log (app/api/admin/content/route.ts:343:13)

    console.log
      [AdminContentAPI] GET /api/admin/content request received

      at log (app/api/admin/content/route.ts:10:11)

    console.log
      [AdminContentAPI] Environment: development

      at log (app/api/admin/content/route.ts:11:11)

    console.log
      [AdminContentAPI] Database URL set: false

      at log (app/api/admin/content/route.ts:12:11)

    console.log
      [AdminContentAPI] Supabase URL set: false

      at log (app/api/admin/content/route.ts:13:11)

    console.log
      [AdminContentAPI] User verified: admin

      at log (app/api/admin/content/route.ts:54:11)

    console.log
      [AdminContentAPI] Query params - status: scheduled, page: 1, limit: 50, offset: 0

      at log (app/api/admin/content/route.ts:65:11)

    console.log
      [AdminContentAPI] Database health: { status: 'healthy' }

      at log (app/api/admin/content/route.ts:70:13)

    console.log
      [AdminContentAPI] Verifying database schema...

      at log (app/api/admin/content/route.ts:73:13)

    console.log
      [AdminContentAPI] Available columns in content_queue: 0

      at log (app/api/admin/content/route.ts:77:13)

    console.log
      [AdminContentAPI] Available columns in posted_content: 0

      at log (app/api/admin/content/route.ts:78:13)

    console.log
      [AdminContentAPI] Development mode: using direct column selection due to schema detection failure

      at log (app/api/admin/content/route.ts:115:15)

    console.log
      [AdminContentAPI] Development mode: bypassing schema detection for scheduled status

      at log (app/api/admin/content/route.ts:211:19)

    console.log
      🧩 [ContentAPI] ORDER BY scheduled_for ASC applied for scheduled filter (dev mode)

      at log (app/api/admin/content/route.ts:215:19)

    console.log
      🧩 [ContentAPI] Scheduled filter - hasContentStatus: false hasScheduledPostTime: false hasStatus: false hasScheduledFor: false

      at log (app/api/admin/content/route.ts:231:17)

    console.log
      [AdminContentAPI] Filtering for scheduled content with WHERE: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:235:15)

    console.log
      🧩 [ContentAPI] Final WHERE Clause: (cq.status = 'scheduled' OR (cq.scheduled_for IS NOT NULL AND cq.status = 'approved'))

      at log (app/api/admin/content/route.ts:254:15)

    console.log
      🧩 [ContentAPI] Detected Columns: 0

      at log (app/api/admin/content/route.ts:255:15)

    console.log
      [AdminContentAPI] Executing content query for status: scheduled

      at log (app/api/admin/content/route.ts:260:13)

    console.log
      [AdminContentAPI] Query success: 0 rows

      at log (app/api/admin/content/route.ts:264:13)

    console.log
      🧩 [ContentAPI] Row Count Returned: 0

      at log (app/api/admin/content/route.ts:265:13)

    console.log
      [AdminContentAPI] Total count: 0

      at log (app/api/admin/content/route.ts:271:13)

    console.group
        🧩 [Diagnostics] Scheduled Query Result

      at group (app/api/admin/content/route.ts:274:13)

    console.log
        Requested status: scheduled

      at log (app/api/admin/content/route.ts:275:13)

    console.log
        Rows returned from DB: 0

      at log (app/api/admin/content/route.ts:276:13)

    console.log
        First row sample: undefined

      at log (app/api/admin/content/route.ts:277:13)

    console.log
        Scheduled content IDs: []

      at log (app/api/admin/content/route.ts:279:15)

    console.log
        Scheduled times: []

      at log (app/api/admin/content/route.ts:280:15)

    console.group
        🧩 [Diagnostics] Response Data

      at group (app/api/admin/content/route.ts:330:13)

    console.log
        Mapped content length: 0

      at log (app/api/admin/content/route.ts:331:13)

    console.log
        Response structure: { hasContent: true, contentLength: 0, filter: 'scheduled', total: 0 }

      at log (app/api/admin/content/route.ts:332:13)

    console.log
      [AdminContentAPI] Successfully returning 0 content items

      at log (app/api/admin/content/route.ts:343:13)

  ● Admin Content API - Scheduled Filter › Scheduled Content Filter › should log diagnostic information correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "🧩 [ContentAPI] Scheduled filter - hasStatus:", Any<Boolean>, StringContaining "hasScheduledFor:", Any<Boolean>
    Received
           1: "[AdminContentAPI] GET /api/admin/content request received"
           2: "[AdminContentAPI] Environment:", "test"
           3: "[AdminContentAPI] Database URL set:", false

    Number of calls: 29

    [0m [90m 263 |[39m
     [90m 264 |[39m       [90m// Verify diagnostic logging occurred[39m
    [31m[1m>[22m[39m[90m 265 |[39m       expect(consoleLogSpy)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 266 |[39m         expect[33m.[39mstringContaining([32m'🧩 [ContentAPI] Scheduled filter - hasStatus:'[39m)[33m,[39m
     [90m 267 |[39m         expect[33m.[39many([33mBoolean[39m)[33m,[39m
     [90m 268 |[39m         expect[33m.[39mstringContaining([32m'hasScheduledFor:'[39m)[33m,[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/app/api/admin/content-scheduled.test.ts:265:29)

FAIL __tests__/lib/services/scheduling.test.ts
  ● SchedulingService › getScheduleConfig › should return existing config when available

    expect(received).toEqual(expected) // deep equality

    - Expected  - 9
    + Received  + 0

      Object {
    -   "created_at": 2024-01-15T10:30:00.000Z,
    -   "id": 1,
        "is_enabled": true,
    -   "meal_times": Array [
    -     "08:00",
    -     "12:00",
    -     "18:00",
    -   ],
    -   "timezone": "America/New_York",
    -   "updated_at": 2024-01-15T10:30:00.000Z,
      }

    [0m [90m 46 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetScheduleConfig()
     [90m 47 |[39m       
    [31m[1m>[22m[39m[90m 48 |[39m       expect(result)[33m.[39mtoEqual(mockConfig)
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 49 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 50 |[39m         [32m'SELECT * FROM schedule_config ORDER BY created_at DESC LIMIT 1'[39m
     [90m 51 |[39m       )[0m

      at Object.toEqual (__tests__/lib/services/scheduling.test.ts:48:22)

  ● SchedulingService › getScheduleConfig › should create default config when none exists

    expect(received).toEqual(expected) // deep equality

    - Expected  - 12
    + Received  +  0

      Object {
    -   "created_at": 2024-01-15T10:30:00.000Z,
    -   "id": 1,
        "is_enabled": true,
    -   "meal_times": Array [
    -     "08:00",
    -     "10:00",
    -     "12:00",
    -     "15:00",
    -     "18:00",
    -     "20:00",
    -   ],
    -   "timezone": "America/New_York",
    -   "updated_at": 2024-01-15T10:30:00.000Z,
      }

    [0m [90m 80 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetScheduleConfig()
     [90m 81 |[39m       
    [31m[1m>[22m[39m[90m 82 |[39m       expect(result)[33m.[39mtoEqual(mockDefaultConfig)
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 83 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)
     [90m 84 |[39m     })
     [90m 85 |[39m   })[0m

      at Object.toEqual (__tests__/lib/services/scheduling.test.ts:82:22)

  ● SchedulingService › updateScheduleConfig › should update existing config with new values

    TypeError: _scheduling.schedulingService.updateScheduleConfig is not a function

    [0m [90m 118 |[39m         })
     [90m 119 |[39m
    [31m[1m>[22m[39m[90m 120 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mupdateScheduleConfig({
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 121 |[39m         meal_times[33m:[39m [[32m'09:00'[39m[33m,[39m [32m'13:00'[39m[33m,[39m [32m'19:00'[39m][33m,[39m
     [90m 122 |[39m         timezone[33m:[39m [32m'America/Los_Angeles'[39m
     [90m 123 |[39m       })[0m

      at Object.updateScheduleConfig (__tests__/lib/services/scheduling.test.ts:120:46)

  ● SchedulingService › getNextScheduledTime › should return next meal time today if available

    TypeError: _scheduling.schedulingService.getNextScheduledTime is not a function

    [0m [90m 157 |[39m       jest[33m.[39msetSystemTime([36mnew[39m [33mDate[39m([32m'2024-01-15T15:30:00Z'[39m)) [90m// 10:30 AM EST[39m
     [90m 158 |[39m
    [31m[1m>[22m[39m[90m 159 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetNextScheduledTime()
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 160 |[39m       
     [90m 161 |[39m       expect(result)[33m.[39mtoBeDefined()
     [90m 162 |[39m       expect(result[33m?[39m[33m.[39mgetHours())[33m.[39mtoBe([35m12[39m) [90m// Next meal time is 12:00 PM[39m[0m

      at Object.getNextScheduledTime (__tests__/lib/services/scheduling.test.ts:159:46)

  ● SchedulingService › getNextScheduledTime › should return first meal time tomorrow if no more today

    TypeError: _scheduling.schedulingService.getNextScheduledTime is not a function

    [0m [90m 192 |[39m       jest[33m.[39msetSystemTime([36mnew[39m [33mDate[39m([32m'2024-01-15T01:00:00Z'[39m)) [90m// 8:00 PM EST[39m
     [90m 193 |[39m
    [31m[1m>[22m[39m[90m 194 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetNextScheduledTime()
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 195 |[39m       
     [90m 196 |[39m       expect(result)[33m.[39mtoBeDefined()
     [90m 197 |[39m       expect(result[33m?[39m[33m.[39mgetHours())[33m.[39mtoBe([35m8[39m) [90m// 8:00 AM tomorrow[39m[0m

      at Object.getNextScheduledTime (__tests__/lib/services/scheduling.test.ts:194:46)

  ● SchedulingService › isPostingTime › should return false when current time does not match meal time

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 257 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39misPostingTime()
     [90m 258 |[39m       
    [31m[1m>[22m[39m[90m 259 |[39m       expect(result)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 260 |[39m     })
     [90m 261 |[39m
     [90m 262 |[39m     it([32m'should return false when scheduling is disabled'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/lib/services/scheduling.test.ts:259:22)

  ● SchedulingService › isPostingTime › should return false when scheduling is disabled

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 280 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39misPostingTime()
     [90m 281 |[39m       
    [31m[1m>[22m[39m[90m 282 |[39m       expect(result)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 283 |[39m     })
     [90m 284 |[39m   })
     [90m 285 |[39m[0m

      at Object.toBe (__tests__/lib/services/scheduling.test.ts:282:22)

  ● SchedulingService › selectRandomContent › should return random approved content

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 1

      Object {
    -   "content_text": "Test hotdog content",
    -   "content_type": "text",
    +   "content_text": "test",
        "id": 1,
    -   "is_approved": true,
    -   "is_posted": false,
      }

    [0m [90m 304 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mselectRandomContent()
     [90m 305 |[39m       
    [31m[1m>[22m[39m[90m 306 |[39m       expect(result)[33m.[39mtoEqual(mockContent)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 307 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 308 |[39m         expect[33m.[39mstringContaining([32m'SELECT * FROM content_queue'[39m)[33m,[39m
     [90m 309 |[39m         expect[33m.[39many([33mArray[39m)[0m

      at Object.toEqual (__tests__/lib/services/scheduling.test.ts:306:22)

  ● SchedulingService › selectRandomContent › should return null when no approved content available

    expect(received).toBeNull()

    Received: {"content_text": "test", "id": 1}

    [0m [90m 322 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mselectRandomContent()
     [90m 323 |[39m       
    [31m[1m>[22m[39m[90m 324 |[39m       expect(result)[33m.[39mtoBeNull()
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 325 |[39m     })
     [90m 326 |[39m   })
     [90m 327 |[39m[0m

      at Object.toBeNull (__tests__/lib/services/scheduling.test.ts:324:22)

  ● SchedulingService › getPostingSchedule › should return complete posting schedule information

    TypeError: _scheduling.schedulingService.getPostingSchedule is not a function

    [0m [90m 355 |[39m       jest[33m.[39msetSystemTime([36mnew[39m [33mDate[39m([32m'2024-01-15T15:30:00Z'[39m)) [90m// 10:30 AM EST[39m
     [90m 356 |[39m
    [31m[1m>[22m[39m[90m 357 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetPostingSchedule()
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 358 |[39m       
     [90m 359 |[39m       expect(result)[33m.[39mtoHaveProperty([32m'nextPostTime'[39m)
     [90m 360 |[39m       expect(result)[33m.[39mtoHaveProperty([32m'nextMealTime'[39m)[0m

      at Object.getPostingSchedule (__tests__/lib/services/scheduling.test.ts:357:46)

  ● SchedulingService › pauseScheduling › should disable scheduling

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "UPDATE schedule_config", ArrayContaining [false]

    Number of calls: 0

    [0m [90m 397 |[39m       [36mawait[39m schedulingService[33m.[39mpauseScheduling()
     [90m 398 |[39m       
    [31m[1m>[22m[39m[90m 399 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 400 |[39m         expect[33m.[39mstringContaining([32m'UPDATE schedule_config'[39m)[33m,[39m
     [90m 401 |[39m         expect[33m.[39marrayContaining([[36mfalse[39m])
     [90m 402 |[39m       )[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/services/scheduling.test.ts:399:28)

  ● SchedulingService › resumeScheduling › should enable scheduling

    TypeError: _scheduling.schedulingService.resumeScheduling is not a function

    [0m [90m 433 |[39m         })
     [90m 434 |[39m
    [31m[1m>[22m[39m[90m 435 |[39m       [36mawait[39m schedulingService[33m.[39mresumeScheduling()
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 436 |[39m       
     [90m 437 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 438 |[39m         expect[33m.[39mstringContaining([32m'UPDATE schedule_config'[39m)[33m,[39m[0m

      at Object.resumeScheduling (__tests__/lib/services/scheduling.test.ts:435:31)

  ● SchedulingService › error handling › should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"is_enabled": true}

    [0m [90m 446 |[39m       mockDb[33m.[39mquery[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))
     [90m 447 |[39m
    [31m[1m>[22m[39m[90m 448 |[39m       [36mawait[39m expect(schedulingService[33m.[39mgetScheduleConfig())[33m.[39mrejects[33m.[39mtoThrow([32m'Database connection failed'[39m)
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 449 |[39m     })
     [90m 450 |[39m
     [90m 451 |[39m     it([32m'should return null on error in getNextScheduledTime'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/services/scheduling.test.ts:448:13)

  ● SchedulingService › error handling › should return null on error in getNextScheduledTime

    TypeError: _scheduling.schedulingService.getNextScheduledTime is not a function

    [0m [90m 452 |[39m       mockDb[33m.[39mquery[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))
     [90m 453 |[39m
    [31m[1m>[22m[39m[90m 454 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetNextScheduledTime()
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 455 |[39m       
     [90m 456 |[39m       expect(result)[33m.[39mtoBeNull()
     [90m 457 |[39m     })[0m

      at Object.getNextScheduledTime (__tests__/lib/services/scheduling.test.ts:454:46)

  ● SchedulingService › error handling › should return false on error in isPostingTime

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 462 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39misPostingTime()
     [90m 463 |[39m       
    [31m[1m>[22m[39m[90m 464 |[39m       expect(result)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 465 |[39m     })
     [90m 466 |[39m   })
     [90m 467 |[39m })[0m

      at Object.toBe (__tests__/lib/services/scheduling.test.ts:464:22)

PASS __tests__/lib/services/content.test.ts
PASS __tests__/app/api/admin/imgur/scan/route.test.ts
FAIL __tests__/lib/services/queue-monitor.test.ts
  ● QueueMonitorService › checkQueueHealth › should create alert for high pending count

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 189 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m queueMonitorService[33m.[39mcheckQueueHealth()
     [90m 190 |[39m
    [31m[1m>[22m[39m[90m 191 |[39m       expect(result[33m.[39mhealthy)[33m.[39mtoBe([36mtrue[39m) [90m// Still healthy despite high pending[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 192 |[39m       expect(result[33m.[39malerts)[33m.[39mtoHaveLength([35m1[39m)
     [90m 193 |[39m       expect(result[33m.[39malerts[[35m0[39m][33m.[39malert_type)[33m.[39mtoBe([32m'high_pending'[39m)
     [90m 194 |[39m     })[0m

      at Object.toBe (__tests__/lib/services/queue-monitor.test.ts:191:30)

  ● QueueMonitorService › getActiveAlerts › should return active alerts

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "WHERE acknowledged = false", Any<Array>
    Received: "SELECT * FROM queue_alerts 
             WHERE acknowledged = false 
             ORDER BY created_at DESC 
             LIMIT 50"

    Number of calls: 1

    [0m [90m 285 |[39m
     [90m 286 |[39m       expect(result)[33m.[39mtoEqual(mockAlerts)
    [31m[1m>[22m[39m[90m 287 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 288 |[39m         expect[33m.[39mstringContaining([32m'WHERE acknowledged = false'[39m)[33m,[39m
     [90m 289 |[39m         expect[33m.[39many([33mArray[39m)
     [90m 290 |[39m       )[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/services/queue-monitor.test.ts:287:28)

  ● QueueMonitorService › acknowledgeAllAlerts › should acknowledge all alerts

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "UPDATE queue_alerts", Any<Array>
    Received: "UPDATE queue_alerts 
             SET acknowledged = true, acknowledged_at = NOW() 
             WHERE acknowledged = false"

    Number of calls: 1

    [0m [90m 337 |[39m       [36mawait[39m queueMonitorService[33m.[39macknowledgeAllAlerts()
     [90m 338 |[39m
    [31m[1m>[22m[39m[90m 339 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 340 |[39m         expect[33m.[39mstringContaining([32m'UPDATE queue_alerts'[39m)[33m,[39m
     [90m 341 |[39m         expect[33m.[39many([33mArray[39m)
     [90m 342 |[39m       )[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/services/queue-monitor.test.ts:339:28)

  ● QueueMonitorService › error handling › should handle errors in alert creation

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"alerts": [], "healthy": false, "queueStatus": null}

    [0m [90m 437 |[39m       mockDb[33m.[39mquery[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))
     [90m 438 |[39m
    [31m[1m>[22m[39m[90m 439 |[39m       [36mawait[39m expect(queueMonitorService[33m.[39mcheckQueueHealth())[33m.[39mrejects[33m.[39mtoThrow([32m'Database error'[39m)
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 440 |[39m     })
     [90m 441 |[39m   })
     [90m 442 |[39m })[0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/services/queue-monitor.test.ts:439:13)

FAIL __tests__/lib/services/posting.test.ts
  ● PostingService › postContent › should successfully post approved content

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 68 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m postingService[33m.[39mpostContent([35m1[39m[33m,[39m [36mfalse[39m)
     [90m 69 |[39m
    [31m[1m>[22m[39m[90m 70 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 71 |[39m       expect(result[33m.[39mcontentId)[33m.[39mtoBe([35m1[39m)
     [90m 72 |[39m       expect(mockClient[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith([32m'BEGIN'[39m)
     [90m 73 |[39m       expect(mockClient[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith([32m'COMMIT'[39m)[0m

      at Object.toBe (__tests__/lib/services/posting.test.ts:70:30)

  ● PostingService › getQueueStatus › should detect low queue status

    expect(received).toBe(expected) // Object.is equality

    Expected: "critical"
    Received: "low"

    [0m [90m 145 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m postingService[33m.[39mgetQueueStatus()
     [90m 146 |[39m
    [31m[1m>[22m[39m[90m 147 |[39m       expect(result[33m.[39malertLevel)[33m.[39mtoBe([32m'critical'[39m)
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 148 |[39m       expect(result[33m.[39misHealthy)[33m.[39mtoBe([36mfalse[39m)
     [90m 149 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Critical: Only 3 approved items remaining'[39m)
     [90m 150 |[39m     })[0m

      at Object.toBe (__tests__/lib/services/posting.test.ts:147:33)

  ● PostingService › processScheduledPost › should process scheduled post successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 340 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m postingService[33m.[39mprocessScheduledPost()
     [90m 341 |[39m
    [31m[1m>[22m[39m[90m 342 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 343 |[39m       expect(result[33m.[39mcontentId)[33m.[39mtoBe([35m1[39m)
     [90m 344 |[39m     })
     [90m 345 |[39m[0m

      at Object.toBe (__tests__/lib/services/posting.test.ts:342:30)

PASS __tests__/lib/services/metrics.test.ts
PASS __tests__/lib/services/logging.test.ts
FAIL tests/integration/auto-scan-manager.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/integration/auto-scan-manager.test.ts'

    [0m [90m 3 |[39m [36mimport[39m { queueManager } [36mfrom[39m [32m'@/lib/services/queue-manager'[39m
     [90m 4 |[39m [36mimport[39m { db } [36mfrom[39m [32m'@/lib/db'[39m
    [31m[1m>[22m[39m[90m 5 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 6 |[39m [90m// Mock external dependencies[39m
     [90m 7 |[39m vi[33m.[39mmock([32m'@/lib/services/logging'[39m[33m,[39m () [33m=>[39m ({
     [90m 8 |[39m   loggingService[33m:[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/integration/auto-scan-manager.test.ts:5:17)

PASS __tests__/openapi/spec-validation.test.ts
PASS __tests__/lib/validation/content.test.ts
PASS __tests__/app/api/admin/giphy/status/route.test.ts
FAIL __tests__/regression/component-regression-simple.test.tsx
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1057:18)
      at node_modules/@jest/core/build/index.js:1127:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

PASS __tests__/lib/db-helpers.test.ts
PASS __tests__/app/api/admin/scheduling-persistence.test.ts
  ● Console

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 6

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🕒 Recently used platforms:

      at log (lib/services/schedule-content.ts:286:13)

    console.log
      🎯 Implementing weighted platform balancing for 6 posts across 6 platforms

      at log (lib/services/schedule-content.ts:103:11)

    console.log
      📊 Target per platform: 1, Total available: 6

      at log (lib/services/schedule-content.ts:111:11)

    console.log
      ✅ Selected from reddit: "Test hotdog content 1..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from instagram: "Test hotdog content 2..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from youtube: "Test hotdog content 3..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from twitter: "Test hotdog content 4..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from giphy: "Test hotdog content 5..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from tumblr: "Test hotdog content 6..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      🎯 Final platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:168:11)

    console.log
      ✅ Scheduled 6 posts for 2025-10-17

      at log (lib/services/schedule-content.ts:317:17)

    console.log
      🎉 Scheduling completed:

      at log (lib/services/schedule-content.ts:329:13)

    console.log
         📈 Total scheduled: 6

      at log (lib/services/schedule-content.ts:330:13)

    console.log
         📅 Days scheduled: 1

      at log (lib/services/schedule-content.ts:331:13)

    console.log
         🎯 Platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:332:13)

    console.log
      
      🧮 Diversity Analysis:

      at log (lib/services/schedule-content.ts:335:13)

    console.log
      ┌───────────┬────────┐
      │ (index)   │ Values │
      ├───────────┼────────┤
      │ reddit    │ 1      │
      │ instagram │ 1      │
      │ youtube   │ 1      │
      │ twitter   │ 1      │
      │ giphy     │ 1      │
      │ tumblr    │ 1      │
      └───────────┴────────┘

      at table (lib/services/schedule-content.ts:342:13)

    console.log
         📊 Platform variance: 0 (max: 1, min: 1)

      at log (lib/services/schedule-content.ts:343:13)

    console.log
         🎯 Diversity score: EXCELLENT

      at log (lib/services/schedule-content.ts:344:13)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 6

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🕒 Recently used platforms:

      at log (lib/services/schedule-content.ts:286:13)

    console.log
      🎯 Implementing weighted platform balancing for 6 posts across 6 platforms

      at log (lib/services/schedule-content.ts:103:11)

    console.log
      📊 Target per platform: 1, Total available: 6

      at log (lib/services/schedule-content.ts:111:11)

    console.log
      ✅ Selected from reddit: "Test hotdog content 1..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from instagram: "Test hotdog content 2..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from youtube: "Test hotdog content 3..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from twitter: "Test hotdog content 4..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from giphy: "Test hotdog content 5..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from tumblr: "Test hotdog content 6..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      🎯 Final platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:168:11)

    console.log
      ✅ Scheduled 6 posts for 2025-10-17

      at log (lib/services/schedule-content.ts:317:17)

    console.log
      🎉 Scheduling completed:

      at log (lib/services/schedule-content.ts:329:13)

    console.log
         📈 Total scheduled: 6

      at log (lib/services/schedule-content.ts:330:13)

    console.log
         📅 Days scheduled: 1

      at log (lib/services/schedule-content.ts:331:13)

    console.log
         🎯 Platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:332:13)

    console.log
      
      🧮 Diversity Analysis:

      at log (lib/services/schedule-content.ts:335:13)

    console.log
      ┌───────────┬────────┐
      │ (index)   │ Values │
      ├───────────┼────────┤
      │ reddit    │ 1      │
      │ instagram │ 1      │
      │ youtube   │ 1      │
      │ twitter   │ 1      │
      │ giphy     │ 1      │
      │ tumblr    │ 1      │
      └───────────┴────────┘

      at table (lib/services/schedule-content.ts:342:13)

    console.log
         📊 Platform variance: 0 (max: 1, min: 1)

      at log (lib/services/schedule-content.ts:343:13)

    console.log
         🎯 Diversity score: EXCELLENT

      at log (lib/services/schedule-content.ts:344:13)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 6

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🕒 Recently used platforms:

      at log (lib/services/schedule-content.ts:286:13)

    console.log
      🎯 Implementing weighted platform balancing for 6 posts across 6 platforms

      at log (lib/services/schedule-content.ts:103:11)

    console.log
      📊 Target per platform: 1, Total available: 6

      at log (lib/services/schedule-content.ts:111:11)

    console.log
      ✅ Selected from reddit: "Test hotdog content 1..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from instagram: "Test hotdog content 2..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from youtube: "Test hotdog content 3..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from twitter: "Test hotdog content 4..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from giphy: "Test hotdog content 5..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from tumblr: "Test hotdog content 6..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      🎯 Final platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:168:11)

    console.log
      ✅ Scheduled 6 posts for 2025-10-17

      at log (lib/services/schedule-content.ts:317:17)

    console.log
      🎉 Scheduling completed:

      at log (lib/services/schedule-content.ts:329:13)

    console.log
         📈 Total scheduled: 6

      at log (lib/services/schedule-content.ts:330:13)

    console.log
         📅 Days scheduled: 1

      at log (lib/services/schedule-content.ts:331:13)

    console.log
         🎯 Platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:332:13)

    console.log
      
      🧮 Diversity Analysis:

      at log (lib/services/schedule-content.ts:335:13)

    console.log
      ┌───────────┬────────┐
      │ (index)   │ Values │
      ├───────────┼────────┤
      │ reddit    │ 1      │
      │ instagram │ 1      │
      │ youtube   │ 1      │
      │ twitter   │ 1      │
      │ giphy     │ 1      │
      │ tumblr    │ 1      │
      └───────────┴────────┘

      at table (lib/services/schedule-content.ts:342:13)

    console.log
         📊 Platform variance: 0 (max: 1, min: 1)

      at log (lib/services/schedule-content.ts:343:13)

    console.log
         🎯 Diversity score: EXCELLENT

      at log (lib/services/schedule-content.ts:344:13)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 6

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🕒 Recently used platforms:

      at log (lib/services/schedule-content.ts:286:13)

    console.log
      🎯 Implementing weighted platform balancing for 6 posts across 6 platforms

      at log (lib/services/schedule-content.ts:103:11)

    console.log
      📊 Target per platform: 1, Total available: 6

      at log (lib/services/schedule-content.ts:111:11)

    console.log
      ✅ Selected from reddit: "Test hotdog content 1..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from instagram: "Test hotdog content 2..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from youtube: "Test hotdog content 3..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from twitter: "Test hotdog content 4..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from giphy: "Test hotdog content 5..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from tumblr: "Test hotdog content 6..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      🎯 Final platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:168:11)

    console.log
      ✅ Scheduled 6 posts for 2025-10-17

      at log (lib/services/schedule-content.ts:317:17)

    console.log
      🎉 Scheduling completed:

      at log (lib/services/schedule-content.ts:329:13)

    console.log
         📈 Total scheduled: 6

      at log (lib/services/schedule-content.ts:330:13)

    console.log
         📅 Days scheduled: 1

      at log (lib/services/schedule-content.ts:331:13)

    console.log
         🎯 Platform distribution: {
        reddit: 1,
        instagram: 1,
        youtube: 1,
        twitter: 1,
        giphy: 1,
        tumblr: 1
      }

      at log (lib/services/schedule-content.ts:332:13)

    console.log
      
      🧮 Diversity Analysis:

      at log (lib/services/schedule-content.ts:335:13)

    console.log
      ┌───────────┬────────┐
      │ (index)   │ Values │
      ├───────────┼────────┤
      │ reddit    │ 1      │
      │ instagram │ 1      │
      │ youtube   │ 1      │
      │ twitter   │ 1      │
      │ giphy     │ 1      │
      │ tumblr    │ 1      │
      └───────────┴────────┘

      at table (lib/services/schedule-content.ts:342:13)

    console.log
         📊 Platform variance: 0 (max: 1, min: 1)

      at log (lib/services/schedule-content.ts:343:13)

    console.log
         🎯 Diversity score: EXCELLENT

      at log (lib/services/schedule-content.ts:344:13)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 3

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: { reddit: 1, instagram: 1, youtube: 1 }

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🕒 Recently used platforms:

      at log (lib/services/schedule-content.ts:286:13)

    console.log
      🎯 Implementing weighted platform balancing for 6 posts across 3 platforms

      at log (lib/services/schedule-content.ts:103:11)

    console.log
      📊 Target per platform: 2, Total available: 3

      at log (lib/services/schedule-content.ts:111:11)

    console.log
      ✅ Selected from reddit: "Test hotdog content 1..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from instagram: "Test hotdog content 2..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from youtube: "Test hotdog content 3..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      🎯 Final platform distribution: { reddit: 1, instagram: 1, youtube: 1 }

      at log (lib/services/schedule-content.ts:168:11)

    console.log
      ✅ Scheduled 3 posts for 2025-10-17

      at log (lib/services/schedule-content.ts:317:17)

    console.log
      🎉 Scheduling completed:

      at log (lib/services/schedule-content.ts:329:13)

    console.log
         📈 Total scheduled: 3

      at log (lib/services/schedule-content.ts:330:13)

    console.log
         📅 Days scheduled: 1

      at log (lib/services/schedule-content.ts:331:13)

    console.log
         🎯 Platform distribution: { reddit: 1, instagram: 1, youtube: 1 }

      at log (lib/services/schedule-content.ts:332:13)

    console.log
      
      🧮 Diversity Analysis:

      at log (lib/services/schedule-content.ts:335:13)

    console.log
      ┌───────────┬────────┐
      │ (index)   │ Values │
      ├───────────┼────────┤
      │ reddit    │ 1      │
      │ instagram │ 1      │
      │ youtube   │ 1      │
      └───────────┴────────┘

      at table (lib/services/schedule-content.ts:342:13)

    console.log
         📊 Platform variance: 0 (max: 1, min: 1)

      at log (lib/services/schedule-content.ts:343:13)

    console.log
         🎯 Diversity score: EXCELLENT

      at log (lib/services/schedule-content.ts:344:13)

    console.log
      
      ⚠️ Warnings/Errors:

      at log (lib/services/schedule-content.ts:351:15)

    console.log
         - Only 3 content items available for 2025-10-17 (target: 6)

      at log (lib/services/schedule-content.ts:352:46)
          at Array.forEach (<anonymous>)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 1

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: { test: 1 }

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🕒 Recently used platforms:

      at log (lib/services/schedule-content.ts:286:13)

    console.log
      🎯 Implementing weighted platform balancing for 6 posts across 1 platforms

      at log (lib/services/schedule-content.ts:103:11)

    console.log
      📊 Target per platform: 6, Total available: 1

      at log (lib/services/schedule-content.ts:111:11)

    console.log
      ✅ Selected from test: "Persistence test content..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      🎯 Final platform distribution: { test: 1 }

      at log (lib/services/schedule-content.ts:168:11)

    console.log
      ✅ Scheduled 1 posts for 2025-10-17

      at log (lib/services/schedule-content.ts:317:17)

    console.log
      🎉 Scheduling completed:

      at log (lib/services/schedule-content.ts:329:13)

    console.log
         📈 Total scheduled: 1

      at log (lib/services/schedule-content.ts:330:13)

    console.log
         📅 Days scheduled: 1

      at log (lib/services/schedule-content.ts:331:13)

    console.log
         🎯 Platform distribution: { test: 1 }

      at log (lib/services/schedule-content.ts:332:13)

    console.log
      
      🧮 Diversity Analysis:

      at log (lib/services/schedule-content.ts:335:13)

    console.log
      ┌─────────┬────────┐
      │ (index) │ Values │
      ├─────────┼────────┤
      │ test    │ 1      │
      └─────────┴────────┘

      at table (lib/services/schedule-content.ts:342:13)

    console.log
         📊 Platform variance: 0 (max: 1, min: 1)

      at log (lib/services/schedule-content.ts:343:13)

    console.log
         🎯 Diversity score: EXCELLENT

      at log (lib/services/schedule-content.ts:344:13)

    console.log
      
      ⚠️ Warnings/Errors:

      at log (lib/services/schedule-content.ts:351:15)

    console.log
         - Only 1 content items available for 2025-10-17 (target: 6)

      at log (lib/services/schedule-content.ts:352:46)
          at Array.forEach (<anonymous>)

FAIL __tests__/app/api/admin/queue/schedule/route.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../../lib/services/schedule-content' from '__tests__/app/api/admin/queue/schedule/route.test.ts'

    [0m [90m  7 |[39m
     [90m  8 |[39m [90m// Mock the schedule service[39m
    [31m[1m>[22m[39m[90m  9 |[39m jest[33m.[39mmock([32m'../../../../../lib/services/schedule-content'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 10 |[39m   scheduleNextBatch[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 11 |[39m   getUpcomingSchedule[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 12 |[39m   cancelScheduledContent[33m:[39m jest[33m.[39mfn()[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (__tests__/app/api/admin/queue/schedule/route.test.ts:9:6)

PASS __tests__/app/api/content/route.test.ts
FAIL __tests__/app/api/admin/schedule.test.ts
  ● Console

    console.log
      Schedule configuration updated via API (mock): {
        id: 1,
        meal_times: [ '09:00', '13:00', '19:00' ],
        timezone: 'America/Los_Angeles',
        is_enabled: true,
        created_at: '2025-10-10T21:43:18.208Z',
        updated_at: '2025-10-17T21:43:18.208Z'
      }

      at log (app/api/admin/schedule/route.ts:442:13)

    console.log
      Schedule configuration updated via API (mock): {
        id: 1,
        meal_times: [ '08:00', '12:30', '18:45', '23:59' ],
        timezone: 'America/New_York',
        is_enabled: true,
        created_at: '2025-10-10T21:43:18.220Z',
        updated_at: '2025-10-17T21:43:18.220Z'
      }

      at log (app/api/admin/schedule/route.ts:442:13)

    console.log
      Schedule configuration updated via API (mock): {
        id: 1,
        meal_times: [ '08:00', '12:00', '15:00', '18:00', '21:00', '23:30' ],
        timezone: 'America/New_York',
        is_enabled: false,
        created_at: '2025-10-10T21:43:18.222Z',
        updated_at: '2025-10-17T21:43:18.222Z'
      }

      at log (app/api/admin/schedule/route.ts:442:13)

    console.log
      Schedule configuration updated via API (mock): {
        id: 1,
        meal_times: [ '08:00', '12:00', '15:00', '18:00', '21:00', '23:30' ],
        timezone: 'America/New_York',
        is_enabled: false,
        created_at: '2025-10-10T21:43:18.228Z',
        updated_at: '2025-10-17T21:43:18.228Z'
      }

      at log (app/api/admin/schedule/route.ts:442:13)

    console.log
      Schedule configuration updated via API (mock): {
        id: 1,
        meal_times: [ '1:30' ],
        timezone: 'America/New_York',
        is_enabled: true,
        created_at: '2025-10-10T21:43:18.234Z',
        updated_at: '2025-10-17T21:43:18.234Z'
      }

      at log (app/api/admin/schedule/route.ts:442:13)

  ● /api/admin/schedule › GET › should return complete schedule information

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 5

      Object {
    -   "created_at": 2025-09-17T15:45:32.314Z,
    +   "created_at": "2025-10-10T21:43:18.157Z",
        "id": 1,
        "is_enabled": true,
        "meal_times": Array [
          "08:00",
          "12:00",
    +     "15:00",
          "18:00",
    +     "21:00",
    +     "23:30",
        ],
        "timezone": "America/New_York",
    -   "updated_at": 2025-09-17T15:45:32.314Z,
    +   "updated_at": "2025-10-17T19:43:18.157Z",
      }

    [0m [90m 144 |[39m
     [90m 145 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 146 |[39m       expect(data[33m.[39mconfig)[33m.[39mtoEqual(mockConfig)
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 147 |[39m       expect(data[33m.[39mschedule)[33m.[39mtoEqual(mockSchedule)
     [90m 148 |[39m       expect(data[33m.[39mqueueStatus)[33m.[39mtoEqual(mockQueueStatus)
     [90m 149 |[39m       expect(data[33m.[39mstats)[33m.[39mtoEqual(mockStats)[0m

      at Object.toEqual (__tests__/app/api/admin/schedule.test.ts:146:27)

  ● /api/admin/schedule › GET › should handle service errors

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

    [0m [90m 160 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 161 |[39m
    [31m[1m>[22m[39m[90m 162 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 163 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Service error'[39m)
     [90m 164 |[39m     })
     [90m 165 |[39m   })[0m

      at Object.toBe (__tests__/app/api/admin/schedule.test.ts:162:31)

  ● /api/admin/schedule › PUT › should update schedule configuration successfully

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "created_at": 2025-10-17T21:43:18.208Z,
    +   "created_at": "2025-10-10T21:43:18.208Z",
        "id": 1,
        "is_enabled": true,
        "meal_times": Array [
          "09:00",
          "13:00",
          "19:00",
        ],
        "timezone": "America/Los_Angeles",
    -   "updated_at": 2025-10-17T21:43:18.208Z,
    +   "updated_at": "2025-10-17T21:43:18.208Z",
      }

    [0m [90m 197 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
     [90m 198 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
    [31m[1m>[22m[39m[90m 199 |[39m       expect(data[33m.[39mconfig)[33m.[39mtoEqual(updatedConfig)
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 200 |[39m       expect(schedulingService[33m.[39mupdateScheduleConfig)[33m.[39mtoHaveBeenCalledWith({
     [90m 201 |[39m         meal_times[33m:[39m [[32m'09:00'[39m[33m,[39m [32m'13:00'[39m[33m,[39m [32m'19:00'[39m][33m,[39m
     [90m 202 |[39m         timezone[33m:[39m [32m'America/Los_Angeles'[39m[33m,[39m[0m

      at Object.toEqual (__tests__/app/api/admin/schedule.test.ts:199:27)

  ● /api/admin/schedule › PUT › should handle partial updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"is_enabled": false}

    Number of calls: 0

    [0m [90m 298 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
     [90m 299 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
    [31m[1m>[22m[39m[90m 300 |[39m       expect(schedulingService[33m.[39mupdateScheduleConfig)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                                      [31m[1m^[22m[39m
     [90m 301 |[39m         is_enabled[33m:[39m [36mfalse[39m
     [90m 302 |[39m       })
     [90m 303 |[39m     })[0m

      at Object.toHaveBeenCalledWith (__tests__/app/api/admin/schedule.test.ts:300:54)

  ● /api/admin/schedule › PUT › should handle service errors

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

    [0m [90m 319 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 320 |[39m
    [31m[1m>[22m[39m[90m 321 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 322 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Service error'[39m)
     [90m 323 |[39m     })
     [90m 324 |[39m[0m

      at Object.toBe (__tests__/app/api/admin/schedule.test.ts:321:31)

  ● /api/admin/schedule › PUT › should reject invalid time formats

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 200

    [0m [90m 363 |[39m         [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 364 |[39m
    [31m[1m>[22m[39m[90m 365 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 366 |[39m         expect(data[33m.[39merror)[33m.[39mtoContain([32m'Invalid time format'[39m)
     [90m 367 |[39m       }
     [90m 368 |[39m     })[0m

      at Object.toBe (__tests__/app/api/admin/schedule.test.ts:365:33)

FAIL __tests__/scripts/route-inventory.test.ts
  ● Console

    console.log
      
      📄 API inventory written to: docs/api-inventory.json

      at log (scripts/route-inventory.ts:161:11)

    console.log
      
      📄 API inventory written to: docs/api-inventory.json

      at log (scripts/route-inventory.ts:161:11)

  ● Route Inventory Script › Route Detection › should detect HTTP methods in route files

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 38 |[39m       
     [90m 39 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 40 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeFileContent [36mas[39m any)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 41 |[39m       
     [90m 42 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 43 |[39m       [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:40:23)

  ● Route Inventory Script › Route Detection › should detect authentication requirements

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 58 |[39m       
     [90m 59 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/admin/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 60 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(authRouteContent)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 61 |[39m       
     [90m 62 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 63 |[39m       [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:60:23)

  ● Route Inventory Script › Route Detection › should identify public routes correctly

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 74 |[39m       
     [90m 75 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/health/route.ts'[39m])
    [31m[1m>[22m[39m[90m 76 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(publicRouteContent)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 77 |[39m       
     [90m 78 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 79 |[39m       [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:76:23)

  ● Route Inventory Script › Route Detection › should convert file paths to API paths correctly

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 93 |[39m       [36mfor[39m ([36mconst[39m [filePath[33m,[39m expectedPath] [36mof[39m testCases) {
     [90m 94 |[39m         mockGlob[33m.[39mmockResolvedValue([filePath])
    [31m[1m>[22m[39m[90m 95 |[39m         mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue([32m'export function GET() {}'[39m)
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 96 |[39m         
     [90m 97 |[39m         [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 98 |[39m         [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:95:25)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: EdgeAuthUtils.verifyJWT

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: Authorization: Bearer

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: x-admin-token

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: authHeader

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: AUTH_TOKEN

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: authenticate()

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: requiresAuth: true

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: checkAuth()

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: validateToken()

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: getAuthenticatedUser()

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should automatically mark admin routes as requiring auth

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 140 |[39m       
     [90m 141 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/admin/users/route.ts'[39m])
    [31m[1m>[22m[39m[90m 142 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 143 |[39m       
     [90m 144 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 145 |[39m       [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:142:23)

  ● Route Inventory Script › Inventory Generation › should generate complete inventory with metadata

    TypeError: mockFs.readFile.mockImplementation is not a function

    [0m [90m 164 |[39m       
     [90m 165 |[39m       mockGlob[33m.[39mmockResolvedValue(routeFiles)
    [31m[1m>[22m[39m[90m 166 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockImplementation([36masync[39m (path[33m:[39m string) [33m=>[39m {
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 167 |[39m         [36mconst[39m index [33m=[39m routeFiles[33m.[39mfindIndex(file [33m=>[39m path[33m.[39mincludes(file))
     [90m 168 |[39m         [36mreturn[39m routeContents[index] [33m||[39m [32m''[39m
     [90m 169 |[39m       })[0m

      at Object.mockImplementation (__tests__/scripts/route-inventory.test.ts:166:23)

  ● Route Inventory Script › Inventory Generation › should handle empty or invalid route files

    TypeError: mockFs.readFile.mockResolvedValueOnce is not a function

    [0m [90m 186 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/empty/route.ts'[39m[33m,[39m [32m'app/api/invalid/route.ts'[39m])
     [90m 187 |[39m       mockFs[33m.[39mreadFile
    [31m[1m>[22m[39m[90m 188 |[39m         [33m.[39mmockResolvedValueOnce([32m''[39m) [90m// empty file[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 189 |[39m         [33m.[39mmockResolvedValueOnce([32m'const x = 1; // no exports'[39m) [90m// no HTTP methods[39m
     [90m 190 |[39m       
     [90m 191 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()[0m

      at Object.mockResolvedValueOnce (__tests__/scripts/route-inventory.test.ts:188:10)

  ● Route Inventory Script › Inventory Generation › should handle file read errors gracefully

    TypeError: mockFs.readFile.mockRejectedValue is not a function

    [0m [90m 197 |[39m     it([32m'should handle file read errors gracefully'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 198 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 199 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'File not found'[39m))
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 200 |[39m       
     [90m 201 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 202 |[39m       [0m

      at Object.mockRejectedValue (__tests__/scripts/route-inventory.test.ts:199:23)

  ● Route Inventory Script › Inventory Output › should write inventory to correct location

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function mkdir]

    [0m [90m 226 |[39m       [36mawait[39m writeInventory(mockInventory)
     [90m 227 |[39m       
    [31m[1m>[22m[39m[90m 228 |[39m       expect(mockFs[33m.[39mmkdir)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 229 |[39m         expect[33m.[39mstringContaining([32m'docs'[39m)[33m,[39m
     [90m 230 |[39m         { recursive[33m:[39m [36mtrue[39m }
     [90m 231 |[39m       )[0m

      at Object.toHaveBeenCalledWith (__tests__/scripts/route-inventory.test.ts:228:28)

  ● Route Inventory Script › Inventory Output › should produce valid JSON output

    TypeError: Cannot read properties of undefined (reading 'calls')

    [0m [90m 267 |[39m       [36mawait[39m writeInventory(mockInventory)
     [90m 268 |[39m       
    [31m[1m>[22m[39m[90m 269 |[39m       [36mconst[39m writtenContent [33m=[39m mockFs[33m.[39mwriteFile[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m1[39m] [36mas[39m string
     [90m     |[39m                                                    [31m[1m^[22m[39m
     [90m 270 |[39m       expect(() [33m=>[39m [33mJSON[39m[33m.[39mparse(writtenContent))[33m.[39mnot[33m.[39mtoThrow()
     [90m 271 |[39m       
     [90m 272 |[39m       [36mconst[39m parsed [33m=[39m [33mJSON[39m[33m.[39mparse(writtenContent)[0m

      at Object.calls (__tests__/scripts/route-inventory.test.ts:269:52)

  ● Route Inventory Script › Route Classification › should correctly classify different route types

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 309 |[39m       [36mfor[39m ([36mconst[39m testRoute [36mof[39m testRoutes) {
     [90m 310 |[39m         mockGlob[33m.[39mmockResolvedValue([testRoute[33m.[39mpath])
    [31m[1m>[22m[39m[90m 311 |[39m         mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(testRoute[33m.[39mcontent)
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 312 |[39m         
     [90m 313 |[39m         [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 314 |[39m         [36mconst[39m route [33m=[39m inventory[33m.[39mroutes[[35m0[39m][0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:311:25)

FAIL __tests__/integration/openapi-drift.test.ts
  ● Console

    console.log
      🔍 Scanning API routes...

      at log (scripts/route-inventory.ts:136:11)

    console.log
      Found 214 route files

      at log (scripts/route-inventory.ts:98:11)

    console.log
      📍 /youtube-proxy [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /video-errors [POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /test-youtube-autoplay [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /test-working-queue [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /test-supabase [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /test-insert-content [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /test-db-ssl [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /test-db [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /test-content-processor [POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /supabase-scan [POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /simple-health [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /setup-admin [POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /setup [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /seed-demo-content [POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /rejected-analysis [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /quick-fix [POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /public-health [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /posts [GET, PATCH] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /platform-dashboard [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /ping [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /init-db [GET, POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /full-diagnostic [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /feed [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /example-usage [GET] 🔒

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /env-check [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /debug-env [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /debug-cookies [GET, POST] 🔒

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /client-error [POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /check-db [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /check-all-platforms [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /temp-content/scan [POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /temp-content/get [GET, POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /system/metrics [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /proxy/pixabay-image [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /proxy/bluesky-image [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /posts/[slug] [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /debug/tables [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /debug/reddit-scan [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /debug/database [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /debug/content-pipeline [GET] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /cron/scan-content [GET, POST] 🔒

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /cron/post-scheduled [GET, POST] 🔒

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /cron/daily [GET] 🔒

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /cron/automated-post [GET, POST] 🔒

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /cron/post-content [GET, POST] 🔒

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /content/[id] [GET, PUT, PATCH, DELETE] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /auth/refresh [GET, POST] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/youtube-quota [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/video-errors [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/test-youtube-api [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/test-schema [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/test-pixabay-insert [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/test-login [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/test-duplicate-prevention [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/system-verification [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/simple-login [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/scan-youtube-now [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule [GET, POST, PUT] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/scan-tumblr-now [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/scan-reddit-now [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/scan-pixabay-now [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/scan-mastodon-now [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/scan-lemmy-now [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/scan-imgur-now [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/scan-bluesky-now [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/review-queue [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/refresh [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/queue-health [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/production-platform-analysis [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/platform-diversity [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/platform-balance-report [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/platform-audit [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/migrate-db [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/metrics [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/me [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/logout [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/initial-scan [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/fix-duplicate-content [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/fix-content-balance [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/fix-chicago-duplicate [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/filters [GET, PUT, DELETE] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/emergency-scan [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/emergency-rebalance [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/debug-scan [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/debug-hashes [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/debug-duplicates [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/debug-db [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/debug [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/db-health [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/dashboard [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/cron-status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/create-tables [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content [GET, POST, PUT] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/cleanup-duplicates [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/automation-status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/automation-health [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/auto-scan [GET, POST, OPTIONS] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/auto-approve [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/auth [GET, POST, DELETE] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/analyze-duplicates [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/analytics [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /content/[id]/post [PUT] 🌐

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/youtube/test [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/youtube/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/youtube/scans [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/youtube/scan [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/youtube/debug [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/youtube/config [GET, PUT] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/unsplash/test [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/unsplash/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/unsplash/scans [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/unsplash/search [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/unsplash/scan [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/unsplash/config [GET, PUT] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/sync/posted-flags [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/social/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/social/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/social/settings [GET, PUT] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/social/scan-all [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/social/scan [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/social/performance [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/social/distribution [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schema/verify [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule/trigger [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule/projected [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule/pause [PUT] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule/next [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule/forecast [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule/daily [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/reddit/test-connection [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/reddit/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/reddit/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/reddit/setup-tables [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/reddit/settings [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/reddit/scan-history [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/queue/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/queue/schedule [GET, POST, PUT] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/queue/recommendations [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/queue/health [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/queue/alerts [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/posting/test [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/posting/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/posting/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/posting/post-now [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/posting/manual [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/posting/execute [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/post/trigger [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/platforms/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/platforms/scan [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/pixabay/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/pixabay/scan [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/monitor/duplicates [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/metrics/summary [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/metrics/diversity [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/imgur/test-connection [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/imgur/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/imgur/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/imgur/scan [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/giphy/test [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/giphy/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/giphy/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/giphy/scan [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/health/deep [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/health/auth-token [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/filters/test [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/filtering/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/docs/openapi [GET, OPTIONS] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/debug/scheduled [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/debug/database [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/dashboard/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/dashboard/activity [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/simple-queue [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/queue [GET, PATCH] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/process [GET, POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/posted [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/metrics [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/history [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/export [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/bulk-schedule [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/bulk-review [PUT] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/bulk [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/[id] [GET, PUT, PATCH, DELETE] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/bluesky/test [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/bluesky/status [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/bluesky/stats [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/bluesky/scan [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/auth/refresh [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/auth/me [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/alerts/history [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule/forecast/refill [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule/forecast/reconcile [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/schedule/forecast/health [GET] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/[id]/post [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

    console.log
      📍 /admin/content/posted/[id]/hide [POST] 🔒 👑

      at log (scripts/route-inventory.ts:129:13)

  ● OpenAPI Drift Detection Integration › Critical Routes Coverage › should have all critical routes in codebase

    expect(received).toContain(expected) // indexOf

    Expected value: "/api/admin/schedule/forecast"
    Received array: ["/admin/alerts/history", "/admin/analytics", "/admin/analyze-duplicates", "/admin/auth", "/admin/auth/me", "/admin/auth/refresh", "/admin/auto-approve", "/admin/auto-scan", "/admin/automation-health", "/admin/automation-status", …]

    [0m [90m 78 |[39m       criticalRoutes[33m.[39mforEach(criticalRoute [33m=>[39m {
     [90m 79 |[39m         [36mconst[39m apiPath [33m=[39m [32m`/api${criticalRoute}`[39m
    [31m[1m>[22m[39m[90m 80 |[39m         expect(actualPaths)[33m.[39mtoContain(apiPath)
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 81 |[39m       })
     [90m 82 |[39m     })
     [90m 83 |[39m   })[0m

      at toContain (__tests__/integration/openapi-drift.test.ts:80:29)
          at Array.forEach (<anonymous>)
      at Object.forEach (__tests__/integration/openapi-drift.test.ts:78:22)

  ● OpenAPI Drift Detection Integration › Route Documentation Drift › should not have undocumented routes (excluding ignored)

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 195
    Received array:  ["/admin/alerts/history", "/admin/analytics", "/admin/analyze-duplicates", "/admin/auth", "/admin/auth/me", "/admin/auth/refresh", "/admin/auto-approve", "/admin/auto-scan", "/admin/automation-health", "/admin/automation-status", …]

    [0m [90m 117 |[39m       [36mif[39m (undocumentedRoutes[33m.[39mlength [33m>[39m [35m0[39m) {
     [90m 118 |[39m         console[33m.[39merror([32m'Undocumented routes found:'[39m[33m,[39m undocumentedRoutes)
    [31m[1m>[22m[39m[90m 119 |[39m         expect(undocumentedRoutes)[33m.[39mtoHaveLength([35m0[39m)
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 120 |[39m       }
     [90m 121 |[39m     })
     [90m 122 |[39m[0m

      at Object.toHaveLength (__tests__/integration/openapi-drift.test.ts:119:36)

  ● OpenAPI Drift Detection Integration › Route Documentation Drift › should not have documented routes that do not exist in codebase

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 6
    Received array:  ["/api/admin/schedule/forecast", "/api/admin/schedule/forecast/refill", "/api/admin/schedule/forecast/reconcile", "/api/admin/health/deep", "/api/admin/health/auth-token", "/api/system/metrics"]

    [0m [90m 136 |[39m       [36mif[39m (nonExistentRoutes[33m.[39mlength [33m>[39m [35m0[39m) {
     [90m 137 |[39m         console[33m.[39merror([32m'Documented routes not found in codebase:'[39m[33m,[39m nonExistentRoutes)
    [31m[1m>[22m[39m[90m 138 |[39m         expect(nonExistentRoutes)[33m.[39mtoHaveLength([35m0[39m)
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 139 |[39m       }
     [90m 140 |[39m     })
     [90m 141 |[39m   })[0m

      at Object.toHaveLength (__tests__/integration/openapi-drift.test.ts:138:35)

  ● OpenAPI Drift Detection Integration › Method Coverage › should document all HTTP methods present in code

    expect(received).toContain(expected) // indexOf

    Expected value: "POST"
    Received array: ["GET"]

    [0m [90m 205 |[39m           
     [90m 206 |[39m           route[33m.[39mmethods[33m.[39mforEach((method[33m:[39m string) [33m=>[39m {
    [31m[1m>[22m[39m[90m 207 |[39m             expect(specMethods)[33m.[39mtoContain(method)
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 208 |[39m           })
     [90m 209 |[39m         }
     [90m 210 |[39m       })[0m

      at toContain (__tests__/integration/openapi-drift.test.ts:207:33)
          at Array.forEach (<anonymous>)
      at forEach (__tests__/integration/openapi-drift.test.ts:206:25)
          at Array.forEach (<anonymous>)
      at Object.forEach (__tests__/integration/openapi-drift.test.ts:197:29)

PASS __tests__/app/api/admin/pixabay/scan/route.test.ts
PASS __tests__/lib/services/auth.test.ts
FAIL __tests__/lib/services/posting-service.test.ts
  ● Console

    console.log
      📅 Found scheduled content due for posting

      at log (lib/services/posting-service.ts:50:15)

    console.log
      ✅ Posted content 1 from reddit (scheduled)

      at log (lib/services/posting-service.ts:175:13)

    console.log
      📝 Found approved content for manual posting

      at log (lib/services/posting-service.ts:65:15)

    console.log
      ✅ Posted content 2 from youtube (manual)

      at log (lib/services/posting-service.ts:175:13)

    console.log
      🕒 Checking for scheduled content due for posting...

      at log (lib/services/posting-service.ts:250:13)

    console.log
      📋 Found 2 scheduled content items due for posting

      at log (lib/services/posting-service.ts:259:13)

    console.log
      ✅ Posted content 1 from reddit (scheduled)

      at log (lib/services/posting-service.ts:175:13)

    console.log
      ✅ Posted content 2 from youtube (scheduled)

      at log (lib/services/posting-service.ts:175:13)

    console.log
      ✅ Posted 2 scheduled content items

      at log (lib/services/posting-service.ts:282:13)

    console.log
      🕒 Checking for scheduled content due for posting...

      at log (lib/services/posting-service.ts:250:13)

    console.log
      📋 Found 1 scheduled content items due for posting

      at log (lib/services/posting-service.ts:259:13)

    console.log
      ✅ Posted 0 scheduled content items

      at log (lib/services/posting-service.ts:282:13)

    console.log
      ⚠️ 1 errors occurred

      at log (lib/services/posting-service.ts:284:15)

    console.log
      🕒 Checking for scheduled content due for posting...

      at log (lib/services/posting-service.ts:250:13)

    console.log
      📭 No scheduled content due for posting

      at log (lib/services/posting-service.ts:255:15)

    console.log
      ✅ Posted content 1 from reddit (scheduled)

      at log (lib/services/posting-service.ts:175:13)

    console.log
      ✅ Posted content 1 from reddit (manual)

      at log (lib/services/posting-service.ts:175:13)

  ● Posting Service › postScheduledContentDue › should handle posting errors gracefully

    expect(received).toContain(expected) // indexOf

    Expected substring: "Failed to post scheduled content"
    Received string:    "Failed to post content 1: Database error"

    [0m [90m 145 |[39m       expect(result[33m.[39msummary[33m.[39mtotalPosted)[33m.[39mtoBe([35m0[39m)
     [90m 146 |[39m       expect(result[33m.[39merrors)[33m.[39mtoHaveLength([35m1[39m)
    [31m[1m>[22m[39m[90m 147 |[39m       expect(result[33m.[39merrors[[35m0[39m])[33m.[39mtoContain([32m'Failed to post scheduled content'[39m)
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 148 |[39m     })
     [90m 149 |[39m
     [90m 150 |[39m     it([32m'should return early when no scheduled content due'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toContain (__tests__/lib/services/posting-service.test.ts:147:32)

  ● Posting Service › posting order generation › should fallback to timestamp when order query fails

    expect(received).toBeGreaterThan(expected)

    Matcher error: received value must be a number or bigint

    Received has value: undefined

    [0m [90m 280 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m postContent(mockContent[33m,[39m [36mfalse[39m)
     [90m 281 |[39m
    [31m[1m>[22m[39m[90m 282 |[39m       expect(result[33m.[39mpostOrder)[33m.[39mtoBeGreaterThan([33mDate[39m[33m.[39mnow() [33m-[39m [35m1000[39m)
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 283 |[39m     })
     [90m 284 |[39m   })
     [90m 285 |[39m })[0m

      at Object.toBeGreaterThan (__tests__/lib/services/posting-service.test.ts:282:32)

FAIL __tests__/lib/db-connection.test.ts
  ● Database Connection Logic › Production Environment - Strict Requirements › should throw error when DATABASE_URL is missing in production

    expect(received).toThrow(expected)

    Expected substring: "DATABASE_URL is required in production environment"

    Received function did not throw

    [0m [90m 50 |[39m         [36mdelete[39m require[33m.[39mcache[require[33m.[39mresolve([32m'@/lib/db'[39m)][33m;[39m
     [90m 51 |[39m         require([32m'@/lib/db'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       })[33m.[39mtoThrow([32m'DATABASE_URL is required in production environment'[39m)[33m;[39m
     [90m    |[39m          [31m[1m^[22m[39m
     [90m 53 |[39m       
     [90m 54 |[39m       expect(mockConsoleError)[33m.[39mtoHaveBeenCalledWith(
     [90m 55 |[39m         [32m'🚨 FATAL ERROR: DATABASE_URL not set in production — Supabase connection required.'[39m[0m

      at Object.toThrow (__tests__/lib/db-connection.test.ts:52:10)

  ● Database Connection Logic › Production Environment - Strict Requirements › should throw error when DATABASE_URL is not a Supabase URL in production

    expect(received).toThrow(expected)

    Expected substring: "DATABASE_URL must be a Supabase connection string in production"

    Received function did not throw

    [0m [90m 63 |[39m         [36mdelete[39m require[33m.[39mcache[require[33m.[39mresolve([32m'@/lib/db'[39m)][33m;[39m
     [90m 64 |[39m         require([32m'@/lib/db'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 65 |[39m       })[33m.[39mtoThrow([32m'DATABASE_URL must be a Supabase connection string in production'[39m)[33m;[39m
     [90m    |[39m          [31m[1m^[22m[39m
     [90m 66 |[39m       
     [90m 67 |[39m       expect(mockConsoleError)[33m.[39mtoHaveBeenCalledWith(
     [90m 68 |[39m         [32m'🚨 FATAL ERROR: DATABASE_URL in production must be a Supabase connection string.'[39m[0m

      at Object.toThrow (__tests__/lib/db-connection.test.ts:65:10)

  ● Database Connection Logic › Production Environment - Strict Requirements › should succeed with valid Supabase URL in production

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using Supabase Postgres via DATABASE_URL"

    Number of calls: 0

    [0m [90m 78 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 79 |[39m       
    [31m[1m>[22m[39m[90m 80 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 81 |[39m         [32m'✅ [DB INIT] Using Supabase Postgres via DATABASE_URL'[39m
     [90m 82 |[39m       )[33m;[39m
     [90m 83 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:80:30)

  ● Database Connection Logic › Production Environment - Strict Requirements › should not fall back to POSTGRES_URL in production

    expect(received).toThrow(expected)

    Expected substring: "DATABASE_URL is required in production environment"

    Received function did not throw

    [0m [90m 89 |[39m         [36mdelete[39m require[33m.[39mcache[require[33m.[39mresolve([32m'@/lib/db'[39m)][33m;[39m
     [90m 90 |[39m         require([32m'@/lib/db'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 91 |[39m       })[33m.[39mtoThrow([32m'DATABASE_URL is required in production environment'[39m)[33m;[39m
     [90m    |[39m          [31m[1m^[22m[39m
     [90m 92 |[39m     })[33m;[39m
     [90m 93 |[39m   })[33m;[39m
     [90m 94 |[39m[0m

      at Object.toThrow (__tests__/lib/db-connection.test.ts:91:10)

  ● Database Connection Logic › Development Environment - Flexible Requirements › should use Supabase when DATABASE_URL is provided in development

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (development)"

    Number of calls: 0

    [0m [90m 106 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 107 |[39m       
    [31m[1m>[22m[39m[90m 108 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 109 |[39m         [32m'✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (development)'[39m
     [90m 110 |[39m       )[33m;[39m
     [90m 111 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:108:30)

  ● Database Connection Logic › Development Environment - Flexible Requirements › should fall back to SQLite when DATABASE_URL is missing in development

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using SQLite (development fallback)"

    Number of calls: 0

    [0m [90m 117 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 118 |[39m       
    [31m[1m>[22m[39m[90m 119 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 120 |[39m         [32m'✅ [DB INIT] Using SQLite (development fallback)'[39m
     [90m 121 |[39m       )[33m;[39m
     [90m 122 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:119:30)

  ● Database Connection Logic › Development Environment - Flexible Requirements › should not use POSTGRES_URL in development (prefers SQLite fallback)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using SQLite (development fallback)"

    Number of calls: 0

    [0m [90m 130 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 131 |[39m       
    [31m[1m>[22m[39m[90m 132 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 133 |[39m         [32m'✅ [DB INIT] Using SQLite (development fallback)'[39m
     [90m 134 |[39m       )[33m;[39m
     [90m 135 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:132:30)

  ● Database Connection Logic › Preview Environment - Hybrid Requirements › should use Supabase when DATABASE_URL is provided in preview

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (preview)"

    Number of calls: 0

    [0m [90m 150 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 151 |[39m       
    [31m[1m>[22m[39m[90m 152 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 153 |[39m         [32m'✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (preview)'[39m
     [90m 154 |[39m       )[33m;[39m
     [90m 155 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:152:30)

  ● Database Connection Logic › Preview Environment - Hybrid Requirements › should fall back to SQLite when DATABASE_URL is missing in preview

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using SQLite (preview fallback)"

    Number of calls: 0

    [0m [90m 161 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 162 |[39m       
    [31m[1m>[22m[39m[90m 163 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 164 |[39m         [32m'✅ [DB INIT] Using SQLite (preview fallback)'[39m
     [90m 165 |[39m       )[33m;[39m
     [90m 166 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:163:30)

  ● Database Connection Logic › Other Environments - Fallback Logic › should use Supabase when DATABASE_URL is provided in test environment

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (other environment)"

    Number of calls: 0

    [0m [90m 187 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 188 |[39m       
    [31m[1m>[22m[39m[90m 189 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 190 |[39m         [32m'✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (other environment)'[39m
     [90m 191 |[39m       )[33m;[39m
     [90m 192 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:189:30)

  ● Database Connection Logic › Other Environments - Fallback Logic › should use PostgreSQL pool when no DATABASE_URL in test environment

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using PostgreSQL connection pool (other environment)"

    Number of calls: 0

    [0m [90m 198 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 199 |[39m       
    [31m[1m>[22m[39m[90m 200 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 201 |[39m         [32m'✅ [DB INIT] Using PostgreSQL connection pool (other environment)'[39m
     [90m 202 |[39m       )[33m;[39m
     [90m 203 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:200:30)

  ● Database Connection Logic › Logging and Environment Detection › should log comprehensive environment information

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "🚀 [DB INIT] Starting database initialization..."

    Number of calls: 0

    [0m [90m 213 |[39m       require([32m'@/lib/db'[39m)[33m;[39m
     [90m 214 |[39m       
    [31m[1m>[22m[39m[90m 215 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith([32m'🚀 [DB INIT] Starting database initialization...'[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 216 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith([32m'[DB INIT] Environment detection:'[39m[33m,[39m {
     [90m 217 |[39m         [33mNODE_ENV[39m[33m:[39m [32m'production'[39m[33m,[39m
     [90m 218 |[39m         [33mVERCEL_ENV[39m[33m:[39m [32m'production'[39m[33m,[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:215:30)

  ● Database Connection Logic › Logging and Environment Detection › should detect different DATABASE_URL types correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[DB INIT] Environment detection:", ObjectContaining {"DATABASE_URL_TYPE": "supabase"}

    Number of calls: 0

    [0m [90m 256 |[39m         require([32m'@/lib/db'[39m)[33m;[39m
     [90m 257 |[39m         
    [31m[1m>[22m[39m[90m 258 |[39m         expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith([32m'[DB INIT] Environment detection:'[39m[33m,[39m 
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 259 |[39m           expect[33m.[39mobjectContaining({
     [90m 260 |[39m             [33mDATABASE_URL_TYPE[39m[33m:[39m expectedType
     [90m 261 |[39m           })[0m

      at toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:258:32)
          at Array.forEach (<anonymous>)
      at Object.forEach (__tests__/lib/db-connection.test.ts:243:17)

PASS __tests__/lib/env.test.ts
PASS __tests__/components/ui/ContentCard.test.tsx
PASS __tests__/lib/services/unsplash.test.ts
FAIL __tests__/api/content.test.ts
  ● /api/content › GET /api/content › should return paginated content successfully

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

    @@ -4,19 +4,19 @@
          "content_text": "Amazing hotdog!",
          "content_type": "text",
          "id": 1,
          "original_url": "https://reddit.com/r/hotdogs/test/1",
          "post_order": 1,
    -     "posted_at": 2024-01-01T12:00:00.000Z,
    +     "posted_at": "2024-01-01T12:00:00.000Z",
          "source_platform": "reddit",
        },
        Object {
          "content_queue_id": 2,
          "content_text": "Another hotdog!",
          "content_type": "image",
          "id": 2,
          "original_url": "https://flickr.com/photos/test/2",
          "post_order": 2,
    -     "posted_at": 2024-01-01T11:00:00.000Z,
    +     "posted_at": "2024-01-01T11:00:00.000Z",
          "source_platform": "flickr",
        },
      ]

    [0m [90m 57 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 58 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
    [31m[1m>[22m[39m[90m 59 |[39m       expect(data[33m.[39mdata[33m.[39mcontent)[33m.[39mtoEqual(mockContent)
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 60 |[39m       expect(data[33m.[39mdata[33m.[39mpagination)[33m.[39mtoEqual({
     [90m 61 |[39m         page[33m:[39m [35m1[39m[33m,[39m
     [90m 62 |[39m         limit[33m:[39m [35m10[39m[33m,[39m[0m

      at Object.toEqual (__tests__/api/content.test.ts:59:33)

  ● /api/content › GET /api/content › should validate page parameter

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 161 |[39m       
     [90m 162 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 163 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 164 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Page number must be greater than 0'[39m)
     [90m 165 |[39m       expect(data[33m.[39mcode)[33m.[39mtoBe([32m'INVALID_PAGE'[39m)
     [90m 166 |[39m     })[0m

      at Object.toBe (__tests__/api/content.test.ts:163:28)

  ● /api/content › GET /api/content › should validate limit parameter - too small

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 173 |[39m       
     [90m 174 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 175 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 176 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Limit must be between 1 and 100'[39m)
     [90m 177 |[39m       expect(data[33m.[39mcode)[33m.[39mtoBe([32m'INVALID_LIMIT'[39m)
     [90m 178 |[39m     })[0m

      at Object.toBe (__tests__/api/content.test.ts:175:28)

  ● /api/content › GET /api/content › should validate limit parameter - too large

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 185 |[39m       
     [90m 186 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 187 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 188 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Limit must be between 1 and 100'[39m)
     [90m 189 |[39m       expect(data[33m.[39mcode)[33m.[39mtoBe([32m'INVALID_LIMIT'[39m)
     [90m 190 |[39m     })[0m

      at Object.toBe (__tests__/api/content.test.ts:187:28)

  ● /api/content › GET /api/content › should validate order parameter

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 197 |[39m       
     [90m 198 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 199 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 200 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Order must be either "asc" or "desc"'[39m)
     [90m 201 |[39m       expect(data[33m.[39mcode)[33m.[39mtoBe([32m'INVALID_ORDER'[39m)
     [90m 202 |[39m     })[0m

      at Object.toBe (__tests__/api/content.test.ts:199:28)

  ● /api/content › GET /api/content › should reject non-GET methods

    expect(received).toBe(expected) // Object.is equality

    Expected: 405
    Received: 200

    [0m [90m 206 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)
     [90m 207 |[39m       
    [31m[1m>[22m[39m[90m 208 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m405[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 209 |[39m       
     [90m 210 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 211 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[0m

      at Object.toBe (__tests__/api/content.test.ts:208:31)

  ● /api/content › GET /api/content › should handle database query errors

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 224 |[39m       
     [90m 225 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 226 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 227 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Database connection failed'[39m)
     [90m 228 |[39m     })
     [90m 229 |[39m[0m

      at Object.toBe (__tests__/api/content.test.ts:226:28)

  ● /api/content › GET /api/content › should include security headers

    expect(received).toBe(expected) // Object.is equality

    Expected: "nosniff"
    Received: undefined

    [0m [90m 236 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)
     [90m 237 |[39m       
    [31m[1m>[22m[39m[90m 238 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-Content-Type-Options'[39m))[33m.[39mtoBe([32m'nosniff'[39m)
     [90m     |[39m                                                              [31m[1m^[22m[39m
     [90m 239 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-Frame-Options'[39m))[33m.[39mtoBe([32m'DENY'[39m)
     [90m 240 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-XSS-Protection'[39m))[33m.[39mtoBe([32m'1; mode=block'[39m)
     [90m 241 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Referrer-Policy'[39m))[33m.[39mtoBe([32m'strict-origin-when-cross-origin'[39m)[0m

      at Object.toBe (__tests__/api/content.test.ts:238:62)

  ● /api/content › GET /api/content › should have valid response format

    expect(received).toHaveProperty(path)

    Expected path: "timestamp"
    Received path: []

    Received value: {"data": {"content": [], "pagination": {"hasNextPage": false, "hasPreviousPage": false, "limit": 10, "nextPage": null, "page": 1, "previousPage": null, "total": 5, "totalPages": 1}}, "message": "No content found", "success": true}

    [0m [90m 254 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'success'[39m)
     [90m 255 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'data'[39m)
    [31m[1m>[22m[39m[90m 256 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'timestamp'[39m)
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 257 |[39m       expect(data[33m.[39mdata)[33m.[39mtoHaveProperty([32m'content'[39m)
     [90m 258 |[39m       expect(data[33m.[39mdata)[33m.[39mtoHaveProperty([32m'pagination'[39m)
     [90m 259 |[39m       expect([33mArray[39m[33m.[39misArray(data[33m.[39mdata[33m.[39mcontent))[33m.[39mtoBe([36mtrue[39m)[0m

      at Object.toHaveProperty (__tests__/api/content.test.ts:256:20)

PASS __tests__/lib/utils/content-hash.test.ts
FAIL __tests__/api/admin/content.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/jose/dist/webapi/index.js:1
    export { compactDecrypt } from './jwe/compact/decrypt.js';
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 24 |[39m [90m   * Get JWT secret as Uint8Array for jose library[39m
     [90m 25 |[39m [90m   */[39m
    [31m[1m>[22m[39m[90m 26 |[39m   [36mprivate[39m [36mstatic[39m getJWTSecret()[33m:[39m [33mUint8Array[39m {
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 27 |[39m     [36mconst[39m secret [33m=[39m process[33m.[39menv[33m.[39m[33mJWT_SECRET[39m
     [90m 28 |[39m     [36mif[39m ([33m![39msecret) {
     [90m 29 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'JWT_SECRET environment variable is required'[39m)[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/auth-edge.ts:26:15)
      at Object.<anonymous> (app/api/admin/content/route.ts:24:19)
      at Object.<anonymous> (__tests__/api/admin/content.test.ts:7:16)

FAIL __tests__/app/admin/queue-scheduled.test.tsx
  ● Admin Queue - Scheduled Content › should display scheduled content when scheduled filter is selected

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:147:11)

  ● Admin Queue - Scheduled Content › should show empty state when no scheduled content exists

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:200:11)

  ● Admin Queue - Scheduled Content › should handle API errors gracefully when loading scheduled content

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:235:11)

  ● Admin Queue - Scheduled Content › should refresh scheduled content when refresh button is clicked

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:248:11)

  ● Admin Queue - Scheduled Content › should display all required scheduled content fields

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:279:11)

FAIL __tests__/components/admin/AdminLogin.test.tsx
  ● Console

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

  ● AdminLogin › should render login form with basic elements

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:61:24)

  ● AdminLogin › should handle username input changes

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:71:24)

  ● AdminLogin › should handle password input changes

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:80:24)

  ● AdminLogin › should toggle password visibility

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:89:24)

  ● AdminLogin › should handle remember me checkbox

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:102:24)

  ● AdminLogin › should call login function on form submission

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:120:24)

  ● AdminLogin › should show loading state during login

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:144:24)

  ● AdminLogin › should show error message on login failure

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:168:24)

  ● AdminLogin › should validate required username

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:184:24)

  ● AdminLogin › should validate required password

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:198:24)

  ● AdminLogin › should show development mode notice

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:215:24)

  ● AdminLogin › should show URL error message when provided

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:226:24)

  ● AdminLogin › should show session expired error message

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:234:24)

  ● AdminLogin › should disable form inputs during loading

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:248:24)

FAIL __tests__/regression/runner.test.ts
  ● Console

    console.log
      🚀 Starting regression test run - 3 suites

      at RegressionTestRunner.log [as runAll] (__tests__/regression/framework.ts:122:13)

    console.log
      
      📦 Running suite: API Regression Tests

      at RegressionTestRunner.log [as runAll] (__tests__/regression/framework.ts:125:15)

    console.log
      🔧 Setting up API regression test environment

      at Object.log [as setup] (__tests__/regression/api-regression.test.ts:446:13)

    console.log
        ✅ Health endpoint returns correct structure (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Login endpoint validates credentials (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Protected endpoints require authentication (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content endpoint returns paginated results (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content creation validates required fields (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Dashboard stats return complete data structure (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Unsplash scan endpoint handles requests correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Reddit settings endpoint handles configuration updates (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Schedule configuration endpoint validates time formats (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ❌ API endpoints return consistent error format (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ API endpoints respond within acceptable time limits (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
      🧹 Cleaning up API regression test environment

      at Object.log [as teardown] (__tests__/regression/api-regression.test.ts:452:13)

    console.log
      
      📦 Running suite: Integration Regression Tests

      at RegressionTestRunner.log [as runAll] (__tests__/regression/framework.ts:125:15)

    console.log
      🔧 Setting up integration regression test environment

      at Object.log [as setup] (__tests__/regression/integration-regression.test.ts:413:13)

    console.log
        ✅ Content processor handles social media data correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Database operations maintain data integrity (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Authentication middleware protects admin routes (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content queue maintains processing order (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Social media services handle rate limiting correctly (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content filtering integrates with approval workflow (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Scheduler integrates with content queue correctly (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Error boundaries prevent cascading failures (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Cache invalidation works across components (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
      🧹 Cleaning up integration regression test environment

      at Object.log [as teardown] (__tests__/regression/integration-regression.test.ts:423:13)

    console.log
      
      📦 Running suite: Component Regression Tests

      at RegressionTestRunner.log [as runAll] (__tests__/regression/framework.ts:125:15)

    console.log
      🔧 Setting up component regression test environment

      at Object.log [as setup] (__tests__/regression/component-regression-simple.test.tsx:343:13)

    console.log
        ✅ Layout component structure validation (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ ContentFeed component data handling (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ ContentCard displays required information (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Dashboard component shows statistics (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Form validation logic works correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Modal component state management (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Component error handling (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Component rendering performance (3ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
      🧹 Cleaning up component regression test environment

      at Object.log [as teardown] (__tests__/regression/component-regression-simple.test.tsx:348:13)

    console.log
      
      ================================================================================

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:352:13)

    console.log
      📊 REGRESSION TEST REPORT

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:353:13)

    console.log
      ================================================================================

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:354:13)

    console.log
      Environment: test

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:355:13)

    console.log
      Version: 1.0.0

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:356:13)

    console.log
      Timestamp: 2025-10-17T21:43:20.182Z

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:357:13)

    console.log
      Duration: 31ms

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:358:13)

    console.log


      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:359:13)

    console.log
      📈 SUMMARY

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:362:13)

    console.log
      Total Tests: 28

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:363:13)

    console.log
      ✅ Passed: 27

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:364:13)

    console.log
      ❌ Failed: 1

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:365:13)

    console.log
      ⏭️ Skipped: 0

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:366:13)

    console.log
      Success Rate: 96.4%

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:369:13)

    console.log


      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:370:13)

    console.log
      🚨 FAILURES

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:374:15)

    console.log
      ❌ API endpoints return consistent error format (medium priority)

      at log (__tests__/regression/framework.ts:376:17)
          at Array.forEach (<anonymous>)

    console.log
         Impact: major

      at log (__tests__/regression/framework.ts:377:17)
          at Array.forEach (<anonymous>)

    console.log
         Error: Unknown error

      at log (__tests__/regression/framework.ts:378:17)
          at Array.forEach (<anonymous>)

    console.log


      at log (__tests__/regression/framework.ts:379:17)
          at Array.forEach (<anonymous>)

    console.log
      ⚡ PERFORMANCE

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:384:13)

    console.log
      Average Response Time: 25.92ms

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:385:13)

    console.log
      Max Response Time: 100ms

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:386:13)

    console.log
      Network Requests: 7

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:387:13)

    console.log
      Database Queries: 2

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:388:13)

    console.log


      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:389:13)

    console.log
      📂 BY CATEGORY

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:393:13)

    console.log
      api: 7/8 (87.5%)

      at log (__tests__/regression/framework.ts:399:15)
          at Array.forEach (<anonymous>)

    console.log
      integration: 11/11 (100.0%)

      at log (__tests__/regression/framework.ts:399:15)
          at Array.forEach (<anonymous>)

    console.log
      performance: 2/2 (100.0%)

      at log (__tests__/regression/framework.ts:399:15)
          at Array.forEach (<anonymous>)

    console.log
      component: 7/7 (100.0%)

      at log (__tests__/regression/framework.ts:399:15)
          at Array.forEach (<anonymous>)

    console.log
      ================================================================================

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:402:13)

    console.log
      
      📊 Regression Test Results:

      at Object.log (__tests__/regression/runner.test.ts:41:15)

    console.log
      Total: 28

      at Object.log (__tests__/regression/runner.test.ts:42:15)

    console.log
      Passed: 27

      at Object.log (__tests__/regression/runner.test.ts:43:15)

    console.log
      Failed: 1

      at Object.log (__tests__/regression/runner.test.ts:44:15)

    console.log
      Skipped: 0

      at Object.log (__tests__/regression/runner.test.ts:45:15)

    console.log
      Success Rate: 96.4%

      at Object.log (__tests__/regression/runner.test.ts:46:15)

    console.log
      Duration: 31ms

      at Object.log (__tests__/regression/runner.test.ts:47:15)

    console.log
        ✅ Health endpoint returns correct structure (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Login endpoint validates credentials (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Protected endpoints require authentication (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content endpoint returns paginated results (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content creation validates required fields (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Dashboard stats return complete data structure (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Schedule configuration endpoint validates time formats (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ❌ API endpoints return consistent error format (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
      
      🔌 API Tests: 7/8 passed (87.5%)

      at Object.log (__tests__/regression/runner.test.ts:65:15)

    console.log
        ✅ Unsplash scan endpoint handles requests correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Reddit settings endpoint handles configuration updates (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content processor handles social media data correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Database operations maintain data integrity (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Authentication middleware protects admin routes (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content queue maintains processing order (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Social media services handle rate limiting correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content filtering integrates with approval workflow (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Scheduler integrates with content queue correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Error boundaries prevent cascading failures (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Cache invalidation works across components (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
      
      🔗 Integration Tests: 11/11 passed (100.0%)

      at Object.log (__tests__/regression/runner.test.ts:80:15)

    console.log
        ✅ Layout component structure validation (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ ContentFeed component data handling (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ ContentCard displays required information (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Dashboard component shows statistics (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Form validation logic works correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Modal component state management (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Component error handling (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
      
      🧩 Component Tests: 7/7 passed (100.0%)

      at Object.log (__tests__/regression/runner.test.ts:95:15)

    console.log
        ✅ Health endpoint returns correct structure (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Login endpoint validates credentials (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content processor handles social media data correctly (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Database operations maintain data integrity (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Layout component structure validation (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
      
      🚨 Critical Tests: 5/5 passed (100.0%)

      at Object.log (__tests__/regression/runner.test.ts:112:15)

    console.log
        ✅ Protected endpoints require authentication (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content endpoint returns paginated results (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content creation validates required fields (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Dashboard stats return complete data structure (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Unsplash scan endpoint handles requests correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Authentication middleware protects admin routes (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Content queue maintains processing order (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Scheduler integrates with content queue correctly (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ ContentFeed component data handling (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ ContentCard displays required information (1ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Dashboard component shows statistics (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Component error handling (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
      
      ⚠️ High Priority Tests: 12/12 passed (100.0%)

      at Object.log (__tests__/regression/runner.test.ts:127:15)

    console.log
        ✅ API endpoints respond within acceptable time limits (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
        ✅ Component rendering performance (3ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
      
      ⚡ Performance Tests: Average response time 1.50ms

      at Object.log (__tests__/regression/runner.test.ts:143:17)

    console.log
      🚀 Starting regression test run - 1 suites

      at RegressionTestRunner.log [as runAll] (__tests__/regression/framework.ts:122:13)

    console.log
      
      📦 Running suite: Failing Test Suite

      at RegressionTestRunner.log [as runAll] (__tests__/regression/framework.ts:125:15)

    console.log
        ❌ Intentionally failing test (0ms)

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:341:13)

    console.log
          Error: Intentional failure

      at RegressionTestRunner.log [as logTestResult] (__tests__/regression/framework.ts:344:15)

    console.log
      
      ================================================================================

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:352:13)

    console.log
      📊 REGRESSION TEST REPORT

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:353:13)

    console.log
      ================================================================================

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:354:13)

    console.log
      Environment: test

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:355:13)

    console.log
      Version: 1.0.0

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:356:13)

    console.log
      Timestamp: 2025-10-17T21:43:20.238Z

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:357:13)

    console.log
      Duration: 1ms

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:358:13)

    console.log


      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:359:13)

    console.log
      📈 SUMMARY

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:362:13)

    console.log
      Total Tests: 1

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:363:13)

    console.log
      ✅ Passed: 0

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:364:13)

    console.log
      ❌ Failed: 1

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:365:13)

    console.log
      ⏭️ Skipped: 0

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:366:13)

    console.log
      Success Rate: 0.0%

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:369:13)

    console.log


      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:370:13)

    console.log
      🚨 FAILURES

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:374:15)

    console.log
      ❌ Intentionally failing test (low priority)

      at log (__tests__/regression/framework.ts:376:17)
          at Array.forEach (<anonymous>)

    console.log
         Impact: minor

      at log (__tests__/regression/framework.ts:377:17)
          at Array.forEach (<anonymous>)

    console.log
         Error: Intentional failure

      at log (__tests__/regression/framework.ts:378:17)
          at Array.forEach (<anonymous>)

    console.log


      at log (__tests__/regression/framework.ts:379:17)
          at Array.forEach (<anonymous>)

    console.log
      ⚡ PERFORMANCE

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:384:13)

    console.log
      Average Response Time: 0.00ms

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:385:13)

    console.log
      Max Response Time: 0ms

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:386:13)

    console.log
      Network Requests: 0

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:387:13)

    console.log
      Database Queries: 0

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:388:13)

    console.log


      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:389:13)

    console.log
      📂 BY CATEGORY

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:393:13)

    console.log
      api: 0/1 (0.0%)

      at log (__tests__/regression/framework.ts:399:15)
          at Array.forEach (<anonymous>)

    console.log
      ================================================================================

      at RegressionTestRunner.log [as generateReport] (__tests__/regression/framework.ts:402:13)

  ● Regression Test Suite › Category-Specific Regression Tests › should run API regression tests

    expect(received).toBeGreaterThan(expected)

    Expected: > 90
    Received:   87.5

    [0m [90m 66 |[39m       
     [90m 67 |[39m       [90m// API tests should have high success rate since they're mocked[39m
    [31m[1m>[22m[39m[90m 68 |[39m       expect(successRate)[33m.[39mtoBeGreaterThan([35m90[39m)
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 69 |[39m     })
     [90m 70 |[39m
     [90m 71 |[39m     it([32m'should run integration regression tests'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBeGreaterThan (__tests__/regression/runner.test.ts:68:27)

PASS __tests__/app/api/admin/unsplash/test/route.test.ts
FAIL __tests__/app/api/admin/reddit/settings/route.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/got/dist/source/index.js:1
    import create from './create.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

    [0m [90m 20 |[39m   is_gallery[33m:[39m boolean
     [90m 21 |[39m   is_video[33m:[39m boolean
    [31m[1m>[22m[39m[90m 22 |[39m   over_18[33m:[39m boolean
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 23 |[39m   spoiler[33m:[39m boolean
     [90m 24 |[39m   stickied[33m:[39m boolean
     [90m 25 |[39m   link_flair_text[33m?[39m[33m:[39m string[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/services/redditClient.ts:22:53)
      at Object.<anonymous> (lib/services/reddit.ts:14:23)
      at Object.<anonymous> (lib/services/reddit-scanning.ts:19:17)
      at Object.<anonymous> (app/api/admin/reddit/settings/route.ts:20:25)
      at Object.<anonymous> (__tests__/app/api/admin/reddit/settings/route.test.ts:10:16)

PASS __tests__/app/api/admin/bluesky/scan/route.test.ts
  ● Console

    console.log
      🔍 Starting Bluesky scan with maxPosts: 20

      at log (app/api/admin/bluesky/scan/route.ts:26:13)

    console.log
      ✅ Bluesky scan completed in 0ms: {
        totalFound: 25,
        processed: 20,
        approved: 15,
        rejected: 5,
        duplicates: 5,
        errors: 0
      }

      at log (app/api/admin/bluesky/scan/route.ts:32:13)

    console.log
      🔍 Starting Bluesky scan with maxPosts: 10

      at log (app/api/admin/bluesky/scan/route.ts:26:13)

    console.log
      ✅ Bluesky scan completed in 0ms: {
        totalFound: 15,
        processed: 10,
        approved: 8,
        rejected: 2,
        duplicates: 5,
        errors: 0
      }

      at log (app/api/admin/bluesky/scan/route.ts:32:13)

    console.log
      🔍 Starting Bluesky scan with maxPosts: 20

      at log (app/api/admin/bluesky/scan/route.ts:26:13)

    console.log
      ✅ Bluesky scan completed in 0ms: {
        totalFound: 20,
        processed: 15,
        approved: 10,
        rejected: 5,
        duplicates: 5,
        errors: 5
      }

      at log (app/api/admin/bluesky/scan/route.ts:32:13)

    console.log
      🔍 Starting Bluesky scan with maxPosts: 20

      at log (app/api/admin/bluesky/scan/route.ts:26:13)

    console.log
      🔍 Starting Bluesky scan with maxPosts: 20

      at log (app/api/admin/bluesky/scan/route.ts:26:13)

    console.log
      ✅ Bluesky scan completed in 0ms: {
        totalFound: 0,
        processed: 0,
        approved: 0,
        rejected: 0,
        duplicates: 0,
        errors: 0
      }

      at log (app/api/admin/bluesky/scan/route.ts:32:13)

    console.log
      🔍 Starting Bluesky scan with maxPosts: 20

      at log (app/api/admin/bluesky/scan/route.ts:26:13)

    console.log
      ✅ Bluesky scan completed in 0ms: {
        totalFound: 10,
        processed: 8,
        approved: 6,
        rejected: 2,
        duplicates: 2,
        errors: 0
      }

      at log (app/api/admin/bluesky/scan/route.ts:32:13)

    console.log
      🔍 Starting Bluesky scan with maxPosts: 20

      at log (app/api/admin/bluesky/scan/route.ts:26:13)

    console.log
      ✅ Bluesky scan completed in 0ms: {
        totalFound: 12,
        processed: 10,
        approved: 7,
        rejected: 3,
        duplicates: 2,
        errors: 0
      }

      at log (app/api/admin/bluesky/scan/route.ts:32:13)

    console.log
      🔍 Starting Bluesky scan with maxPosts: 20

      at log (app/api/admin/bluesky/scan/route.ts:26:13)

    console.log
      ✅ Bluesky scan completed in 0ms: {
        totalFound: 18,
        processed: 15,
        approved: 12,
        rejected: 3,
        duplicates: 3,
        errors: 0
      }

      at log (app/api/admin/bluesky/scan/route.ts:32:13)

    console.log
      🔍 Starting Bluesky scan with maxPosts: 20

      at log (app/api/admin/bluesky/scan/route.ts:26:13)

    console.log
      ✅ Bluesky scan completed in 0ms: {
        totalFound: 20,
        processed: 16,
        approved: 12,
        rejected: 4,
        duplicates: 4,
        errors: 0
      }

      at log (app/api/admin/bluesky/scan/route.ts:32:13)

PASS __tests__/api/auth/refresh.test.ts
/home/runner/work/hotdog-diaries/hotdog-diaries/__tests__/app/api/cron/post-content.test.ts:214
            schedulingService.getPostingSchedule.mockRejectedValue(new Error('Service error'));
                                                                   ^

[Error: Service error]

Node.js v20.19.5
PASS __tests__/app/api/admin/bluesky/status/route.test.ts
  ● Console

    console.log
      📊 Getting Bluesky status...

      at log (app/api/admin/bluesky/status/route.ts:7:13)

    console.log
      ✅ Bluesky status retrieved: healthy

      at log (app/api/admin/bluesky/status/route.ts:49:13)

    console.log
      📊 Getting Bluesky status...

      at log (app/api/admin/bluesky/status/route.ts:7:13)

    console.log
      ✅ Bluesky status retrieved: warning

      at log (app/api/admin/bluesky/status/route.ts:49:13)

    console.log
      📊 Getting Bluesky status...

      at log (app/api/admin/bluesky/status/route.ts:7:13)

    console.log
      ✅ Bluesky status retrieved: error

      at log (app/api/admin/bluesky/status/route.ts:49:13)

    console.log
      📊 Getting Bluesky status...

      at log (app/api/admin/bluesky/status/route.ts:7:13)

    console.log
      ✅ Bluesky status retrieved: error

      at log (app/api/admin/bluesky/status/route.ts:49:13)

    console.log
      📊 Getting Bluesky status...

      at log (app/api/admin/bluesky/status/route.ts:7:13)

    console.log
      📊 Getting Bluesky status...

      at log (app/api/admin/bluesky/status/route.ts:7:13)

FAIL __tests__/lib/services/schedule-content.test.ts
  ● Console

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 3

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: { reddit: 1, youtube: 1, giphy: 1 }

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🕒 Recently used platforms:

      at log (lib/services/schedule-content.ts:286:13)

    console.log
      🎯 Implementing weighted platform balancing for 6 posts across 3 platforms

      at log (lib/services/schedule-content.ts:103:11)

    console.log
      📊 Target per platform: 2, Total available: 3

      at log (lib/services/schedule-content.ts:111:11)

    console.log
      ✅ Selected from reddit: "Test 1..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from youtube: "Test 2..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from giphy: "Test 3..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      🎯 Final platform distribution: { reddit: 1, youtube: 1, giphy: 1 }

      at log (lib/services/schedule-content.ts:168:11)

    console.log
      ✅ Scheduled 3 posts for 2025-10-17

      at log (lib/services/schedule-content.ts:317:17)

    console.log
      🎉 Scheduling completed:

      at log (lib/services/schedule-content.ts:329:13)

    console.log
         📈 Total scheduled: 3

      at log (lib/services/schedule-content.ts:330:13)

    console.log
         📅 Days scheduled: 1

      at log (lib/services/schedule-content.ts:331:13)

    console.log
         🎯 Platform distribution: { reddit: 1, youtube: 1, giphy: 1 }

      at log (lib/services/schedule-content.ts:332:13)

    console.log
      
      🧮 Diversity Analysis:

      at log (lib/services/schedule-content.ts:335:13)

    console.log
      ┌─────────┬────────┐
      │ (index) │ Values │
      ├─────────┼────────┤
      │ reddit  │ 1      │
      │ youtube │ 1      │
      │ giphy   │ 1      │
      └─────────┴────────┘

      at table (lib/services/schedule-content.ts:342:13)

    console.log
         📊 Platform variance: 0 (max: 1, min: 1)

      at log (lib/services/schedule-content.ts:343:13)

    console.log
         🎯 Diversity score: EXCELLENT

      at log (lib/services/schedule-content.ts:344:13)

    console.log
      
      ⚠️ Warnings/Errors:

      at log (lib/services/schedule-content.ts:351:15)

    console.log
         - Only 3 content items available for 2025-10-17 (target: 6)

      at log (lib/services/schedule-content.ts:352:46)
          at Array.forEach (<anonymous>)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 0

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: {}

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 0

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: {}

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 0

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: {}

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 0

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: {}

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🗓️ Starting content scheduling for next 0 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 0

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: {}

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🗓️ Starting content scheduling for next 1 days...

      at log (lib/services/schedule-content.ts:268:13)

    console.log
      📊 Available platforms: 3

      at log (lib/services/schedule-content.ts:274:13)

    console.log
      📊 Platform distribution: { reddit: 2, youtube: 1, giphy: 1 }

      at log (lib/services/schedule-content.ts:275:13)

    console.log
      🕒 Recently used platforms:

      at log (lib/services/schedule-content.ts:286:13)

    console.log
      🎯 Implementing weighted platform balancing for 6 posts across 3 platforms

      at log (lib/services/schedule-content.ts:103:11)

    console.log
      📊 Target per platform: 2, Total available: 4

      at log (lib/services/schedule-content.ts:111:11)

    console.log
      ✅ Selected from reddit: "undefined..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from youtube: "undefined..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from giphy: "undefined..." (usage now: 1)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      ✅ Selected from reddit: "undefined..." (usage now: 2)

      at log (lib/services/schedule-content.ts:160:15)

    console.log
      🎯 Final platform distribution: { reddit: 2, youtube: 1, giphy: 1 }

      at log (lib/services/schedule-content.ts:168:11)

    console.log
      🎉 Scheduling completed:

      at log (lib/services/schedule-content.ts:329:13)

    console.log
         📈 Total scheduled: 0

      at log (lib/services/schedule-content.ts:330:13)

    console.log
         📅 Days scheduled: 0

      at log (lib/services/schedule-content.ts:331:13)

    console.log
         🎯 Platform distribution: {}

      at log (lib/services/schedule-content.ts:332:13)

    console.log
      
      🧮 Diversity Analysis:

      at log (lib/services/schedule-content.ts:335:13)

    console.log
      ┌─────────┐
      │ (index) │
      ├─────────┤
      └─────────┘

      at table (lib/services/schedule-content.ts:342:13)

    console.log
         📊 Platform variance: -Infinity (max: -Infinity, min: Infinity)

      at log (lib/services/schedule-content.ts:343:13)

    console.log
         🎯 Diversity score: EXCELLENT

      at log (lib/services/schedule-content.ts:344:13)

    console.log
      
      ⚠️ Warnings/Errors:

      at log (lib/services/schedule-content.ts:351:15)

    console.log
         - Failed to schedule content for 2025-10-17: Connection failed

      at log (lib/services/schedule-content.ts:352:46)
          at Array.forEach (<anonymous>)

  ● Schedule Content Service › scheduleNextBatch › should enforce platform diversity

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 0

    [0m [90m 86 |[39m
     [90m 87 |[39m       [90m// Should still schedule content but with awareness of recent platform usage[39m
    [31m[1m>[22m[39m[90m 88 |[39m       expect(result[33m.[39msummary[33m.[39mtotalScheduled)[33m.[39mtoBe([35m2[39m)
     [90m    |[39m                                             [31m[1m^[22m[39m
     [90m 89 |[39m     })
     [90m 90 |[39m   })
     [90m 91 |[39m[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:88:45)

  ● Schedule Content Service › getUpcomingSchedule › should return scheduled content for specified days

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"confidence_score": 0.9, "content_text": "Test 1", "id": 1, "scheduled_for": undefined, "source_platform": "reddit", "status": undefined}, {"confidence_score": 0.8, "content_text": "Test 2", "id": 2, "scheduled_for": undefined, "source_platform": "reddit", "status": undefined}]

    [0m [90m 106 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUpcomingSchedule([35m7[39m)
     [90m 107 |[39m
    [31m[1m>[22m[39m[90m 108 |[39m       expect(result)[33m.[39mtoHaveLength([35m1[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 109 |[39m       expect(result[[35m0[39m][33m.[39mid)[33m.[39mtoBe([35m1[39m)
     [90m 110 |[39m       expect(result[[35m0[39m][33m.[39mstatus)[33m.[39mtoBe([32m'scheduled'[39m)
     [90m 111 |[39m     })[0m

      at Object.toHaveLength (__tests__/lib/services/schedule-content.test.ts:108:22)

  ● Schedule Content Service › getUpcomingSchedule › should return empty array when no scheduled content

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"scheduled_for": undefined, "source_platform": "reddit", "status": undefined}]

    [0m [90m 116 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUpcomingSchedule([35m7[39m)
     [90m 117 |[39m
    [31m[1m>[22m[39m[90m 118 |[39m       expect(result)[33m.[39mtoHaveLength([35m0[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 119 |[39m     })
     [90m 120 |[39m   })
     [90m 121 |[39m[0m

      at Object.toHaveLength (__tests__/lib/services/schedule-content.test.ts:118:22)

  ● Schedule Content Service › cancelScheduledContent › should cancel scheduled content successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 126 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m cancelScheduledContent([35m1[39m)
     [90m 127 |[39m
    [31m[1m>[22m[39m[90m 128 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 129 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 130 |[39m         expect[33m.[39mstringContaining([32m'UPDATE content_queue'[39m)[33m,[39m
     [90m 131 |[39m         expect[33m.[39marrayContaining([[35m1[39m])[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:128:22)

  ● Schedule Content Service › rescheduleContent › should reschedule content to new time

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 149 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m rescheduleContent([35m1[39m[33m,[39m newTime)
     [90m 150 |[39m
    [31m[1m>[22m[39m[90m 151 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 152 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 153 |[39m         expect[33m.[39mstringContaining([32m'UPDATE content_queue'[39m)[33m,[39m
     [90m 154 |[39m         expect[33m.[39marrayContaining([expect[33m.[39many([33mString[39m)[33m,[39m [35m1[39m])[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:151:22)

  ● Schedule Content Service › rescheduleContent › should handle rescheduling errors

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 161 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m rescheduleContent([35m1[39m[33m,[39m [36mnew[39m [33mDate[39m())
     [90m 162 |[39m
    [31m[1m>[22m[39m[90m 163 |[39m       expect(result)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 164 |[39m     })
     [90m 165 |[39m   })
     [90m 166 |[39m[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:163:22)

  ● Schedule Content Service › platform diversity logic › should distribute content across different platforms

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 0

    [0m [90m 183 |[39m
     [90m 184 |[39m       [90m// Should select reddit, youtube, giphy (diverse platforms)[39m
    [31m[1m>[22m[39m[90m 185 |[39m       expect(result[33m.[39msummary[33m.[39mtotalScheduled)[33m.[39mtoBe([35m3[39m)
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 186 |[39m       expect([33mObject[39m[33m.[39mkeys(result[33m.[39msummary[33m.[39mplatformDistribution))[33m.[39mtoHaveLength([35m3[39m)
     [90m 187 |[39m     })
     [90m 188 |[39m   })[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:185:45)

  ● Schedule Content Service › error handling › should handle database connection errors gracefully

    expect(received).toContain(expected) // indexOf

    Expected value: "Scheduling failed: Connection failed"
    Received array: ["No approved content available for scheduling"]

    [0m [90m 194 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m scheduleNextBatch([35m1[39m[33m,[39m [35m6[39m)
     [90m 195 |[39m
    [31m[1m>[22m[39m[90m 196 |[39m       expect(result[33m.[39merrors)[33m.[39mtoContain([32m'Scheduling failed: Connection failed'[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 197 |[39m       expect(result[33m.[39msummary[33m.[39mtotalScheduled)[33m.[39mtoBe([35m0[39m)
     [90m 198 |[39m     })
     [90m 199 |[39m[0m

      at Object.toContain (__tests__/lib/services/schedule-content.test.ts:196:29)

  ● Schedule Content Service › time slot allocation › should schedule content at correct time slots

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 222 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m scheduleNextBatch([35m1[39m[33m,[39m [35m1[39m)
     [90m 223 |[39m
    [31m[1m>[22m[39m[90m 224 |[39m       expect(result[33m.[39mscheduled)[33m.[39mtoHaveLength([35m1[39m)
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 225 |[39m       
     [90m 226 |[39m       [90m// Check that scheduled time is set to one of the expected posting times[39m
     [90m 227 |[39m       [36mconst[39m scheduledTime [33m=[39m [36mnew[39m [33mDate[39m(result[33m.[39mscheduled[[35m0[39m][33m.[39mscheduled_for)[0m

      at Object.toHaveLength (__tests__/lib/services/schedule-content.test.ts:224:32)

PASS __tests__/lib/db-query-builder.test.ts
FAIL __tests__/api/admin/docs.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/jose/dist/webapi/index.js:1
    export { compactDecrypt } from './jwe/compact/decrypt.js';
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 24 |[39m [90m   * Get JWT secret as Uint8Array for jose library[39m
     [90m 25 |[39m [90m   */[39m
    [31m[1m>[22m[39m[90m 26 |[39m   [36mprivate[39m [36mstatic[39m getJWTSecret()[33m:[39m [33mUint8Array[39m {
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 27 |[39m     [36mconst[39m secret [33m=[39m process[33m.[39menv[33m.[39m[33mJWT_SECRET[39m
     [90m 28 |[39m     [36mif[39m ([33m![39msecret) {
     [90m 29 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'JWT_SECRET environment variable is required'[39m)[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/auth-edge.ts:26:15)
      at Object.<anonymous> (app/api/admin/docs/openapi/route.ts:22:19)
      at Object.<anonymous> (__tests__/api/admin/docs.test.ts:7:16)

PASS __tests__/app/api/admin/unsplash/status/route.test.ts
FAIL __tests__/api/admin/health/deep.test.ts
  ● Console

    console.log
      [HEALTH] Deep health check completed in 30ms {
        ok: false,
        failed_checks: [ 'database', 'http', 'supabase' ],
        timing: { db_ms: 9, jwt_ms: 8, fs_ms: 26, http_ms: 5, supabase_ms: 24 }
      }

      at log (app/api/admin/health/deep/route.ts:248:13)

    console.log
      [HEALTH] Deep health check completed in 5ms {
        ok: false,
        failed_checks: [ 'database', 'http', 'supabase' ],
        timing: { db_ms: 3, jwt_ms: 3, fs_ms: 3, http_ms: 1, supabase_ms: 2 }
      }

      at log (app/api/admin/health/deep/route.ts:248:13)

    console.log
      [HEALTH] Deep health check completed in 14ms {
        ok: false,
        failed_checks: [ 'database', 'http', 'supabase' ],
        timing: { db_ms: 3, jwt_ms: 3, fs_ms: 12, http_ms: 1, supabase_ms: 2 }
      }

      at log (app/api/admin/health/deep/route.ts:248:13)

    console.log
      [HEALTH] Deep health check completed in 1ms {
        ok: false,
        failed_checks: [ 'database', 'jwt', 'http', 'supabase' ],
        timing: { db_ms: 0, jwt_ms: 0, fs_ms: 1, http_ms: 0, supabase_ms: 0 }
      }

      at log (app/api/admin/health/deep/route.ts:248:13)

    console.log
      [HEALTH] Deep health check completed in 5ms {
        ok: false,
        failed_checks: [ 'database', 'http', 'supabase' ],
        timing: { db_ms: 3, jwt_ms: 3, fs_ms: 3, http_ms: 1, supabase_ms: 2 }
      }

      at log (app/api/admin/health/deep/route.ts:248:13)

    console.log
      [HEALTH] Deep health check completed in 5ms {
        ok: false,
        failed_checks: [ 'database', 'http', 'supabase' ],
        timing: { db_ms: 3, jwt_ms: 3, fs_ms: 3, http_ms: 1, supabase_ms: 2 }
      }

      at log (app/api/admin/health/deep/route.ts:248:13)

    console.log
      [HEALTH] Deep health check completed in 5ms {
        ok: false,
        failed_checks: [ 'database', 'http', 'supabase' ],
        timing: { db_ms: 3, jwt_ms: 3, fs_ms: 3, http_ms: 1, supabase_ms: 2 }
      }

      at log (app/api/admin/health/deep/route.ts:248:13)

  ● /api/admin/health/deep › should return expected response structure

    TypeError: expect(...).toBeOneOf is not a function

    [0m [90m 32 |[39m
     [90m 33 |[39m     [90m// Test response structure[39m
    [31m[1m>[22m[39m[90m 34 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBeOneOf([[35m200[39m[33m,[39m [35m503[39m[33m,[39m [35m500[39m])
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 35 |[39m     expect(data)[33m.[39mtoHaveProperty([32m'ok'[39m)
     [90m 36 |[39m     expect(data)[33m.[39mtoHaveProperty([32m'timestamp'[39m)
     [90m 37 |[39m     expect(data)[33m.[39mtoHaveProperty([32m'version'[39m)[0m

      at Object.toBeOneOf (__tests__/api/admin/health/deep.test.ts:34:29)

  ● /api/admin/health/deep › should include cache-control headers

    TypeError: Cannot read properties of undefined (reading 'get')

    [0m [90m 110 |[39m     [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)
     [90m 111 |[39m
    [31m[1m>[22m[39m[90m 112 |[39m     expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Cache-Control'[39m))[33m.[39mtoContain([32m'no-store'[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 113 |[39m     expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Content-Type'[39m))[33m.[39mtoBe([32m'application/json'[39m)
     [90m 114 |[39m   })
     [90m 115 |[39m[0m

      at Object.get (__tests__/api/admin/health/deep.test.ts:112:29)

PASS __tests__/lib/db.test.ts
PASS __tests__/api/admin/dashboard.test.ts
PASS __tests__/app/api/admin/login/route.test.ts
  ● Console

    console.log
      🍪 [Login] Setting authentication cookies for user: testuser

      at log (app/api/admin/login/route.ts:69:13)

    console.log
      🍪 [Login] Access token length: 17

      at log (app/api/admin/login/route.ts:70:13)

    console.log
      🍪 [Login] Refresh token length: 18

      at log (app/api/admin/login/route.ts:71:13)

    console.log
      🍪 [Login] Cookies set in response, returning to client

      at log (app/api/admin/login/route.ts:79:13)

FAIL __tests__/lib/middleware/admin-middleware.test.ts
  ● Admin Middleware › withAdminMiddleware › should add request ID and cache-control headers

    TypeError: Cannot read properties of undefined (reading 'get')

    [0m [90m 37 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m wrappedHandler(request)
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-Request-ID'[39m))[33m.[39mtoMatch([35m/^[0-9A-HJKMNP-TV-Z]{26}$/[39m) [90m// ULID format[39m
     [90m    |[39m                               [31m[1m^[22m[39m
     [90m 40 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Cache-Control'[39m))[33m.[39mtoContain([32m'no-store'[39m)
     [90m 41 |[39m       expect(mockHandler)[33m.[39mtoHaveBeenCalled()
     [90m 42 |[39m     })[0m

      at Object.get (__tests__/lib/middleware/admin-middleware.test.ts:39:31)

  ● Admin Middleware › withAdminMiddleware › should handle timeout and return 504 response

    RequestTimeoutError: Request timeout after 500ms

    [0m [90m 92 |[39m     timeoutId [33m=[39m setTimeout(() [33m=>[39m {
     [90m 93 |[39m       [36mif[39m ([33m![39misCleared) {
    [31m[1m>[22m[39m[90m 94 |[39m         [36mconst[39m error [33m=[39m [36mnew[39m [33mError[39m([32m`Request timeout after ${timeoutMs}ms`[39m)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 95 |[39m         error[33m.[39mname [33m=[39m [32m'RequestTimeoutError'[39m
     [90m 96 |[39m         reject(error)
     [90m 97 |[39m       }[0m

      at Timeout.<anonymous> (lib/middleware/admin-middleware.ts:94:23)

  ● Admin Middleware › withAdminMiddleware › should handle timeout and return 504 response

    RequestTimeoutError: Request timeout after 500ms

    [0m [90m 92 |[39m     timeoutId [33m=[39m setTimeout(() [33m=>[39m {
     [90m 93 |[39m       [36mif[39m ([33m![39misCleared) {
    [31m[1m>[22m[39m[90m 94 |[39m         [36mconst[39m error [33m=[39m [36mnew[39m [33mError[39m([32m`Request timeout after ${timeoutMs}ms`[39m)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 95 |[39m         error[33m.[39mname [33m=[39m [32m'RequestTimeoutError'[39m
     [90m 96 |[39m         reject(error)
     [90m 97 |[39m       }[0m

      at Timeout.<anonymous> (lib/middleware/admin-middleware.ts:94:23)

  ● Admin Middleware › withAdminMiddleware › should add custom headers when provided

    TypeError: Cannot read properties of undefined (reading 'get')

    [0m [90m 131 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m wrappedHandler(request)
     [90m 132 |[39m
    [31m[1m>[22m[39m[90m 133 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-Custom-Header'[39m))[33m.[39mtoBe([32m'test-value'[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 134 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-API-Version'[39m))[33m.[39mtoBe([32m'1.0'[39m)
     [90m 135 |[39m     })
     [90m 136 |[39m[0m

      at Object.get (__tests__/lib/middleware/admin-middleware.test.ts:133:31)

  ● Admin Middleware › withAdminMiddleware › should log structured request data when enabled

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "[ADMIN] GET /api/admin/test 200", ObjectContaining {"duration_ms": Any<Number>, "method": "GET", "path": "/api/admin/test", "rid": StringMatching /^[0-9A-HJKMNP-TV-Z]{26}$/, "status": 200, "timestamp": Any<String>}

    Number of calls: 0

    [0m [90m 149 |[39m       [36mawait[39m wrappedHandler(request)
     [90m 150 |[39m
    [31m[1m>[22m[39m[90m 151 |[39m       expect(consoleSpy)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 152 |[39m         expect[33m.[39mstringContaining([32m'[ADMIN] GET /api/admin/test 200'[39m)[33m,[39m
     [90m 153 |[39m         expect[33m.[39mobjectContaining({
     [90m 154 |[39m           rid[33m:[39m expect[33m.[39mstringMatching([35m/^[0-9A-HJKMNP-TV-Z]{26}$/[39m)[33m,[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/middleware/admin-middleware.test.ts:151:26)

  ● Admin Middleware › createErrorResponse › should create properly formatted error response

    TypeError: Cannot read properties of undefined (reading 'get')

    [0m [90m 173 |[39m
     [90m 174 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)
    [31m[1m>[22m[39m[90m 175 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Cache-Control'[39m))[33m.[39mtoContain([32m'no-store'[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 176 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Content-Type'[39m))[33m.[39mtoBe([32m'application/json'[39m)
     [90m 177 |[39m     })
     [90m 178 |[39m   })[0m

      at Object.get (__tests__/lib/middleware/admin-middleware.test.ts:175:31)

/home/runner/work/hotdog-diaries/hotdog-diaries/__tests__/app/api/cron/post-content.test.ts:214
            schedulingService.getPostingSchedule.mockRejectedValue(new Error('Service error'));
                                                                   ^

[Error: Service error]

Node.js v20.19.5
PASS __tests__/components/ui/ContentFeed.test.tsx
FAIL __tests__/lib/db-strict-prod.test.ts
  ● Database Connection - Production Requirements › Production Environment Tests › should require DATABASE_URL in production

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 37 |[39m       
     [90m 38 |[39m       [90m// Import the module which should trigger the constructor[39m
    [31m[1m>[22m[39m[90m 39 |[39m       [36mawait[39m expect([36masync[39m () [33m=>[39m {
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 40 |[39m         [90m// Dynamic import to ensure fresh module loading[39m
     [90m 41 |[39m         [36mconst[39m { [33mDatabaseConnection[39m } [33m=[39m [36mawait[39m [36mimport[39m([32m'@/lib/db'[39m)[33m;[39m
     [90m 42 |[39m       })[33m.[39mrejects[33m.[39mtoThrow()[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/db-strict-prod.test.ts:39:13)

  ● Database Connection - Production Requirements › Production Environment Tests › should require Supabase URL in production

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 51 |[39m       process[33m.[39menv[33m.[39m[33mDATABASE_URL[39m [33m=[39m [32m'postgresql://user:password@localhost:5432/dbname'[39m[33m;[39m
     [90m 52 |[39m       
    [31m[1m>[22m[39m[90m 53 |[39m       [36mawait[39m expect([36masync[39m () [33m=>[39m {
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 54 |[39m         [36mconst[39m { [33mDatabaseConnection[39m } [33m=[39m [36mawait[39m [36mimport[39m([32m'@/lib/db'[39m)[33m;[39m
     [90m 55 |[39m       })[33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 56 |[39m       [0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/db-strict-prod.test.ts:53:13)

  ● Database Connection - Production Requirements › Production Environment Tests › should accept valid Supabase URL in production

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using Supabase Postgres via DATABASE_URL"

    Number of calls: 0

    [0m [90m 68 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 69 |[39m       
    [31m[1m>[22m[39m[90m 70 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 71 |[39m         expect[33m.[39mstringContaining([32m'Using Supabase Postgres via DATABASE_URL'[39m)
     [90m 72 |[39m       )[33m;[39m
     [90m 73 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:70:30)

  ● Database Connection - Production Requirements › Development Environment Tests › should allow SQLite fallback in development

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using SQLite (development fallback)"

    Number of calls: 0

    [0m [90m 83 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 84 |[39m       
    [31m[1m>[22m[39m[90m 85 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 86 |[39m         expect[33m.[39mstringContaining([32m'Using SQLite (development fallback)'[39m)
     [90m 87 |[39m       )[33m;[39m
     [90m 88 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:85:30)

  ● Database Connection - Production Requirements › Development Environment Tests › should use Supabase when DATABASE_URL is provided in development

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using Supabase Postgres via DATABASE_URL (development)"

    Number of calls: 0

    [0m [90m  96 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m  97 |[39m       
    [31m[1m>[22m[39m[90m  98 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m  99 |[39m         expect[33m.[39mstringContaining([32m'Using Supabase Postgres via DATABASE_URL (development)'[39m)
     [90m 100 |[39m       )[33m;[39m
     [90m 101 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:98:30)

  ● Database Connection - Production Requirements › Preview Environment Tests › should allow SQLite fallback in preview

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using SQLite (preview fallback)"

    Number of calls: 0

    [0m [90m 112 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 113 |[39m       
    [31m[1m>[22m[39m[90m 114 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 115 |[39m         expect[33m.[39mstringContaining([32m'Using SQLite (preview fallback)'[39m)
     [90m 116 |[39m       )[33m;[39m
     [90m 117 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:114:30)

  ● Database Connection - Production Requirements › Preview Environment Tests › should use Supabase when DATABASE_URL is provided in preview

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using Supabase Postgres via DATABASE_URL (preview)"

    Number of calls: 0

    [0m [90m 126 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 127 |[39m       
    [31m[1m>[22m[39m[90m 128 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 129 |[39m         expect[33m.[39mstringContaining([32m'Using Supabase Postgres via DATABASE_URL (preview)'[39m)
     [90m 130 |[39m       )[33m;[39m
     [90m 131 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:128:30)

  ● Database Connection - Production Requirements › Environment Variable Detection › should correctly reject non-Supabase URLs in production

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 165 |[39m         process[33m.[39menv[33m.[39m[33mDATABASE_URL[39m [33m=[39m url[33m;[39m
     [90m 166 |[39m         
    [31m[1m>[22m[39m[90m 167 |[39m         [36mawait[39m expect([36masync[39m () [33m=>[39m {
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 168 |[39m           [36mconst[39m { [33mDatabaseConnection[39m } [33m=[39m [36mawait[39m [36mimport[39m([32m'@/lib/db'[39m)[33m;[39m
     [90m 169 |[39m         })[33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 170 |[39m         [0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/db-strict-prod.test.ts:167:15)

PASS __tests__/app/api/admin/imgur/test-connection.test.ts
PASS __tests__/app/api/admin/unsplash/search/route.test.ts
PASS __tests__/app/api/admin/youtube/scan/route.test.ts
FAIL __tests__/api/health.test.ts
  ● /api/health › GET /api/health › should return healthy status when database is connected

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 25 |[39m   describe([32m'GET /api/health'[39m[33m,[39m () [33m=>[39m {
     [90m 26 |[39m     it([32m'should return healthy status when database is connected'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 27 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 28 |[39m         connected[33m:[39m [36mtrue[39m[33m,[39m
     [90m 29 |[39m         latency[33m:[39m [35m25[39m
     [90m 30 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:27:26)

  ● /api/health › GET /api/health › should return unhealthy status when database is disconnected

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 46 |[39m
     [90m 47 |[39m     it([32m'should return unhealthy status when database is disconnected'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 48 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 49 |[39m         connected[33m:[39m [36mfalse[39m[33m,[39m
     [90m 50 |[39m         error[33m:[39m [32m'Connection timeout'[39m
     [90m 51 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:48:26)

  ● /api/health › GET /api/health › should include development metadata in development environment

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 67 |[39m       process[33m.[39menv[33m.[39m[33mNODE_ENV[39m [33m=[39m [32m'development'[39m
     [90m 68 |[39m
    [31m[1m>[22m[39m[90m 69 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 70 |[39m         connected[33m:[39m [36mtrue[39m[33m,[39m
     [90m 71 |[39m         latency[33m:[39m [35m15[39m
     [90m 72 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:69:26)

  ● /api/health › GET /api/health › should handle database health check errors

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

    [0m [90m 85 |[39m
     [90m 86 |[39m     it([32m'should handle database health check errors'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 87 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m       [36mconst[39m request [33m=[39m createMockRequest([32m'GET'[39m)
     [90m 90 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)[0m

      at Object.mockRejectedValue (__tests__/api/health.test.ts:87:26)

  ● /api/health › GET /api/health › should reject invalid HTTP methods

    expect(received).toBe(expected) // Object.is equality

    Expected: 405
    Received: 500

    [0m [90m 101 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)
     [90m 102 |[39m       
    [31m[1m>[22m[39m[90m 103 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m405[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 104 |[39m       
     [90m 105 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 106 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[0m

      at Object.toBe (__tests__/api/health.test.ts:103:31)

  ● /api/health › HEAD /api/health › should return 200 status with no body

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

    [0m [90m 114 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mHEAD[39m(request)
     [90m 115 |[39m       
    [31m[1m>[22m[39m[90m 116 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 117 |[39m       expect(response[33m.[39mbody)[33m.[39mtoBeNull()
     [90m 118 |[39m     })
     [90m 119 |[39m[0m

      at Object.toBe (__tests__/api/health.test.ts:116:31)

  ● /api/health › HEAD /api/health › should handle HEAD requests even when database is down

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 119 |[39m
     [90m 120 |[39m     it([32m'should handle HEAD requests even when database is down'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 121 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 122 |[39m         connected[33m:[39m [36mfalse[39m[33m,[39m
     [90m 123 |[39m         error[33m:[39m [32m'Database down'[39m
     [90m 124 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:121:26)

  ● /api/health › Security Headers › should include security headers in response

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 133 |[39m   describe([32m'Security Headers'[39m[33m,[39m () [33m=>[39m {
     [90m 134 |[39m     it([32m'should include security headers in response'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 135 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 136 |[39m         connected[33m:[39m [36mtrue[39m[33m,[39m
     [90m 137 |[39m         latency[33m:[39m [35m10[39m
     [90m 138 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:135:26)

  ● /api/health › Response Format › should return consistent response format

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 150 |[39m   describe([32m'Response Format'[39m[33m,[39m () [33m=>[39m {
     [90m 151 |[39m     it([32m'should return consistent response format'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 152 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 153 |[39m         connected[33m:[39m [36mtrue[39m[33m,[39m
     [90m 154 |[39m         latency[33m:[39m [35m20[39m
     [90m 155 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:152:26)

  ● /api/health › Response Format › should have valid timestamp format

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 173 |[39m
     [90m 174 |[39m     it([32m'should have valid timestamp format'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 175 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 176 |[39m         connected[33m:[39m [36mtrue[39m
     [90m 177 |[39m       })
     [90m 178 |[39m[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:175:26)

FAIL __tests__/integration/token-refresh-workflow.test.ts
  ● Token Refresh Workflow Integration › refresh-token.sh script › should execute without errors when service account is valid

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › refresh-token.sh script › should fail gracefully when no credentials provided

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › Service Token Generation › should generate valid service tokens

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › Service Token Generation › should generate tokens with 30-day expiry

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › Token Refresh Flow › should handle token refresh with valid refresh token

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › Token Refresh Flow › should reject expired refresh tokens

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › GitHub Actions Environment › should handle GitHub environment variables correctly

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)


  ● Test suite failed to run

    TypeError: _db.db.disconnect is not a function

    [0m [90m 37 |[39m     
     [90m 38 |[39m     [90m// Disconnect from database[39m
    [31m[1m>[22m[39m[90m 39 |[39m     [36mawait[39m db[33m.[39mdisconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 40 |[39m   })
     [90m 41 |[39m
     [90m 42 |[39m   describe([32m'refresh-token.sh script'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.disconnect (__tests__/integration/token-refresh-workflow.test.ts:39:14)

PASS __tests__/app/api/admin/unsplash/scans/route.test.ts
PASS __tests__/app/api/health/route.test.ts
PASS __tests__/app/api/admin/unsplash/scan/route.test.ts
PASS __tests__/app/api/admin/youtube/status/route.test.ts
PASS __tests__/components/error-boundary.test.tsx
/home/runner/work/hotdog-diaries/hotdog-diaries/__tests__/app/api/cron/post-content.test.ts:214
            schedulingService.getPostingSchedule.mockRejectedValue(new Error('Service error'));
                                                                   ^

[Error: Service error]

Node.js v20.19.5
FAIL __tests__/components/admin/AdminDashboard.test.tsx
  ● Console

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

  ● AdminDashboard › renders dashboard with loading state

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:53:11)

  ● AdminDashboard › renders dashboard with statistics data

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:71:11)

  ● AdminDashboard › handles API errors gracefully

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:92:11)

  ● AdminDashboard › displays quick action buttons

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:119:11)

  ● AdminDashboard › refreshes data every 30 seconds

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:144:11)

PASS __tests__/openapi/simple-integration.test.ts
FAIL __tests__/lib/services/social-media.test.ts
  ● Test suite failed to run

    Configuration error:

    Could not locate module @/lib/services/mastodon-monitoring mapped as:
    /home/runner/work/hotdog-diaries/hotdog-diaries/$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/(.*)$/": "/home/runner/work/hotdog-diaries/hotdog-diaries/$1"
      },
      "resolver": undefined
    }

    [0m [90m 4 |[39m jest[33m.[39mmock([32m'@/lib/services/reddit-scanning'[39m)
     [90m 5 |[39m jest[33m.[39mmock([32m'@/lib/services/mastodon-scanning'[39m) 
    [31m[1m>[22m[39m[90m 6 |[39m jest[33m.[39mmock([32m'@/lib/services/mastodon-monitoring'[39m)
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 7 |[39m jest[33m.[39mmock([32m'@/lib/services/flickr-scanning'[39m)
     [90m 8 |[39m jest[33m.[39mmock([32m'@/lib/services/youtube-scanning'[39m)
     [90m 9 |[39m jest[33m.[39mmock([32m'@/lib/db'[39m[33m,[39m () [33m=>[39m ({[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.mock (__tests__/lib/services/social-media.test.ts:6:6)

FAIL __tests__/app/api/admin/reddit/scan/route.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/got/dist/source/index.js:1
    import create from './create.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

    [0m [90m 20 |[39m   is_gallery[33m:[39m boolean
     [90m 21 |[39m   is_video[33m:[39m boolean
    [31m[1m>[22m[39m[90m 22 |[39m   over_18[33m:[39m boolean
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 23 |[39m   spoiler[33m:[39m boolean
     [90m 24 |[39m   stickied[33m:[39m boolean
     [90m 25 |[39m   link_flair_text[33m?[39m[33m:[39m string[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/services/redditClient.ts:22:53)
      at Object.<anonymous> (lib/services/reddit.ts:14:23)
      at Object.<anonymous> (lib/services/reddit-scanning.ts:19:17)
      at Object.<anonymous> (app/api/admin/reddit/scan/route.ts:20:25)
      at Object.<anonymous> (__tests__/app/api/admin/reddit/scan/route.test.ts:20:16)

PASS __tests__/app/api/admin/pixabay/status/route.test.ts
PASS __tests__/app/api/admin/imgur/status/route.test.ts
PASS __tests__/app/api/admin/unsplash/config/route.test.ts
PASS __tests__/middleware.test.ts
FAIL __tests__/app/admin/page.test.tsx
  ● Console

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

    console.group
        ❌ useAuth Context Boundary Error

      at group (components/providers/AuthProvider.tsx:251:13)

  ● Admin Page › renders without crashing

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:19:11)

  ● Admin Page › renders admin panel heading

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:26:11)

  ● Admin Page › renders all admin sections

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:33:11)

  ● Admin Page › renders section descriptions

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:47:11)

  ● Admin Page › renders coming soon buttons for all sections

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:61:11)

  ● Admin Page › has proper grid layout structure

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:68:33)

  ● Admin Page › renders within Layout component

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:76:11)

FAIL __tests__/components/HomePage.test.tsx
  ● HomePage Component › renders main heading

    TestingLibraryElementError: Unable to find an accessible element with the role "heading" and name `/welcome to hotdog diaries/i`

    Here are the accessible roles:

      contentinfo:

      Name "":
      [36m<footer[39m
        [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🌭 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🔍 Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m📱 Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m  6 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m  7 |[39m     
    [31m[1m>[22m[39m[90m  8 |[39m     [36mconst[39m heading [33m=[39m screen[33m.[39mgetByRole([32m'heading'[39m[33m,[39m { name[33m:[39m [35m/welcome to hotdog diaries/i[39m[33m,[39m level[33m:[39m [35m1[39m })
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m  9 |[39m     expect(heading)[33m.[39mtoBeInTheDocument()
     [90m 10 |[39m   })
     [90m 11 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (__tests__/components/HomePage.test.tsx:8:28)

  ● HomePage Component › renders description text

    TestingLibraryElementError: Unable to find an element with the text: /your premier destination for hotdog content/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🌭 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🔍 Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m📱 Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 13 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 14 |[39m     
    [31m[1m>[22m[39m[90m 15 |[39m     [36mconst[39m description [33m=[39m screen[33m.[39mgetByText([35m/your premier destination for hotdog content/i[39m)
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 16 |[39m     expect(description)[33m.[39mtoBeInTheDocument()
     [90m 17 |[39m   })
     [90m 18 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/components/HomePage.test.tsx:15:32)

  ● HomePage Component › renders all feature cards

    TestingLibraryElementError: Unable to find an element with the text: /daily content/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🌭 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🔍 Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m📱 Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 20 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 21 |[39m     
    [31m[1m>[22m[39m[90m 22 |[39m     [36mconst[39m dailyContentCard [33m=[39m screen[33m.[39mgetByText([35m/daily content/i[39m)
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 23 |[39m     [36mconst[39m smartScanningCard [33m=[39m screen[33m.[39mgetByText([35m/smart scanning/i[39m)
     [90m 24 |[39m     [36mconst[39m mobileReadyCard [33m=[39m screen[33m.[39mgetByText([35m/mobile ready/i[39m)
     [90m 25 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/components/HomePage.test.tsx:22:37)

  ● HomePage Component › renders feature card descriptions

    TestingLibraryElementError: Unable to find an element with the text: /fresh hotdog posts delivered 6 times per day/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🌭 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🔍 Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m📱 Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 32 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 33 |[39m     
    [31m[1m>[22m[39m[90m 34 |[39m     [36mconst[39m dailyContentDesc [33m=[39m screen[33m.[39mgetByText([35m/fresh hotdog posts delivered 6 times per day/i[39m)
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 35 |[39m     [36mconst[39m smartScanningDesc [33m=[39m screen[33m.[39mgetByText([35m/our intelligent system finds and curates/i[39m)
     [90m 36 |[39m     [36mconst[39m mobileReadyDesc [33m=[39m screen[33m.[39mgetByText([35m/optimized for all devices/i[39m)
     [90m 37 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/components/HomePage.test.tsx:34:37)

  ● HomePage Component › renders coming soon section

    TestingLibraryElementError: Unable to find an accessible element with the role "heading" and name `/coming soon/i`

    Here are the accessible roles:

      contentinfo:

      Name "":
      [36m<footer[39m
        [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🌭 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🔍 Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m📱 Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 44 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 45 |[39m     
    [31m[1m>[22m[39m[90m 46 |[39m     [36mconst[39m comingSoonHeading [33m=[39m screen[33m.[39mgetByRole([32m'heading'[39m[33m,[39m { name[33m:[39m [35m/coming soon/i[39m[33m,[39m level[33m:[39m [35m2[39m })
     [90m    |[39m                                      [31m[1m^[22m[39m
     [90m 47 |[39m     [36mconst[39m comingSoonText [33m=[39m screen[33m.[39mgetByText([35m/hotdog content will start appearing here/i[39m)
     [90m 48 |[39m     
     [90m 49 |[39m     expect(comingSoonHeading)[33m.[39mtoBeInTheDocument()[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (__tests__/components/HomePage.test.tsx:46:38)

  ● HomePage Component › renders emojis for visual appeal

    TestingLibraryElementError: Unable to find an element with the text: 🌭. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🌭 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🔍 Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m📱 Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 55 |[39m     
     [90m 56 |[39m     [90m// Check if emojis are present in the document[39m
    [31m[1m>[22m[39m[90m 57 |[39m     [36mconst[39m hotdogEmoji [33m=[39m screen[33m.[39mgetByText([32m'🌭'[39m)
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 58 |[39m     [36mconst[39m searchEmoji [33m=[39m screen[33m.[39mgetByText([32m'🔍'[39m)
     [90m 59 |[39m     [36mconst[39m mobileEmoji [33m=[39m screen[33m.[39mgetByText([32m'📱'[39m)
     [90m 60 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/components/HomePage.test.tsx:57:32)

  ● HomePage Component › has proper heading hierarchy

    TestingLibraryElementError: Unable to find an accessible element with the role "heading"

    Here are the accessible roles:

      contentinfo:

      Name "":
      [36m<footer[39m
        [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🌭 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m🔍 Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m📱 Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 67 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 68 |[39m     
    [31m[1m>[22m[39m[90m 69 |[39m     [36mconst[39m h1 [33m=[39m screen[33m.[39mgetByRole([32m'heading'[39m[33m,[39m { level[33m:[39m [35m1[39m })
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m     [36mconst[39m h2 [33m=[39m screen[33m.[39mgetByRole([32m'heading'[39m[33m,[39m { level[33m:[39m [35m2[39m })
     [90m 71 |[39m     [36mconst[39m h3Elements [33m=[39m screen[33m.[39mgetAllByRole([32m'heading'[39m[33m,[39m { level[33m:[39m [35m3[39m })
     [90m 72 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (__tests__/components/HomePage.test.tsx:69:23)

  ● HomePage Component › renders with responsive container classes

    expect(received).toBeInTheDocument()

    received value must be an HTMLElement or an SVGElement.
    Received has value: null

    [0m [90m 80 |[39m     
     [90m 81 |[39m     [36mconst[39m containerDiv [33m=[39m container[33m.[39mquerySelector([32m'.container'[39m)
    [31m[1m>[22m[39m[90m 82 |[39m     expect(containerDiv)[33m.[39mtoBeInTheDocument()
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 83 |[39m     expect(containerDiv)[33m.[39mtoHaveClass([32m'py-12'[39m)
     [90m 84 |[39m   })
     [90m 85 |[39m })[0m

      at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:2240:22)
      at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:2241:6)
      at Object.toBeInTheDocument (__tests__/components/HomePage.test.tsx:82:26)

/home/runner/work/hotdog-diaries/hotdog-diaries/__tests__/app/api/cron/post-content.test.ts:214
            schedulingService.getPostingSchedule.mockRejectedValue(new Error('Service error'));
                                                                   ^

[Error: Service error]

Node.js v20.19.5
FAIL __tests__/app/api/cron/post-content.test.ts
  ● Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)

PASS __tests__/components/Layout.test.tsx
PASS __tests__/components/Footer.test.tsx
PASS __tests__/components/Header.test.tsx
FAIL __tests__/app/page.test.tsx
  ● Console

    console.log
      🎬 Rendering HotdogBounceLoader - posts: 0 loading: true

      at log (components/AdaptiveTikTokFeed.tsx:734:13)

    console.log
      🌭 Loading hotdog content... (loading=true)

      at log (components/AdaptiveTikTokFeed.tsx:70:15)

    console.log
      🔍 Component should show HotdogBounceLoader now

      at log (components/AdaptiveTikTokFeed.tsx:71:15)

    console.log
      📝 Posts updated: 0 posts available

      at log (components/AdaptiveTikTokFeed.tsx:80:13)

    console.log
      ⏱️ fetchInitialPost: Starting...

      at log (components/AdaptiveTikTokFeed.tsx:335:13)

    console.log
      🔄 setLoading(true) - Loading should be visible now

      at log (components/AdaptiveTikTokFeed.tsx:336:13)

    console.log
      🎬 Rendering HotdogBounceLoader - posts: 0 loading: true

      at log (components/AdaptiveTikTokFeed.tsx:734:13)

    console.log
      🌭 Loading hotdog content... (loading=true)

      at log (components/AdaptiveTikTokFeed.tsx:70:15)

    console.log
      🔍 Component should show HotdogBounceLoader now

      at log (components/AdaptiveTikTokFeed.tsx:71:15)

    console.log
      📝 Posts updated: 0 posts available

      at log (components/AdaptiveTikTokFeed.tsx:80:13)

    console.log
      ⏱️ fetchInitialPost: Starting...

      at log (components/AdaptiveTikTokFeed.tsx:335:13)

    console.log
      🔄 setLoading(true) - Loading should be visible now

      at log (components/AdaptiveTikTokFeed.tsx:336:13)

    console.log
      🎬 Rendering HotdogBounceLoader - posts: 0 loading: true

      at log (components/AdaptiveTikTokFeed.tsx:734:13)

    console.log
      🌭 Loading hotdog content... (loading=true)

      at log (components/AdaptiveTikTokFeed.tsx:70:15)

    console.log
      🔍 Component should show HotdogBounceLoader now

      at log (components/AdaptiveTikTokFeed.tsx:71:15)

    console.log
      📝 Posts updated: 0 posts available

      at log (components/AdaptiveTikTokFeed.tsx:80:13)

    console.log
      ⏱️ fetchInitialPost: Starting...

      at log (components/AdaptiveTikTokFeed.tsx:335:13)

    console.log
      🔄 setLoading(true) - Loading should be visible now

      at log (components/AdaptiveTikTokFeed.tsx:336:13)

  ● Home Page › renders without crashing

    TestingLibraryElementError: Unable to find an element by: [data-testid="layout"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"min-h-screen transition-all duration-1000 feed-container opacity-100 scale-100"[39m
          [33mstyle[39m=[32m"z-index: 1;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"fixed inset-0 text-neutral-100 flex flex-col items-center justify-center p-6 z-[99999]"[39m
            [33mstyle[39m=[32m"background: white; height: 100vh;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"absolute top-1/2 left-1/2"[39m
              [33mstyle[39m=[32m"transform: translate(-33%, -18%);"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative max-w-4xl h-[360px] flex items-center justify-center gap-12"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"0"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-1/2 h-8 rounded-full"[39m
                    [33mstyle[39m=[32m"width: var(--shadowBase); background: radial-gradient(ellipse at center, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.0) 70%); animation: shadowAnim var(--duration) infinite ease-in-out; animation-delay: 0s;"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33maria-label[39m=[32m"Loading hotdog 1"[39m
                    [33mclass[39m=[32m"will-change-transform select-none hotdog"[39m
                    [33mdata-anim[39m=[32m"true"[39m
                    [33mdata-testid[39m=[32m"hotdog-wrapper-0"[39m
                    [33mrole[39m=[32m"img"[39m
                    [33mstyle[39m=[32m"transform-origin: center bottom; offset-path: path('M 0 0 C -15 -88, -9 -176, 0 -220, 9 -176, 15 -88, 0 0'); offset-rotate: 0deg; animation-delay: 0s, 0s; --duration: 1.6s; --sqx: 1.282051282051282; --sqy: 0.78; --liftx: 0.9538344143456696; --lifty: 1.0484; --airx: 0.8920606601248885; --airy: 1.121; --shadowBase: 240px;"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mheight[39m=[32m"120"[39m
                      [33mviewBox[39m=[32m"0 0 300 120"[39m
                      [33mwidth[39m=[32m"300"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<defs>[39m
                        [36m<filter[39m
                          [33mheight[39m=[32m"140%"[39m
                          [33mid[39m=[32m"shadow"[39m
                          [33mwidth[39m=[32m"140%"[39m
                          [33mx[39m=[32m"-20%"[39m
                          [33my[39m=[32m"-20%"[39m
                        [36m>[39m
                          [36m<fedropshadow[39m
                            [33mdx[39m=[32m"0"[39m
                            [33mdy[39m=[32m"2"[39m
                            [33mflood-color[39m=[32m"#000"[39m
                            [33mflood-opacity[39m=[32m".35"[39m
                            [33mstdDeviation[39m=[32m"2"[39m
                          [36m/>[39m
                        [36m</filter>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"bun"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#F6D18B"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#E5B873"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"dog"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#C94C31"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#A73D28"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                      [36m</defs>[39m
                      [36m<g[39m
                        [33mfilter[39m=[32m"url(#shadow)"[39m
                      [36m>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"58"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#dog)"[39m
                          [33mheight[39m=[32m"60"[39m
                          [33mrx[39m=[32m"30"[39m
                          [33mwidth[39m=[32m"260"[39m
                          [33mx[39m=[32m"20"[39m
                          [33my[39m=[32m"30"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"18"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M 30 54 C 60 34, 90 74, 120 54 S 180 34, 210 54 240 74, 270 54"[39m
                          [33mfill[39m=[32m"none"[39m
                          [33mstroke[39m=[32m"#F4D43F"[39m
                          [33mstroke-linecap[39m=[32m"round"[39m
                          [33mstroke-linejoin[39m=[32m"round"[39m
                          [33mstroke-width[39m=[32m"10"[39m
                        [36m/>[39m
                      [36m</g>[39m
                    [36m</svg>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-...

    [0m [90m 25 |[39m     render([33m<[39m[33mPage[39m [33m/[39m[33m>[39m)
     [90m 26 |[39m     
    [31m[1m>[22m[39m[90m 27 |[39m     [36mconst[39m layout [33m=[39m screen[33m.[39mgetByTestId([32m'layout'[39m)
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 28 |[39m     [36mconst[39m homePage [33m=[39m screen[33m.[39mgetByTestId([32m'homepage'[39m)
     [90m 29 |[39m     
     [90m 30 |[39m     expect(layout)[33m.[39mtoBeInTheDocument()[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/app/page.test.tsx:27:27)

  ● Home Page › renders HomePage component within Layout

    TestingLibraryElementError: Unable to find an element by: [data-testid="layout"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"min-h-screen transition-all duration-1000 feed-container opacity-100 scale-100"[39m
          [33mstyle[39m=[32m"z-index: 1;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"fixed inset-0 text-neutral-100 flex flex-col items-center justify-center p-6 z-[99999]"[39m
            [33mstyle[39m=[32m"background: white; height: 100vh;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"absolute top-1/2 left-1/2"[39m
              [33mstyle[39m=[32m"transform: translate(-33%, -18%);"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative max-w-4xl h-[360px] flex items-center justify-center gap-12"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"0"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-1/2 h-8 rounded-full"[39m
                    [33mstyle[39m=[32m"width: var(--shadowBase); background: radial-gradient(ellipse at center, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.0) 70%); animation: shadowAnim var(--duration) infinite ease-in-out; animation-delay: 0s;"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33maria-label[39m=[32m"Loading hotdog 1"[39m
                    [33mclass[39m=[32m"will-change-transform select-none hotdog"[39m
                    [33mdata-anim[39m=[32m"true"[39m
                    [33mdata-testid[39m=[32m"hotdog-wrapper-0"[39m
                    [33mrole[39m=[32m"img"[39m
                    [33mstyle[39m=[32m"transform-origin: center bottom; offset-path: path('M 0 0 C -15 -88, -9 -176, 0 -220, 9 -176, 15 -88, 0 0'); offset-rotate: 0deg; animation-delay: 0s, 0s; --duration: 1.6s; --sqx: 1.282051282051282; --sqy: 0.78; --liftx: 0.9538344143456696; --lifty: 1.0484; --airx: 0.8920606601248885; --airy: 1.121; --shadowBase: 240px;"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mheight[39m=[32m"120"[39m
                      [33mviewBox[39m=[32m"0 0 300 120"[39m
                      [33mwidth[39m=[32m"300"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<defs>[39m
                        [36m<filter[39m
                          [33mheight[39m=[32m"140%"[39m
                          [33mid[39m=[32m"shadow"[39m
                          [33mwidth[39m=[32m"140%"[39m
                          [33mx[39m=[32m"-20%"[39m
                          [33my[39m=[32m"-20%"[39m
                        [36m>[39m
                          [36m<fedropshadow[39m
                            [33mdx[39m=[32m"0"[39m
                            [33mdy[39m=[32m"2"[39m
                            [33mflood-color[39m=[32m"#000"[39m
                            [33mflood-opacity[39m=[32m".35"[39m
                            [33mstdDeviation[39m=[32m"2"[39m
                          [36m/>[39m
                        [36m</filter>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"bun"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#F6D18B"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#E5B873"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"dog"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#C94C31"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#A73D28"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                      [36m</defs>[39m
                      [36m<g[39m
                        [33mfilter[39m=[32m"url(#shadow)"[39m
                      [36m>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"58"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#dog)"[39m
                          [33mheight[39m=[32m"60"[39m
                          [33mrx[39m=[32m"30"[39m
                          [33mwidth[39m=[32m"260"[39m
                          [33mx[39m=[32m"20"[39m
                          [33my[39m=[32m"30"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"18"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M 30 54 C 60 34, 90 74, 120 54 S 180 34, 210 54 240 74, 270 54"[39m
                          [33mfill[39m=[32m"none"[39m
                          [33mstroke[39m=[32m"#F4D43F"[39m
                          [33mstroke-linecap[39m=[32m"round"[39m
                          [33mstroke-linejoin[39m=[32m"round"[39m
                          [33mstroke-width[39m=[32m"10"[39m
                        [36m/>[39m
                      [36m</g>[39m
                    [36m</svg>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-...

    [0m [90m 35 |[39m     render([33m<[39m[33mPage[39m [33m/[39m[33m>[39m)
     [90m 36 |[39m     
    [31m[1m>[22m[39m[90m 37 |[39m     [36mconst[39m layout [33m=[39m screen[33m.[39mgetByTestId([32m'layout'[39m)
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 38 |[39m     [36mconst[39m homePage [33m=[39m screen[33m.[39mgetByTestId([32m'homepage'[39m)
     [90m 39 |[39m     [36mconst[39m main [33m=[39m screen[33m.[39mgetByRole([32m'main'[39m)
     [90m 40 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/app/page.test.tsx:37:27)

  ● Home Page › has proper page structure

    TestingLibraryElementError: Unable to find an element by: [data-testid="header"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"min-h-screen transition-all duration-1000 feed-container opacity-100 scale-100"[39m
          [33mstyle[39m=[32m"z-index: 1;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"fixed inset-0 text-neutral-100 flex flex-col items-center justify-center p-6 z-[99999]"[39m
            [33mstyle[39m=[32m"background: white; height: 100vh;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"absolute top-1/2 left-1/2"[39m
              [33mstyle[39m=[32m"transform: translate(-33%, -18%);"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative max-w-4xl h-[360px] flex items-center justify-center gap-12"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"0"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-1/2 h-8 rounded-full"[39m
                    [33mstyle[39m=[32m"width: var(--shadowBase); background: radial-gradient(ellipse at center, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.0) 70%); animation: shadowAnim var(--duration) infinite ease-in-out; animation-delay: 0s;"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33maria-label[39m=[32m"Loading hotdog 1"[39m
                    [33mclass[39m=[32m"will-change-transform select-none hotdog"[39m
                    [33mdata-anim[39m=[32m"true"[39m
                    [33mdata-testid[39m=[32m"hotdog-wrapper-0"[39m
                    [33mrole[39m=[32m"img"[39m
                    [33mstyle[39m=[32m"transform-origin: center bottom; offset-path: path('M 0 0 C -15 -88, -9 -176, 0 -220, 9 -176, 15 -88, 0 0'); offset-rotate: 0deg; animation-delay: 0s, 0s; --duration: 1.6s; --sqx: 1.282051282051282; --sqy: 0.78; --liftx: 0.9538344143456696; --lifty: 1.0484; --airx: 0.8920606601248885; --airy: 1.121; --shadowBase: 240px;"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mheight[39m=[32m"120"[39m
                      [33mviewBox[39m=[32m"0 0 300 120"[39m
                      [33mwidth[39m=[32m"300"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<defs>[39m
                        [36m<filter[39m
                          [33mheight[39m=[32m"140%"[39m
                          [33mid[39m=[32m"shadow"[39m
                          [33mwidth[39m=[32m"140%"[39m
                          [33mx[39m=[32m"-20%"[39m
                          [33my[39m=[32m"-20%"[39m
                        [36m>[39m
                          [36m<fedropshadow[39m
                            [33mdx[39m=[32m"0"[39m
                            [33mdy[39m=[32m"2"[39m
                            [33mflood-color[39m=[32m"#000"[39m
                            [33mflood-opacity[39m=[32m".35"[39m
                            [33mstdDeviation[39m=[32m"2"[39m
                          [36m/>[39m
                        [36m</filter>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"bun"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#F6D18B"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#E5B873"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"dog"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#C94C31"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#A73D28"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                      [36m</defs>[39m
                      [36m<g[39m
                        [33mfilter[39m=[32m"url(#shadow)"[39m
                      [36m>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"58"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#dog)"[39m
                          [33mheight[39m=[32m"60"[39m
                          [33mrx[39m=[32m"30"[39m
                          [33mwidth[39m=[32m"260"[39m
                          [33mx[39m=[32m"20"[39m
                          [33my[39m=[32m"30"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"18"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M 30 54 C 60 34, 90 74, 120 54 S 180 34, 210 54 240 74, 270 54"[39m
                          [33mfill[39m=[32m"none"[39m
                          [33mstroke[39m=[32m"#F4D43F"[39m
                          [33mstroke-linecap[39m=[32m"round"[39m
                          [33mstroke-linejoin[39m=[32m"round"[39m
                          [33mstroke-width[39m=[32m"10"[39m
                        [36m/>[39m
                      [36m</g>[39m
                    [36m</svg>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-...

    [0m [90m 47 |[39m     
     [90m 48 |[39m     [90m// Check that the page includes header, main content, and footer[39m
    [31m[1m>[22m[39m[90m 49 |[39m     [36mconst[39m header [33m=[39m screen[33m.[39mgetByTestId([32m'header'[39m)
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 50 |[39m     [36mconst[39m main [33m=[39m screen[33m.[39mgetByRole([32m'main'[39m)
     [90m 51 |[39m     [36mconst[39m footer [33m=[39m screen[33m.[39mgetByTestId([32m'footer'[39m)
     [90m 52 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/app/page.test.tsx:49:27)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL __tests__/app/api/admin/social/endpoints.test.ts
  ● Test suite failed to run

    ReferenceError: Cannot access 'mockQuery' before initialization

    [0m [90m 24 |[39m [36mconst[39m mockQuery [33m=[39m jest[33m.[39mfn()
     [90m 25 |[39m jest[33m.[39mmock([32m'@/lib/db-query-builder'[39m[33m,[39m () [33m=>[39m ({
    [31m[1m>[22m[39m[90m 26 |[39m   query[33m:[39m mockQuery
     [90m    |[39m          [31m[1m^[22m[39m
     [90m 27 |[39m }))
     [90m 28 |[39m
     [90m 29 |[39m describe([32m'Social Media API Endpoints'[39m[33m,[39m () [33m=>[39m {[0m

      at mockQuery (__tests__/app/api/admin/social/endpoints.test.ts:26:10)
      at Object.<anonymous> (app/api/admin/social/performance/route.ts:13:25)
      at Object.<anonymous> (__tests__/app/api/admin/social/endpoints.test.ts:20:17)

FAIL __tests__/lib/services/reddit-scanning.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/got/dist/source/index.js:1
    import create from './create.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

    [0m [90m 20 |[39m   is_gallery[33m:[39m boolean
     [90m 21 |[39m   is_video[33m:[39m boolean
    [31m[1m>[22m[39m[90m 22 |[39m   over_18[33m:[39m boolean
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 23 |[39m   spoiler[33m:[39m boolean
     [90m 24 |[39m   stickied[33m:[39m boolean
     [90m 25 |[39m   link_flair_text[33m?[39m[33m:[39m string[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/services/redditClient.ts:22:53)
      at Object.<anonymous> (lib/services/reddit.ts:14:23)
      at Object.<anonymous> (lib/services/reddit-scanning.ts:19:17)
      at Object.<anonymous> (__tests__/lib/services/reddit-scanning.test.ts:39:25)

FAIL __tests__/app/api/admin/schedule/forecast/refill/route.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../../../lib/jobs/schedule-content-production' from '__tests__/app/api/admin/schedule/forecast/refill/route.test.ts'

    [0m [90m  7 |[39m
     [90m  8 |[39m [90m// Mock the schedule-content-production functions[39m
    [31m[1m>[22m[39m[90m  9 |[39m jest[33m.[39mmock([32m'../../../../../../lib/jobs/schedule-content-production'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 10 |[39m   generateDailySchedule[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 11 |[39m   refillTwoDays[33m:[39m jest[33m.[39mfn()
     [90m 12 |[39m }))[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (__tests__/app/api/admin/schedule/forecast/refill/route.test.ts:9:6)

FAIL __tests__/lib/services/health.test.ts
  ● HealthService › checkContentQueue › should return warning for low pending items

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "healthy"

    [0m [90m 253 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m healthService[33m.[39mcheckContentQueue()
     [90m 254 |[39m
    [31m[1m>[22m[39m[90m 255 |[39m       expect(result[33m.[39mstatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mWARNING[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 256 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'running low'[39m)
     [90m 257 |[39m     })
     [90m 258 |[39m[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:255:29)

  ● HealthService › checkContentQueue › should return warning for large backlog

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "healthy"

    [0m [90m 270 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m healthService[33m.[39mcheckContentQueue()
     [90m 271 |[39m
    [31m[1m>[22m[39m[90m 272 |[39m       expect(result[33m.[39mstatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mWARNING[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 273 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'large backlog'[39m)
     [90m 274 |[39m     })
     [90m 275 |[39m   })[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:272:29)

  ● HealthService › checkScheduler › should return critical status for no recent posts

    expect(received).toBe(expected) // Object.is equality

    Expected: "critical"
    Received: "healthy"

    [0m [90m 302 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m healthService[33m.[39mcheckScheduler()
     [90m 303 |[39m
    [31m[1m>[22m[39m[90m 304 |[39m       expect(result[33m.[39mstatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mCRITICAL[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 305 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'No posts have been made'[39m)
     [90m 306 |[39m     })
     [90m 307 |[39m[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:304:29)

  ● HealthService › checkScheduler › should return warning for low posting activity

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "healthy"

    [0m [90m 317 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m healthService[33m.[39mcheckScheduler()
     [90m 318 |[39m
    [31m[1m>[22m[39m[90m 319 |[39m       expect(result[33m.[39mstatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mWARNING[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 320 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Only 3 posts made'[39m)
     [90m 321 |[39m     })
     [90m 322 |[39m   })[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:319:29)

  ● HealthService › generateHealthReport › should set overall status to warning if any check is warning

    expect(received).toBe(expected) // Object.is equality

    Expected: "warning"
    Received: "critical"

    [0m [90m 418 |[39m       [36mconst[39m report [33m=[39m [36mawait[39m healthService[33m.[39mgenerateHealthReport()
     [90m 419 |[39m
    [31m[1m>[22m[39m[90m 420 |[39m       expect(report[33m.[39moverallStatus)[33m.[39mtoBe([33mHealthStatus[39m[33m.[39m[33mWARNING[39m)
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 421 |[39m       expect(report[33m.[39msummary[33m.[39mwarningChecks)[33m.[39mtoBeGreaterThan([35m0[39m)
     [90m 422 |[39m     })
     [90m 423 |[39m[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:420:36)

  ● HealthService › isHealthy › should return true for healthy system

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 475 |[39m     it([32m'should return true for healthy system'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 476 |[39m       [36mconst[39m isHealthy [33m=[39m [36mawait[39m isolatedHealthService[33m.[39misHealthy()
    [31m[1m>[22m[39m[90m 477 |[39m       expect(isHealthy)[33m.[39mtoBe([36mtrue[39m)
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 478 |[39m     })
     [90m 479 |[39m
     [90m 480 |[39m     it([32m'should return true for system with warnings'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:477:25)

  ● HealthService › isHealthy › should return true for system with warnings

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 486 |[39m
     [90m 487 |[39m       [36mconst[39m isHealthy [33m=[39m [36mawait[39m isolatedHealthService[33m.[39misHealthy()
    [31m[1m>[22m[39m[90m 488 |[39m       expect(isHealthy)[33m.[39mtoBe([36mtrue[39m) [90m// Warnings are still considered "healthy"[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 489 |[39m     })
     [90m 490 |[39m
     [90m 491 |[39m     it([32m'should return false for critical system'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/lib/services/health.test.ts:488:25)

FAIL __tests__/lib/jobs/schedule-content-production-refill.test.ts
  ● Two-Day Refill Functionality › ensureDayFilled › should fill day with normal strategy when pool is adequate

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:75:22)

  ● Two-Day Refill Functionality › ensureDayFilled › should use aggressive fallback when normal strategy insufficient

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:122:22)

  ● Two-Day Refill Functionality › ensureDayFilled › should handle small pool gracefully when aggressive fallback still insufficient

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:165:22)

  ● Two-Day Refill Functionality › ensureDayFilled › should handle ET boundary correctness for date calculations

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:193:22)

  ● Two-Day Refill Functionality › refillTwoDays › should orchestrate both today and tomorrow with aggressive fallback

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at refillTwoDays (lib/jobs/schedule-content-production.ts:998:23)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:261:22)

  ● Two-Day Refill Functionality › refillTwoDays › should handle tomorrow calculation correctly across month boundaries

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at refillTwoDays (lib/jobs/schedule-content-production.ts:998:23)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:294:22)

  ● Two-Day Refill Functionality › refillTwoDays › should log structured summary with emoji indicators

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at refillTwoDays (lib/jobs/schedule-content-production.ts:998:23)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:311:7)

  ● Two-Day Refill Functionality › Platform Counter Accuracy › should accurately reflect platform adds per individual day

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:358:22)

  ● Two-Day Refill Functionality › Platform Counter Accuracy › should combine platform counters correctly across two days

    TypeError: Cannot read properties of undefined (reading 'map')

    [0m [90m 643 |[39m [32m      `[39m[33m,[39m alreadyScheduledIds)
     [90m 644 |[39m       
    [31m[1m>[22m[39m[90m 645 |[39m       candidates [33m=[39m candidatesResult[33m.[39mrows[33m.[39mmap(row [33m=>[39m ({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 646 |[39m         [33m...[39mrow[33m,[39m
     [90m 647 |[39m         status[33m:[39m row[33m.[39mcontent_status [33m||[39m [32m'approved'[39m[33m,[39m
     [90m 648 |[39m         scheduled_for[33m:[39m row[33m.[39mscheduled_post_time[33m,[39m[0m

      at map (lib/jobs/schedule-content-production.ts:645:42)
      at ensureDayFilled (lib/jobs/schedule-content-production.ts:858:20)
      at refillTwoDays (lib/jobs/schedule-content-production.ts:998:23)
      at Object.<anonymous> (__tests__/lib/jobs/schedule-content-production-refill.test.ts:399:22)

FAIL __tests__/integration/multi-platform-content-flow.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/got/dist/source/index.js:1
    import create from './create.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

    [0m [90m 20 |[39m   is_gallery[33m:[39m boolean
     [90m 21 |[39m   is_video[33m:[39m boolean
    [31m[1m>[22m[39m[90m 22 |[39m   over_18[33m:[39m boolean
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 23 |[39m   spoiler[33m:[39m boolean
     [90m 24 |[39m   stickied[33m:[39m boolean
     [90m 25 |[39m   link_flair_text[33m?[39m[33m:[39m string[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/services/redditClient.ts:22:53)
      at Object.<anonymous> (lib/services/reddit.ts:14:23)
      at Object.<anonymous> (lib/services/reddit-scanning.ts:19:17)
      at Object.<anonymous> (__tests__/integration/multi-platform-content-flow.test.tsx:12:25)

FAIL tests/api/queue-health.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/api/queue-health.test.ts'

    [0m [90m 3 |[39m [36mimport[39m { [33mNextRequest[39m } [36mfrom[39m [32m'next/server'[39m
     [90m 4 |[39m [36mimport[39m { db } [36mfrom[39m [32m'@/lib/db'[39m
    [31m[1m>[22m[39m[90m 5 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 6 |[39m [90m// Mock dependencies[39m
     [90m 7 |[39m vi[33m.[39mmock([32m'@/lib/services/logging'[39m[33m,[39m () [33m=>[39m ({
     [90m 8 |[39m   loggingService[33m:[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/api/queue-health.test.ts:5:17)

FAIL __tests__/lib/services/reddit.test.ts
  ● Test suite failed to run

    Cannot find module 'snoowrap' from '__tests__/lib/services/reddit.test.ts'

    [0m [90m 32 |[39m
     [90m 33 |[39m [90m// Mock snoowrap to prevent real API calls[39m
    [31m[1m>[22m[39m[90m 34 |[39m jest[33m.[39mmock([32m'snoowrap'[39m[33m,[39m () [33m=>[39m {
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 35 |[39m   [36mreturn[39m jest[33m.[39mfn()[33m.[39mmockImplementation(() [33m=>[39m ({
     [90m 36 |[39m     config[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 37 |[39m     getSubreddit[33m:[39m jest[33m.[39mfn()[33m.[39mmockReturnValue({[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (__tests__/lib/services/reddit.test.ts:34:6)

FAIL __tests__/app/api/admin/analytics/route.test.ts
  ● /api/admin/analytics › GET › should return comprehensive analytics data

    expect(received).toMatchObject(expected)

    - Expected  - 46
    + Received  + 21

      Object {
    -   "contentTrends": ArrayContaining [
    -     ObjectContaining {
    -       "approvalRate": Any<Number>,
    -       "approvedContent": Any<Number>,
    -       "avgConfidence": Any<Number>,
    -       "date": Any<String>,
    -       "postedContent": Any<Number>,
    -       "totalContent": Any<Number>,
    +   "data": Object {
    +     "performance": Object {
    +       "approval_rate": 0.75,
    +       "avg_confidence_score": 0.82,
    +       "posting_frequency": 6,
          },
    +     "timestamp": "2025-10-17T21:43:15.601Z",
    +     "trends": Object {
    +       "daily_content": Array [
    +         5,
    +         7,
    +         4,
    +         8,
    +         6,
    +         9,
    +         5,
            ],
    -   "engagementMetrics": ObjectContaining {
    -     "avgEngagementScore": Any<Number>,
    -     "topPerformingContent": Any<Array>,
    -     "totalViews": Any<Number>,
    -   },
    -   "filteringMetrics": ObjectContaining {
    -     "avgConfidenceScore": Any<Number>,
    -     "flaggedCount": Any<Number>,
    -     "flaggedPatterns": Any<Array>,
    -     "totalAnalyzed": Any<Number>,
    -   },
    -   "overview": Object {
    -     "approvalRate": 0.6,
    -     "approvedContent": 90,
    -     "avgConfidenceScore": 0.78,
    -     "errorRate": 0.05,
    -     "postedContent": 60,
    -     "queueSize": 30,
    -     "totalContent": 150,
    -   },
    -   "platformMetrics": ArrayContaining [
    -     ObjectContaining {
    -       "approvalRate": Any<Number>,
    -       "avgConfidenceScore": Any<Number>,
    -       "platform": "reddit",
    -       "totalApproved": Any<Number>,
    -       "totalPosted": Any<Number>,
    -       "totalScanned": Any<Number>,
    +       "platform_distribution": Object {
    +         "giphy": 20,
    +         "imgur": 20,
    +         "reddit": 35,
    +         "youtube": 25,
            },
    -   ],
    -   "platformTrends": ObjectContaining {
    -     "reddit": Any<Array>,
    -     "youtube": Any<Array>,
          },
    -   "queueHealth": ObjectContaining {
    -     "errorRate": 0.05,
    -     "isHealthy": Any<Boolean>,
    -     "lastPostTime": "2025-09-12T08:00:00Z",
    -     "lastScanTime": "2025-09-12T10:00:00Z",
    -     "queueSize": 30,
        },
    +   "success": true,
      }

    [0m [90m 54 |[39m
     [90m 55 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 56 |[39m       expect(data)[33m.[39mtoMatchObject({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 57 |[39m         overview[33m:[39m {
     [90m 58 |[39m           totalContent[33m:[39m [35m150[39m[33m,[39m
     [90m 59 |[39m           approvedContent[33m:[39m [35m90[39m[33m,[39m[0m

      at Object.toMatchObject (__tests__/app/api/admin/analytics/route.test.ts:56:20)

  ● /api/admin/analytics › GET › should return analytics with minimal data when services return empty results

    TypeError: Cannot read properties of undefined (reading 'totalContent')

    [0m [90m 154 |[39m
     [90m 155 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 156 |[39m       expect(data[33m.[39moverview[33m.[39mtotalContent)[33m.[39mtoBe([35m0[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 157 |[39m       expect(data[33m.[39mplatformMetrics)[33m.[39mtoEqual([])
     [90m 158 |[39m       expect(data[33m.[39mcontentTrends)[33m.[39mtoEqual([])
     [90m 159 |[39m       expect(data[33m.[39mqueueHealth[33m.[39misHealthy)[33m.[39mtoBe([36mtrue[39m) [90m// Empty queue is healthy[39m[0m

      at Object.totalContent (__tests__/app/api/admin/analytics/route.test.ts:156:28)

  ● /api/admin/analytics › GET › should handle platform performance errors gracefully

    TypeError: Cannot read properties of undefined (reading 'totalContent')

    [0m [90m 194 |[39m
     [90m 195 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 196 |[39m       expect(data[33m.[39moverview[33m.[39mtotalContent)[33m.[39mtoBe([35m100[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 197 |[39m       expect(data[33m.[39mplatformTrends)[33m.[39mtoEqual(expect[33m.[39mobjectContaining({
     [90m 198 |[39m         reddit[33m:[39m [{ date[33m:[39m [32m'2025-09-10'[39m[33m,[39m posts[33m:[39m [35m5[39m }][33m,[39m
     [90m 199 |[39m         youtube[33m:[39m [][33m,[39m[0m

      at Object.totalContent (__tests__/app/api/admin/analytics/route.test.ts:196:28)

  ● /api/admin/analytics › GET › should return 500 error when dashboard metrics fails

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

    [0m [90m 210 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 211 |[39m
    [31m[1m>[22m[39m[90m 212 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 213 |[39m       expect(data)[33m.[39mtoEqual({
     [90m 214 |[39m         error[33m:[39m [32m'Failed to fetch analytics data'[39m
     [90m 215 |[39m       })[0m

      at Object.toBe (__tests__/app/api/admin/analytics/route.test.ts:212:31)

  ● /api/admin/analytics › GET › should return 500 error when content trends fails

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

    [0m [90m 243 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 244 |[39m
    [31m[1m>[22m[39m[90m 245 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 246 |[39m       expect(data)[33m.[39mtoEqual({
     [90m 247 |[39m         error[33m:[39m [32m'Failed to fetch analytics data'[39m
     [90m 248 |[39m       })[0m

      at Object.toBe (__tests__/app/api/admin/analytics/route.test.ts:245:31)

  ● /api/admin/analytics › GET › should validate response structure matches frontend expectations

    expect(received).toHaveProperty(path)

    Expected path: "overview"
    Received path: []

    Received value: {"data": {"performance": {"approval_rate": 0.75, "avg_confidence_score": 0.82, "posting_frequency": 6}, "timestamp": "2025-10-17T21:43:15.639Z", "trends": {"daily_content": [5, 7, 4, 8, 6, 9, 5], "platform_distribution": {"giphy": 20, "imgur": 20, "reddit": 35, "youtube": 25}}}, "success": true}

    [0m [90m 314 |[39m
     [90m 315 |[39m       [90m// Validate all required fields are present and correctly typed[39m
    [31m[1m>[22m[39m[90m 316 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'overview'[39m)
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 317 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'platformMetrics'[39m)
     [90m 318 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'engagementMetrics'[39m)
     [90m 319 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'filteringMetrics'[39m)[0m

      at Object.toHaveProperty (__tests__/app/api/admin/analytics/route.test.ts:316:20)

  ● /api/admin/analytics › GET › should correctly calculate queue health status

    TypeError: Cannot read properties of undefined (reading 'isHealthy')

    [0m [90m 379 |[39m
     [90m 380 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 381 |[39m       expect(data[33m.[39mqueueHealth[33m.[39misHealthy)[33m.[39mtoBe([36mfalse[39m) [90m// Should be unhealthy[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 382 |[39m       expect(data[33m.[39mqueueHealth[33m.[39mqueueSize)[33m.[39mtoBe([35m150[39m)
     [90m 383 |[39m       expect(data[33m.[39mqueueHealth[33m.[39merrorRate)[33m.[39mtoBe([35m0.15[39m)
     [90m 384 |[39m     })[0m

      at Object.isHealthy (__tests__/app/api/admin/analytics/route.test.ts:381:31)

FAIL __tests__/app/api/admin/content-scheduled.test.ts
  ● Admin Content API - Scheduled Filter › Scheduled Content Filter › should log diagnostic information correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "�� [ContentAPI] Scheduled filter - hasStatus:", Any<Boolean>, StringContaining "hasScheduledFor:", Any<Boolean>
    Received
           1: "[AdminContentAPI] GET /api/admin/content request received"
           2: "[AdminContentAPI] Environment:", "test"
           3: "[AdminContentAPI] Database URL set:", false

    Number of calls: 29

    [0m [90m 263 |[39m
     [90m 264 |[39m       [90m// Verify diagnostic logging occurred[39m
    [31m[1m>[22m[39m[90m 265 |[39m       expect(consoleLogSpy)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 266 |[39m         expect[33m.[39mstringContaining([32m'�� [ContentAPI] Scheduled filter - hasStatus:'[39m)[33m,[39m
     [90m 267 |[39m         expect[33m.[39many([33mBoolean[39m)[33m,[39m
     [90m 268 |[39m         expect[33m.[39mstringContaining([32m'hasScheduledFor:'[39m)[33m,[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/app/api/admin/content-scheduled.test.ts:265:29)

FAIL __tests__/lib/services/scheduling.test.ts
  ● SchedulingService › getScheduleConfig › should return existing config when available

    expect(received).toEqual(expected) // deep equality

    - Expected  - 9
    + Received  + 0

      Object {
    -   "created_at": 2024-01-15T10:30:00.000Z,
    -   "id": 1,
        "is_enabled": true,
    -   "meal_times": Array [
    -     "08:00",
    -     "12:00",
    -     "18:00",
    -   ],
    -   "timezone": "America/New_York",
    -   "updated_at": 2024-01-15T10:30:00.000Z,
      }

    [0m [90m 46 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetScheduleConfig()
     [90m 47 |[39m       
    [31m[1m>[22m[39m[90m 48 |[39m       expect(result)[33m.[39mtoEqual(mockConfig)
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 49 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 50 |[39m         [32m'SELECT * FROM schedule_config ORDER BY created_at DESC LIMIT 1'[39m
     [90m 51 |[39m       )[0m

      at Object.toEqual (__tests__/lib/services/scheduling.test.ts:48:22)

  ● SchedulingService › getScheduleConfig › should create default config when none exists

    expect(received).toEqual(expected) // deep equality

    - Expected  - 12
    + Received  +  0

      Object {
    -   "created_at": 2024-01-15T10:30:00.000Z,
    -   "id": 1,
        "is_enabled": true,
    -   "meal_times": Array [
    -     "08:00",
    -     "10:00",
    -     "12:00",
    -     "15:00",
    -     "18:00",
    -     "20:00",
    -   ],
    -   "timezone": "America/New_York",
    -   "updated_at": 2024-01-15T10:30:00.000Z,
      }

    [0m [90m 80 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetScheduleConfig()
     [90m 81 |[39m       
    [31m[1m>[22m[39m[90m 82 |[39m       expect(result)[33m.[39mtoEqual(mockDefaultConfig)
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 83 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)
     [90m 84 |[39m     })
     [90m 85 |[39m   })[0m

      at Object.toEqual (__tests__/lib/services/scheduling.test.ts:82:22)

  ● SchedulingService › updateScheduleConfig › should update existing config with new values

    TypeError: _scheduling.schedulingService.updateScheduleConfig is not a function

    [0m [90m 118 |[39m         })
     [90m 119 |[39m
    [31m[1m>[22m[39m[90m 120 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mupdateScheduleConfig({
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 121 |[39m         meal_times[33m:[39m [[32m'09:00'[39m[33m,[39m [32m'13:00'[39m[33m,[39m [32m'19:00'[39m][33m,[39m
     [90m 122 |[39m         timezone[33m:[39m [32m'America/Los_Angeles'[39m
     [90m 123 |[39m       })[0m

      at Object.updateScheduleConfig (__tests__/lib/services/scheduling.test.ts:120:46)

  ● SchedulingService › getNextScheduledTime › should return next meal time today if available

    TypeError: _scheduling.schedulingService.getNextScheduledTime is not a function

    [0m [90m 157 |[39m       jest[33m.[39msetSystemTime([36mnew[39m [33mDate[39m([32m'2024-01-15T15:30:00Z'[39m)) [90m// 10:30 AM EST[39m
     [90m 158 |[39m
    [31m[1m>[22m[39m[90m 159 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetNextScheduledTime()
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 160 |[39m       
     [90m 161 |[39m       expect(result)[33m.[39mtoBeDefined()
     [90m 162 |[39m       expect(result[33m?[39m[33m.[39mgetHours())[33m.[39mtoBe([35m12[39m) [90m// Next meal time is 12:00 PM[39m[0m

      at Object.getNextScheduledTime (__tests__/lib/services/scheduling.test.ts:159:46)

  ● SchedulingService › getNextScheduledTime › should return first meal time tomorrow if no more today

    TypeError: _scheduling.schedulingService.getNextScheduledTime is not a function

    [0m [90m 192 |[39m       jest[33m.[39msetSystemTime([36mnew[39m [33mDate[39m([32m'2024-01-15T01:00:00Z'[39m)) [90m// 8:00 PM EST[39m
     [90m 193 |[39m
    [31m[1m>[22m[39m[90m 194 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetNextScheduledTime()
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 195 |[39m       
     [90m 196 |[39m       expect(result)[33m.[39mtoBeDefined()
     [90m 197 |[39m       expect(result[33m?[39m[33m.[39mgetHours())[33m.[39mtoBe([35m8[39m) [90m// 8:00 AM tomorrow[39m[0m

      at Object.getNextScheduledTime (__tests__/lib/services/scheduling.test.ts:194:46)

  ● SchedulingService › isPostingTime › should return false when current time does not match meal time

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 257 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39misPostingTime()
     [90m 258 |[39m       
    [31m[1m>[22m[39m[90m 259 |[39m       expect(result)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 260 |[39m     })
     [90m 261 |[39m
     [90m 262 |[39m     it([32m'should return false when scheduling is disabled'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/lib/services/scheduling.test.ts:259:22)

  ● SchedulingService › isPostingTime › should return false when scheduling is disabled

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 280 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39misPostingTime()
     [90m 281 |[39m       
    [31m[1m>[22m[39m[90m 282 |[39m       expect(result)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 283 |[39m     })
     [90m 284 |[39m   })
     [90m 285 |[39m[0m

      at Object.toBe (__tests__/lib/services/scheduling.test.ts:282:22)

  ● SchedulingService › selectRandomContent › should return random approved content

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 1

      Object {
    -   "content_text": "Test hotdog content",
    -   "content_type": "text",
    +   "content_text": "test",
        "id": 1,
    -   "is_approved": true,
    -   "is_posted": false,
      }

    [0m [90m 304 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mselectRandomContent()
     [90m 305 |[39m       
    [31m[1m>[22m[39m[90m 306 |[39m       expect(result)[33m.[39mtoEqual(mockContent)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 307 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 308 |[39m         expect[33m.[39mstringContaining([32m'SELECT * FROM content_queue'[39m)[33m,[39m
     [90m 309 |[39m         expect[33m.[39many([33mArray[39m)[0m

      at Object.toEqual (__tests__/lib/services/scheduling.test.ts:306:22)

  ● SchedulingService › selectRandomContent › should return null when no approved content available

    expect(received).toBeNull()

    Received: {"content_text": "test", "id": 1}

    [0m [90m 322 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mselectRandomContent()
     [90m 323 |[39m       
    [31m[1m>[22m[39m[90m 324 |[39m       expect(result)[33m.[39mtoBeNull()
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 325 |[39m     })
     [90m 326 |[39m   })
     [90m 327 |[39m[0m

      at Object.toBeNull (__tests__/lib/services/scheduling.test.ts:324:22)

  ● SchedulingService › getPostingSchedule › should return complete posting schedule information

    TypeError: _scheduling.schedulingService.getPostingSchedule is not a function

    [0m [90m 355 |[39m       jest[33m.[39msetSystemTime([36mnew[39m [33mDate[39m([32m'2024-01-15T15:30:00Z'[39m)) [90m// 10:30 AM EST[39m
     [90m 356 |[39m
    [31m[1m>[22m[39m[90m 357 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetPostingSchedule()
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 358 |[39m       
     [90m 359 |[39m       expect(result)[33m.[39mtoHaveProperty([32m'nextPostTime'[39m)
     [90m 360 |[39m       expect(result)[33m.[39mtoHaveProperty([32m'nextMealTime'[39m)[0m

      at Object.getPostingSchedule (__tests__/lib/services/scheduling.test.ts:357:46)

  ● SchedulingService › pauseScheduling › should disable scheduling

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "UPDATE schedule_config", ArrayContaining [false]

    Number of calls: 0

    [0m [90m 397 |[39m       [36mawait[39m schedulingService[33m.[39mpauseScheduling()
     [90m 398 |[39m       
    [31m[1m>[22m[39m[90m 399 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 400 |[39m         expect[33m.[39mstringContaining([32m'UPDATE schedule_config'[39m)[33m,[39m
     [90m 401 |[39m         expect[33m.[39marrayContaining([[36mfalse[39m])
     [90m 402 |[39m       )[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/services/scheduling.test.ts:399:28)

  ● SchedulingService › resumeScheduling › should enable scheduling

    TypeError: _scheduling.schedulingService.resumeScheduling is not a function

    [0m [90m 433 |[39m         })
     [90m 434 |[39m
    [31m[1m>[22m[39m[90m 435 |[39m       [36mawait[39m schedulingService[33m.[39mresumeScheduling()
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 436 |[39m       
     [90m 437 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 438 |[39m         expect[33m.[39mstringContaining([32m'UPDATE schedule_config'[39m)[33m,[39m[0m

      at Object.resumeScheduling (__tests__/lib/services/scheduling.test.ts:435:31)

  ● SchedulingService › error handling › should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"is_enabled": true}

    [0m [90m 446 |[39m       mockDb[33m.[39mquery[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))
     [90m 447 |[39m
    [31m[1m>[22m[39m[90m 448 |[39m       [36mawait[39m expect(schedulingService[33m.[39mgetScheduleConfig())[33m.[39mrejects[33m.[39mtoThrow([32m'Database connection failed'[39m)
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 449 |[39m     })
     [90m 450 |[39m
     [90m 451 |[39m     it([32m'should return null on error in getNextScheduledTime'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/services/scheduling.test.ts:448:13)

  ● SchedulingService › error handling › should return null on error in getNextScheduledTime

    TypeError: _scheduling.schedulingService.getNextScheduledTime is not a function

    [0m [90m 452 |[39m       mockDb[33m.[39mquery[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))
     [90m 453 |[39m
    [31m[1m>[22m[39m[90m 454 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39mgetNextScheduledTime()
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 455 |[39m       
     [90m 456 |[39m       expect(result)[33m.[39mtoBeNull()
     [90m 457 |[39m     })[0m

      at Object.getNextScheduledTime (__tests__/lib/services/scheduling.test.ts:454:46)

  ● SchedulingService › error handling › should return false on error in isPostingTime

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 462 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m schedulingService[33m.[39misPostingTime()
     [90m 463 |[39m       
    [31m[1m>[22m[39m[90m 464 |[39m       expect(result)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 465 |[39m     })
     [90m 466 |[39m   })
     [90m 467 |[39m })[0m

      at Object.toBe (__tests__/lib/services/scheduling.test.ts:464:22)

FAIL __tests__/lib/services/queue-monitor.test.ts
  ● QueueMonitorService › checkQueueHealth › should create alert for high pending count

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 189 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m queueMonitorService[33m.[39mcheckQueueHealth()
     [90m 190 |[39m
    [31m[1m>[22m[39m[90m 191 |[39m       expect(result[33m.[39mhealthy)[33m.[39mtoBe([36mtrue[39m) [90m// Still healthy despite high pending[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 192 |[39m       expect(result[33m.[39malerts)[33m.[39mtoHaveLength([35m1[39m)
     [90m 193 |[39m       expect(result[33m.[39malerts[[35m0[39m][33m.[39malert_type)[33m.[39mtoBe([32m'high_pending'[39m)
     [90m 194 |[39m     })[0m

      at Object.toBe (__tests__/lib/services/queue-monitor.test.ts:191:30)

  ● QueueMonitorService › getActiveAlerts › should return active alerts

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "WHERE acknowledged = false", Any<Array>
    Received: "SELECT * FROM queue_alerts 
             WHERE acknowledged = false 
             ORDER BY created_at DESC 
             LIMIT 50"

    Number of calls: 1

    [0m [90m 285 |[39m
     [90m 286 |[39m       expect(result)[33m.[39mtoEqual(mockAlerts)
    [31m[1m>[22m[39m[90m 287 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 288 |[39m         expect[33m.[39mstringContaining([32m'WHERE acknowledged = false'[39m)[33m,[39m
     [90m 289 |[39m         expect[33m.[39many([33mArray[39m)
     [90m 290 |[39m       )[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/services/queue-monitor.test.ts:287:28)

  ● QueueMonitorService › acknowledgeAllAlerts › should acknowledge all alerts

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "UPDATE queue_alerts", Any<Array>
    Received: "UPDATE queue_alerts 
             SET acknowledged = true, acknowledged_at = NOW() 
             WHERE acknowledged = false"

    Number of calls: 1

    [0m [90m 337 |[39m       [36mawait[39m queueMonitorService[33m.[39macknowledgeAllAlerts()
     [90m 338 |[39m
    [31m[1m>[22m[39m[90m 339 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 340 |[39m         expect[33m.[39mstringContaining([32m'UPDATE queue_alerts'[39m)[33m,[39m
     [90m 341 |[39m         expect[33m.[39many([33mArray[39m)
     [90m 342 |[39m       )[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/services/queue-monitor.test.ts:339:28)

  ● QueueMonitorService › error handling › should handle errors in alert creation

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"alerts": [], "healthy": false, "queueStatus": null}

    [0m [90m 437 |[39m       mockDb[33m.[39mquery[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))
     [90m 438 |[39m
    [31m[1m>[22m[39m[90m 439 |[39m       [36mawait[39m expect(queueMonitorService[33m.[39mcheckQueueHealth())[33m.[39mrejects[33m.[39mtoThrow([32m'Database error'[39m)
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 440 |[39m     })
     [90m 441 |[39m   })
     [90m 442 |[39m })[0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/services/queue-monitor.test.ts:439:13)

FAIL __tests__/lib/services/posting.test.ts
  ● PostingService › postContent › should successfully post approved content

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 68 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m postingService[33m.[39mpostContent([35m1[39m[33m,[39m [36mfalse[39m)
     [90m 69 |[39m
    [31m[1m>[22m[39m[90m 70 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 71 |[39m       expect(result[33m.[39mcontentId)[33m.[39mtoBe([35m1[39m)
     [90m 72 |[39m       expect(mockClient[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith([32m'BEGIN'[39m)
     [90m 73 |[39m       expect(mockClient[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith([32m'COMMIT'[39m)[0m

      at Object.toBe (__tests__/lib/services/posting.test.ts:70:30)

  ● PostingService › getQueueStatus › should detect low queue status

    expect(received).toBe(expected) // Object.is equality

    Expected: "critical"
    Received: "low"

    [0m [90m 145 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m postingService[33m.[39mgetQueueStatus()
     [90m 146 |[39m
    [31m[1m>[22m[39m[90m 147 |[39m       expect(result[33m.[39malertLevel)[33m.[39mtoBe([32m'critical'[39m)
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 148 |[39m       expect(result[33m.[39misHealthy)[33m.[39mtoBe([36mfalse[39m)
     [90m 149 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Critical: Only 3 approved items remaining'[39m)
     [90m 150 |[39m     })[0m

      at Object.toBe (__tests__/lib/services/posting.test.ts:147:33)

  ● PostingService › processScheduledPost › should process scheduled post successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 340 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m postingService[33m.[39mprocessScheduledPost()
     [90m 341 |[39m
    [31m[1m>[22m[39m[90m 342 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 343 |[39m       expect(result[33m.[39mcontentId)[33m.[39mtoBe([35m1[39m)
     [90m 344 |[39m     })
     [90m 345 |[39m[0m

      at Object.toBe (__tests__/lib/services/posting.test.ts:342:30)

FAIL tests/integration/auto-scan-manager.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/integration/auto-scan-manager.test.ts'

    [0m [90m 3 |[39m [36mimport[39m { queueManager } [36mfrom[39m [32m'@/lib/services/queue-manager'[39m
     [90m 4 |[39m [36mimport[39m { db } [36mfrom[39m [32m'@/lib/db'[39m
    [31m[1m>[22m[39m[90m 5 |[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 6 |[39m [90m// Mock external dependencies[39m
     [90m 7 |[39m vi[33m.[39mmock([32m'@/lib/services/logging'[39m[33m,[39m () [33m=>[39m ({
     [90m 8 |[39m   loggingService[33m:[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/integration/auto-scan-manager.test.ts:5:17)

FAIL __tests__/regression/component-regression-simple.test.tsx
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1057:18)
      at node_modules/@jest/core/build/index.js:1127:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL __tests__/app/api/admin/queue/schedule/route.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../../lib/services/schedule-content' from '__tests__/app/api/admin/queue/schedule/route.test.ts'

    [0m [90m  7 |[39m
     [90m  8 |[39m [90m// Mock the schedule service[39m
    [31m[1m>[22m[39m[90m  9 |[39m jest[33m.[39mmock([32m'../../../../../lib/services/schedule-content'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 10 |[39m   scheduleNextBatch[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 11 |[39m   getUpcomingSchedule[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 12 |[39m   cancelScheduledContent[33m:[39m jest[33m.[39mfn()[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (__tests__/app/api/admin/queue/schedule/route.test.ts:9:6)

FAIL __tests__/app/api/admin/schedule.test.ts
  ● /api/admin/schedule › GET › should return complete schedule information

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 5

      Object {
    -   "created_at": 2025-09-17T15:45:32.314Z,
    +   "created_at": "2025-10-10T21:43:18.157Z",
        "id": 1,
        "is_enabled": true,
        "meal_times": Array [
          "08:00",
          "12:00",
    +     "15:00",
          "18:00",
    +     "21:00",
    +     "23:30",
        ],
        "timezone": "America/New_York",
    -   "updated_at": 2025-09-17T15:45:32.314Z,
    +   "updated_at": "2025-10-17T19:43:18.157Z",
      }

    [0m [90m 144 |[39m
     [90m 145 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
    [31m[1m>[22m[39m[90m 146 |[39m       expect(data[33m.[39mconfig)[33m.[39mtoEqual(mockConfig)
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 147 |[39m       expect(data[33m.[39mschedule)[33m.[39mtoEqual(mockSchedule)
     [90m 148 |[39m       expect(data[33m.[39mqueueStatus)[33m.[39mtoEqual(mockQueueStatus)
     [90m 149 |[39m       expect(data[33m.[39mstats)[33m.[39mtoEqual(mockStats)[0m

      at Object.toEqual (__tests__/app/api/admin/schedule.test.ts:146:27)

  ● /api/admin/schedule › GET › should handle service errors

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

    [0m [90m 160 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 161 |[39m
    [31m[1m>[22m[39m[90m 162 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 163 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Service error'[39m)
     [90m 164 |[39m     })
     [90m 165 |[39m   })[0m

      at Object.toBe (__tests__/app/api/admin/schedule.test.ts:162:31)

  ● /api/admin/schedule › PUT › should update schedule configuration successfully

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "created_at": 2025-10-17T21:43:18.208Z,
    +   "created_at": "2025-10-10T21:43:18.208Z",
        "id": 1,
        "is_enabled": true,
        "meal_times": Array [
          "09:00",
          "13:00",
          "19:00",
        ],
        "timezone": "America/Los_Angeles",
    -   "updated_at": 2025-10-17T21:43:18.208Z,
    +   "updated_at": "2025-10-17T21:43:18.208Z",
      }

    [0m [90m 197 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
     [90m 198 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
    [31m[1m>[22m[39m[90m 199 |[39m       expect(data[33m.[39mconfig)[33m.[39mtoEqual(updatedConfig)
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 200 |[39m       expect(schedulingService[33m.[39mupdateScheduleConfig)[33m.[39mtoHaveBeenCalledWith({
     [90m 201 |[39m         meal_times[33m:[39m [[32m'09:00'[39m[33m,[39m [32m'13:00'[39m[33m,[39m [32m'19:00'[39m][33m,[39m
     [90m 202 |[39m         timezone[33m:[39m [32m'America/Los_Angeles'[39m[33m,[39m[0m

      at Object.toEqual (__tests__/app/api/admin/schedule.test.ts:199:27)

  ● /api/admin/schedule › PUT › should handle partial updates

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"is_enabled": false}

    Number of calls: 0

    [0m [90m 298 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
     [90m 299 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
    [31m[1m>[22m[39m[90m 300 |[39m       expect(schedulingService[33m.[39mupdateScheduleConfig)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                                      [31m[1m^[22m[39m
     [90m 301 |[39m         is_enabled[33m:[39m [36mfalse[39m
     [90m 302 |[39m       })
     [90m 303 |[39m     })[0m

      at Object.toHaveBeenCalledWith (__tests__/app/api/admin/schedule.test.ts:300:54)

  ● /api/admin/schedule › PUT › should handle service errors

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

    [0m [90m 319 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 320 |[39m
    [31m[1m>[22m[39m[90m 321 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 322 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Service error'[39m)
     [90m 323 |[39m     })
     [90m 324 |[39m[0m

      at Object.toBe (__tests__/app/api/admin/schedule.test.ts:321:31)

  ● /api/admin/schedule › PUT › should reject invalid time formats

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 200

    [0m [90m 363 |[39m         [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 364 |[39m
    [31m[1m>[22m[39m[90m 365 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 366 |[39m         expect(data[33m.[39merror)[33m.[39mtoContain([32m'Invalid time format'[39m)
     [90m 367 |[39m       }
     [90m 368 |[39m     })[0m

      at Object.toBe (__tests__/app/api/admin/schedule.test.ts:365:33)

FAIL __tests__/scripts/route-inventory.test.ts
  ● Route Inventory Script › Route Detection › should detect HTTP methods in route files

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 38 |[39m       
     [90m 39 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 40 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeFileContent [36mas[39m any)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 41 |[39m       
     [90m 42 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 43 |[39m       [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:40:23)

  ● Route Inventory Script › Route Detection › should detect authentication requirements

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 58 |[39m       
     [90m 59 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/admin/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 60 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(authRouteContent)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 61 |[39m       
     [90m 62 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 63 |[39m       [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:60:23)

  ● Route Inventory Script › Route Detection › should identify public routes correctly

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 74 |[39m       
     [90m 75 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/health/route.ts'[39m])
    [31m[1m>[22m[39m[90m 76 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(publicRouteContent)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 77 |[39m       
     [90m 78 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 79 |[39m       [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:76:23)

  ● Route Inventory Script › Route Detection › should convert file paths to API paths correctly

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 93 |[39m       [36mfor[39m ([36mconst[39m [filePath[33m,[39m expectedPath] [36mof[39m testCases) {
     [90m 94 |[39m         mockGlob[33m.[39mmockResolvedValue([filePath])
    [31m[1m>[22m[39m[90m 95 |[39m         mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue([32m'export function GET() {}'[39m)
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 96 |[39m         
     [90m 97 |[39m         [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 98 |[39m         [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:95:25)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: EdgeAuthUtils.verifyJWT

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: Authorization: Bearer

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: x-admin-token

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: authHeader

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: AUTH_TOKEN

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: authenticate()

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: requiresAuth: true

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: checkAuth()

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: validateToken()

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should detect auth pattern: getAuthenticatedUser()

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 125 |[39m       
     [90m 126 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 127 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 128 |[39m       
     [90m 129 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 130 |[39m       [0m

      at mockResolvedValue (__tests__/scripts/route-inventory.test.ts:127:23)

  ● Route Inventory Script › Authentication Detection Patterns › should automatically mark admin routes as requiring auth

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 140 |[39m       
     [90m 141 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/admin/users/route.ts'[39m])
    [31m[1m>[22m[39m[90m 142 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(routeContent)
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 143 |[39m       
     [90m 144 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 145 |[39m       [0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:142:23)

  ● Route Inventory Script › Inventory Generation › should generate complete inventory with metadata

    TypeError: mockFs.readFile.mockImplementation is not a function

    [0m [90m 164 |[39m       
     [90m 165 |[39m       mockGlob[33m.[39mmockResolvedValue(routeFiles)
    [31m[1m>[22m[39m[90m 166 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockImplementation([36masync[39m (path[33m:[39m string) [33m=>[39m {
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 167 |[39m         [36mconst[39m index [33m=[39m routeFiles[33m.[39mfindIndex(file [33m=>[39m path[33m.[39mincludes(file))
     [90m 168 |[39m         [36mreturn[39m routeContents[index] [33m||[39m [32m''[39m
     [90m 169 |[39m       })[0m

      at Object.mockImplementation (__tests__/scripts/route-inventory.test.ts:166:23)

  ● Route Inventory Script › Inventory Generation › should handle empty or invalid route files

    TypeError: mockFs.readFile.mockResolvedValueOnce is not a function

    [0m [90m 186 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/empty/route.ts'[39m[33m,[39m [32m'app/api/invalid/route.ts'[39m])
     [90m 187 |[39m       mockFs[33m.[39mreadFile
    [31m[1m>[22m[39m[90m 188 |[39m         [33m.[39mmockResolvedValueOnce([32m''[39m) [90m// empty file[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 189 |[39m         [33m.[39mmockResolvedValueOnce([32m'const x = 1; // no exports'[39m) [90m// no HTTP methods[39m
     [90m 190 |[39m       
     [90m 191 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()[0m

      at Object.mockResolvedValueOnce (__tests__/scripts/route-inventory.test.ts:188:10)

  ● Route Inventory Script › Inventory Generation › should handle file read errors gracefully

    TypeError: mockFs.readFile.mockRejectedValue is not a function

    [0m [90m 197 |[39m     it([32m'should handle file read errors gracefully'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 198 |[39m       mockGlob[33m.[39mmockResolvedValue([[32m'app/api/test/route.ts'[39m])
    [31m[1m>[22m[39m[90m 199 |[39m       mockFs[33m.[39mreadFile[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'File not found'[39m))
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 200 |[39m       
     [90m 201 |[39m       [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 202 |[39m       [0m

      at Object.mockRejectedValue (__tests__/scripts/route-inventory.test.ts:199:23)

  ● Route Inventory Script › Inventory Output › should write inventory to correct location

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function mkdir]

    [0m [90m 226 |[39m       [36mawait[39m writeInventory(mockInventory)
     [90m 227 |[39m       
    [31m[1m>[22m[39m[90m 228 |[39m       expect(mockFs[33m.[39mmkdir)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 229 |[39m         expect[33m.[39mstringContaining([32m'docs'[39m)[33m,[39m
     [90m 230 |[39m         { recursive[33m:[39m [36mtrue[39m }
     [90m 231 |[39m       )[0m

      at Object.toHaveBeenCalledWith (__tests__/scripts/route-inventory.test.ts:228:28)

  ● Route Inventory Script › Inventory Output › should produce valid JSON output

    TypeError: Cannot read properties of undefined (reading 'calls')

    [0m [90m 267 |[39m       [36mawait[39m writeInventory(mockInventory)
     [90m 268 |[39m       
    [31m[1m>[22m[39m[90m 269 |[39m       [36mconst[39m writtenContent [33m=[39m mockFs[33m.[39mwriteFile[33m.[39mmock[33m.[39mcalls[[35m0[39m][[35m1[39m] [36mas[39m string
     [90m     |[39m                                                    [31m[1m^[22m[39m
     [90m 270 |[39m       expect(() [33m=>[39m [33mJSON[39m[33m.[39mparse(writtenContent))[33m.[39mnot[33m.[39mtoThrow()
     [90m 271 |[39m       
     [90m 272 |[39m       [36mconst[39m parsed [33m=[39m [33mJSON[39m[33m.[39mparse(writtenContent)[0m

      at Object.calls (__tests__/scripts/route-inventory.test.ts:269:52)

  ● Route Inventory Script › Route Classification › should correctly classify different route types

    TypeError: mockFs.readFile.mockResolvedValue is not a function

    [0m [90m 309 |[39m       [36mfor[39m ([36mconst[39m testRoute [36mof[39m testRoutes) {
     [90m 310 |[39m         mockGlob[33m.[39mmockResolvedValue([testRoute[33m.[39mpath])
    [31m[1m>[22m[39m[90m 311 |[39m         mockFs[33m.[39mreadFile[33m.[39mmockResolvedValue(testRoute[33m.[39mcontent)
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 312 |[39m         
     [90m 313 |[39m         [36mconst[39m inventory [33m=[39m [36mawait[39m generateInventory()
     [90m 314 |[39m         [36mconst[39m route [33m=[39m inventory[33m.[39mroutes[[35m0[39m][0m

      at Object.mockResolvedValue (__tests__/scripts/route-inventory.test.ts:311:25)

FAIL __tests__/integration/openapi-drift.test.ts
  ● OpenAPI Drift Detection Integration › Critical Routes Coverage › should have all critical routes in codebase

    expect(received).toContain(expected) // indexOf

    Expected value: "/api/admin/schedule/forecast"
    Received array: ["/admin/alerts/history", "/admin/analytics", "/admin/analyze-duplicates", "/admin/auth", "/admin/auth/me", "/admin/auth/refresh", "/admin/auto-approve", "/admin/auto-scan", "/admin/automation-health", "/admin/automation-status", …]

    [0m [90m 78 |[39m       criticalRoutes[33m.[39mforEach(criticalRoute [33m=>[39m {
     [90m 79 |[39m         [36mconst[39m apiPath [33m=[39m [32m`/api${criticalRoute}`[39m
    [31m[1m>[22m[39m[90m 80 |[39m         expect(actualPaths)[33m.[39mtoContain(apiPath)
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 81 |[39m       })
     [90m 82 |[39m     })
     [90m 83 |[39m   })[0m

      at toContain (__tests__/integration/openapi-drift.test.ts:80:29)
          at Array.forEach (<anonymous>)
      at Object.forEach (__tests__/integration/openapi-drift.test.ts:78:22)

  ● OpenAPI Drift Detection Integration › Route Documentation Drift › should not have undocumented routes (excluding ignored)

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 195
    Received array:  ["/admin/alerts/history", "/admin/analytics", "/admin/analyze-duplicates", "/admin/auth", "/admin/auth/me", "/admin/auth/refresh", "/admin/auto-approve", "/admin/auto-scan", "/admin/automation-health", "/admin/automation-status", …]

    [0m [90m 117 |[39m       [36mif[39m (undocumentedRoutes[33m.[39mlength [33m>[39m [35m0[39m) {
     [90m 118 |[39m         console[33m.[39merror([32m'Undocumented routes found:'[39m[33m,[39m undocumentedRoutes)
    [31m[1m>[22m[39m[90m 119 |[39m         expect(undocumentedRoutes)[33m.[39mtoHaveLength([35m0[39m)
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 120 |[39m       }
     [90m 121 |[39m     })
     [90m 122 |[39m[0m

      at Object.toHaveLength (__tests__/integration/openapi-drift.test.ts:119:36)

  ● OpenAPI Drift Detection Integration › Route Documentation Drift › should not have documented routes that do not exist in codebase

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 6
    Received array:  ["/api/admin/schedule/forecast", "/api/admin/schedule/forecast/refill", "/api/admin/schedule/forecast/reconcile", "/api/admin/health/deep", "/api/admin/health/auth-token", "/api/system/metrics"]

    [0m [90m 136 |[39m       [36mif[39m (nonExistentRoutes[33m.[39mlength [33m>[39m [35m0[39m) {
     [90m 137 |[39m         console[33m.[39merror([32m'Documented routes not found in codebase:'[39m[33m,[39m nonExistentRoutes)
    [31m[1m>[22m[39m[90m 138 |[39m         expect(nonExistentRoutes)[33m.[39mtoHaveLength([35m0[39m)
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 139 |[39m       }
     [90m 140 |[39m     })
     [90m 141 |[39m   })[0m

      at Object.toHaveLength (__tests__/integration/openapi-drift.test.ts:138:35)

  ● OpenAPI Drift Detection Integration › Method Coverage › should document all HTTP methods present in code

    expect(received).toContain(expected) // indexOf

    Expected value: "POST"
    Received array: ["GET"]

    [0m [90m 205 |[39m           
     [90m 206 |[39m           route[33m.[39mmethods[33m.[39mforEach((method[33m:[39m string) [33m=>[39m {
    [31m[1m>[22m[39m[90m 207 |[39m             expect(specMethods)[33m.[39mtoContain(method)
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 208 |[39m           })
     [90m 209 |[39m         }
     [90m 210 |[39m       })[0m

      at toContain (__tests__/integration/openapi-drift.test.ts:207:33)
          at Array.forEach (<anonymous>)
      at forEach (__tests__/integration/openapi-drift.test.ts:206:25)
          at Array.forEach (<anonymous>)
      at Object.forEach (__tests__/integration/openapi-drift.test.ts:197:29)

FAIL __tests__/lib/services/posting-service.test.ts
  ● Posting Service › postScheduledContentDue › should handle posting errors gracefully

    expect(received).toContain(expected) // indexOf

    Expected substring: "Failed to post scheduled content"
    Received string:    "Failed to post content 1: Database error"

    [0m [90m 145 |[39m       expect(result[33m.[39msummary[33m.[39mtotalPosted)[33m.[39mtoBe([35m0[39m)
     [90m 146 |[39m       expect(result[33m.[39merrors)[33m.[39mtoHaveLength([35m1[39m)
    [31m[1m>[22m[39m[90m 147 |[39m       expect(result[33m.[39merrors[[35m0[39m])[33m.[39mtoContain([32m'Failed to post scheduled content'[39m)
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 148 |[39m     })
     [90m 149 |[39m
     [90m 150 |[39m     it([32m'should return early when no scheduled content due'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toContain (__tests__/lib/services/posting-service.test.ts:147:32)

  ● Posting Service › posting order generation › should fallback to timestamp when order query fails

    expect(received).toBeGreaterThan(expected)

    Matcher error: received value must be a number or bigint

    Received has value: undefined

    [0m [90m 280 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m postContent(mockContent[33m,[39m [36mfalse[39m)
     [90m 281 |[39m
    [31m[1m>[22m[39m[90m 282 |[39m       expect(result[33m.[39mpostOrder)[33m.[39mtoBeGreaterThan([33mDate[39m[33m.[39mnow() [33m-[39m [35m1000[39m)
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 283 |[39m     })
     [90m 284 |[39m   })
     [90m 285 |[39m })[0m

      at Object.toBeGreaterThan (__tests__/lib/services/posting-service.test.ts:282:32)

FAIL __tests__/lib/db-connection.test.ts
  ● Database Connection Logic › Production Environment - Strict Requirements › should throw error when DATABASE_URL is missing in production

    expect(received).toThrow(expected)

    Expected substring: "DATABASE_URL is required in production environment"

    Received function did not throw

    [0m [90m 50 |[39m         [36mdelete[39m require[33m.[39mcache[require[33m.[39mresolve([32m'@/lib/db'[39m)][33m;[39m
     [90m 51 |[39m         require([32m'@/lib/db'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       })[33m.[39mtoThrow([32m'DATABASE_URL is required in production environment'[39m)[33m;[39m
     [90m    |[39m          [31m[1m^[22m[39m
     [90m 53 |[39m       
     [90m 54 |[39m       expect(mockConsoleError)[33m.[39mtoHaveBeenCalledWith(
     [90m 55 |[39m         [32m'�� FATAL ERROR: DATABASE_URL not set in production — Supabase connection required.'[39m[0m

      at Object.toThrow (__tests__/lib/db-connection.test.ts:52:10)

  ● Database Connection Logic › Production Environment - Strict Requirements › should throw error when DATABASE_URL is not a Supabase URL in production

    expect(received).toThrow(expected)

    Expected substring: "DATABASE_URL must be a Supabase connection string in production"

    Received function did not throw

    [0m [90m 63 |[39m         [36mdelete[39m require[33m.[39mcache[require[33m.[39mresolve([32m'@/lib/db'[39m)][33m;[39m
     [90m 64 |[39m         require([32m'@/lib/db'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 65 |[39m       })[33m.[39mtoThrow([32m'DATABASE_URL must be a Supabase connection string in production'[39m)[33m;[39m
     [90m    |[39m          [31m[1m^[22m[39m
     [90m 66 |[39m       
     [90m 67 |[39m       expect(mockConsoleError)[33m.[39mtoHaveBeenCalledWith(
     [90m 68 |[39m         [32m'�� FATAL ERROR: DATABASE_URL in production must be a Supabase connection string.'[39m[0m

      at Object.toThrow (__tests__/lib/db-connection.test.ts:65:10)

  ● Database Connection Logic › Production Environment - Strict Requirements › should succeed with valid Supabase URL in production

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using Supabase Postgres via DATABASE_URL"

    Number of calls: 0

    [0m [90m 78 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 79 |[39m       
    [31m[1m>[22m[39m[90m 80 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 81 |[39m         [32m'✅ [DB INIT] Using Supabase Postgres via DATABASE_URL'[39m
     [90m 82 |[39m       )[33m;[39m
     [90m 83 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:80:30)

  ● Database Connection Logic › Production Environment - Strict Requirements › should not fall back to POSTGRES_URL in production

    expect(received).toThrow(expected)

    Expected substring: "DATABASE_URL is required in production environment"

    Received function did not throw

    [0m [90m 89 |[39m         [36mdelete[39m require[33m.[39mcache[require[33m.[39mresolve([32m'@/lib/db'[39m)][33m;[39m
     [90m 90 |[39m         require([32m'@/lib/db'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 91 |[39m       })[33m.[39mtoThrow([32m'DATABASE_URL is required in production environment'[39m)[33m;[39m
     [90m    |[39m          [31m[1m^[22m[39m
     [90m 92 |[39m     })[33m;[39m
     [90m 93 |[39m   })[33m;[39m
     [90m 94 |[39m[0m

      at Object.toThrow (__tests__/lib/db-connection.test.ts:91:10)

  ● Database Connection Logic › Development Environment - Flexible Requirements › should use Supabase when DATABASE_URL is provided in development

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (development)"

    Number of calls: 0

    [0m [90m 106 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 107 |[39m       
    [31m[1m>[22m[39m[90m 108 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 109 |[39m         [32m'✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (development)'[39m
     [90m 110 |[39m       )[33m;[39m
     [90m 111 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:108:30)

  ● Database Connection Logic › Development Environment - Flexible Requirements › should fall back to SQLite when DATABASE_URL is missing in development

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using SQLite (development fallback)"

    Number of calls: 0

    [0m [90m 117 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 118 |[39m       
    [31m[1m>[22m[39m[90m 119 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 120 |[39m         [32m'✅ [DB INIT] Using SQLite (development fallback)'[39m
     [90m 121 |[39m       )[33m;[39m
     [90m 122 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:119:30)

  ● Database Connection Logic › Development Environment - Flexible Requirements › should not use POSTGRES_URL in development (prefers SQLite fallback)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using SQLite (development fallback)"

    Number of calls: 0

    [0m [90m 130 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 131 |[39m       
    [31m[1m>[22m[39m[90m 132 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 133 |[39m         [32m'✅ [DB INIT] Using SQLite (development fallback)'[39m
     [90m 134 |[39m       )[33m;[39m
     [90m 135 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:132:30)

  ● Database Connection Logic › Preview Environment - Hybrid Requirements › should use Supabase when DATABASE_URL is provided in preview

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (preview)"

    Number of calls: 0

    [0m [90m 150 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 151 |[39m       
    [31m[1m>[22m[39m[90m 152 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 153 |[39m         [32m'✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (preview)'[39m
     [90m 154 |[39m       )[33m;[39m
     [90m 155 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:152:30)

  ● Database Connection Logic › Preview Environment - Hybrid Requirements › should fall back to SQLite when DATABASE_URL is missing in preview

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using SQLite (preview fallback)"

    Number of calls: 0

    [0m [90m 161 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 162 |[39m       
    [31m[1m>[22m[39m[90m 163 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 164 |[39m         [32m'✅ [DB INIT] Using SQLite (preview fallback)'[39m
     [90m 165 |[39m       )[33m;[39m
     [90m 166 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:163:30)

  ● Database Connection Logic › Other Environments - Fallback Logic › should use Supabase when DATABASE_URL is provided in test environment

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (other environment)"

    Number of calls: 0

    [0m [90m 187 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 188 |[39m       
    [31m[1m>[22m[39m[90m 189 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 190 |[39m         [32m'✅ [DB INIT] Using Supabase Postgres via DATABASE_URL (other environment)'[39m
     [90m 191 |[39m       )[33m;[39m
     [90m 192 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:189:30)

  ● Database Connection Logic › Other Environments - Fallback Logic › should use PostgreSQL pool when no DATABASE_URL in test environment

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "✅ [DB INIT] Using PostgreSQL connection pool (other environment)"

    Number of calls: 0

    [0m [90m 198 |[39m       })[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 199 |[39m       
    [31m[1m>[22m[39m[90m 200 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 201 |[39m         [32m'✅ [DB INIT] Using PostgreSQL connection pool (other environment)'[39m
     [90m 202 |[39m       )[33m;[39m
     [90m 203 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:200:30)

  ● Database Connection Logic › Logging and Environment Detection › should log comprehensive environment information

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "�� [DB INIT] Starting database initialization..."

    Number of calls: 0

    [0m [90m 213 |[39m       require([32m'@/lib/db'[39m)[33m;[39m
     [90m 214 |[39m       
    [31m[1m>[22m[39m[90m 215 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith([32m'�� [DB INIT] Starting database initialization...'[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 216 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith([32m'[DB INIT] Environment detection:'[39m[33m,[39m {
     [90m 217 |[39m         [33mNODE_ENV[39m[33m:[39m [32m'production'[39m[33m,[39m
     [90m 218 |[39m         [33mVERCEL_ENV[39m[33m:[39m [32m'production'[39m[33m,[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:215:30)

  ● Database Connection Logic › Logging and Environment Detection › should detect different DATABASE_URL types correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[DB INIT] Environment detection:", ObjectContaining {"DATABASE_URL_TYPE": "supabase"}

    Number of calls: 0

    [0m [90m 256 |[39m         require([32m'@/lib/db'[39m)[33m;[39m
     [90m 257 |[39m         
    [31m[1m>[22m[39m[90m 258 |[39m         expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith([32m'[DB INIT] Environment detection:'[39m[33m,[39m 
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 259 |[39m           expect[33m.[39mobjectContaining({
     [90m 260 |[39m             [33mDATABASE_URL_TYPE[39m[33m:[39m expectedType
     [90m 261 |[39m           })[0m

      at toHaveBeenCalledWith (__tests__/lib/db-connection.test.ts:258:32)
          at Array.forEach (<anonymous>)
      at Object.forEach (__tests__/lib/db-connection.test.ts:243:17)

FAIL __tests__/api/content.test.ts
  ● /api/content › GET /api/content › should return paginated content successfully

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

    @@ -4,19 +4,19 @@
          "content_text": "Amazing hotdog!",
          "content_type": "text",
          "id": 1,
          "original_url": "https://reddit.com/r/hotdogs/test/1",
          "post_order": 1,
    -     "posted_at": 2024-01-01T12:00:00.000Z,
    +     "posted_at": "2024-01-01T12:00:00.000Z",
          "source_platform": "reddit",
        },
        Object {
          "content_queue_id": 2,
          "content_text": "Another hotdog!",
          "content_type": "image",
          "id": 2,
          "original_url": "https://flickr.com/photos/test/2",
          "post_order": 2,
    -     "posted_at": 2024-01-01T11:00:00.000Z,
    +     "posted_at": "2024-01-01T11:00:00.000Z",
          "source_platform": "flickr",
        },
      ]

    [0m [90m 57 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 58 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)
    [31m[1m>[22m[39m[90m 59 |[39m       expect(data[33m.[39mdata[33m.[39mcontent)[33m.[39mtoEqual(mockContent)
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 60 |[39m       expect(data[33m.[39mdata[33m.[39mpagination)[33m.[39mtoEqual({
     [90m 61 |[39m         page[33m:[39m [35m1[39m[33m,[39m
     [90m 62 |[39m         limit[33m:[39m [35m10[39m[33m,[39m[0m

      at Object.toEqual (__tests__/api/content.test.ts:59:33)

  ● /api/content › GET /api/content › should validate page parameter

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 161 |[39m       
     [90m 162 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 163 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 164 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Page number must be greater than 0'[39m)
     [90m 165 |[39m       expect(data[33m.[39mcode)[33m.[39mtoBe([32m'INVALID_PAGE'[39m)
     [90m 166 |[39m     })[0m

      at Object.toBe (__tests__/api/content.test.ts:163:28)

  ● /api/content › GET /api/content › should validate limit parameter - too small

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 173 |[39m       
     [90m 174 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 175 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 176 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Limit must be between 1 and 100'[39m)
     [90m 177 |[39m       expect(data[33m.[39mcode)[33m.[39mtoBe([32m'INVALID_LIMIT'[39m)
     [90m 178 |[39m     })[0m

      at Object.toBe (__tests__/api/content.test.ts:175:28)

  ● /api/content › GET /api/content › should validate limit parameter - too large

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 185 |[39m       
     [90m 186 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 187 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 188 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Limit must be between 1 and 100'[39m)
     [90m 189 |[39m       expect(data[33m.[39mcode)[33m.[39mtoBe([32m'INVALID_LIMIT'[39m)
     [90m 190 |[39m     })[0m

      at Object.toBe (__tests__/api/content.test.ts:187:28)

  ● /api/content › GET /api/content › should validate order parameter

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 197 |[39m       
     [90m 198 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 199 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 200 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Order must be either "asc" or "desc"'[39m)
     [90m 201 |[39m       expect(data[33m.[39mcode)[33m.[39mtoBe([32m'INVALID_ORDER'[39m)
     [90m 202 |[39m     })[0m

      at Object.toBe (__tests__/api/content.test.ts:199:28)

  ● /api/content › GET /api/content › should reject non-GET methods

    expect(received).toBe(expected) // Object.is equality

    Expected: 405
    Received: 200

    [0m [90m 206 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)
     [90m 207 |[39m       
    [31m[1m>[22m[39m[90m 208 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m405[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 209 |[39m       
     [90m 210 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 211 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[0m

      at Object.toBe (__tests__/api/content.test.ts:208:31)

  ● /api/content › GET /api/content › should handle database query errors

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 224 |[39m       
     [90m 225 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
    [31m[1m>[22m[39m[90m 226 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 227 |[39m       expect(data[33m.[39merror)[33m.[39mtoBe([32m'Database connection failed'[39m)
     [90m 228 |[39m     })
     [90m 229 |[39m[0m

      at Object.toBe (__tests__/api/content.test.ts:226:28)

  ● /api/content › GET /api/content › should include security headers

    expect(received).toBe(expected) // Object.is equality

    Expected: "nosniff"
    Received: undefined

    [0m [90m 236 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)
     [90m 237 |[39m       
    [31m[1m>[22m[39m[90m 238 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-Content-Type-Options'[39m))[33m.[39mtoBe([32m'nosniff'[39m)
     [90m     |[39m                                                              [31m[1m^[22m[39m
     [90m 239 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-Frame-Options'[39m))[33m.[39mtoBe([32m'DENY'[39m)
     [90m 240 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-XSS-Protection'[39m))[33m.[39mtoBe([32m'1; mode=block'[39m)
     [90m 241 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Referrer-Policy'[39m))[33m.[39mtoBe([32m'strict-origin-when-cross-origin'[39m)[0m

      at Object.toBe (__tests__/api/content.test.ts:238:62)

  ● /api/content › GET /api/content › should have valid response format

    expect(received).toHaveProperty(path)

    Expected path: "timestamp"
    Received path: []

    Received value: {"data": {"content": [], "pagination": {"hasNextPage": false, "hasPreviousPage": false, "limit": 10, "nextPage": null, "page": 1, "previousPage": null, "total": 5, "totalPages": 1}}, "message": "No content found", "success": true}

    [0m [90m 254 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'success'[39m)
     [90m 255 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'data'[39m)
    [31m[1m>[22m[39m[90m 256 |[39m       expect(data)[33m.[39mtoHaveProperty([32m'timestamp'[39m)
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 257 |[39m       expect(data[33m.[39mdata)[33m.[39mtoHaveProperty([32m'content'[39m)
     [90m 258 |[39m       expect(data[33m.[39mdata)[33m.[39mtoHaveProperty([32m'pagination'[39m)
     [90m 259 |[39m       expect([33mArray[39m[33m.[39misArray(data[33m.[39mdata[33m.[39mcontent))[33m.[39mtoBe([36mtrue[39m)[0m

      at Object.toHaveProperty (__tests__/api/content.test.ts:256:20)

FAIL __tests__/api/admin/content.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/jose/dist/webapi/index.js:1
    export { compactDecrypt } from './jwe/compact/decrypt.js';
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 24 |[39m [90m   * Get JWT secret as Uint8Array for jose library[39m
     [90m 25 |[39m [90m   */[39m
    [31m[1m>[22m[39m[90m 26 |[39m   [36mprivate[39m [36mstatic[39m getJWTSecret()[33m:[39m [33mUint8Array[39m {
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 27 |[39m     [36mconst[39m secret [33m=[39m process[33m.[39menv[33m.[39m[33mJWT_SECRET[39m
     [90m 28 |[39m     [36mif[39m ([33m![39msecret) {
     [90m 29 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'JWT_SECRET environment variable is required'[39m)[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/auth-edge.ts:26:15)
      at Object.<anonymous> (app/api/admin/content/route.ts:24:19)
      at Object.<anonymous> (__tests__/api/admin/content.test.ts:7:16)

FAIL __tests__/app/admin/queue-scheduled.test.tsx
  ● Admin Queue - Scheduled Content › should display scheduled content when scheduled filter is selected

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:147:11)

  ● Admin Queue - Scheduled Content › should show empty state when no scheduled content exists

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:200:11)

  ● Admin Queue - Scheduled Content › should handle API errors gracefully when loading scheduled content

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:235:11)

  ● Admin Queue - Scheduled Content › should refresh scheduled content when refresh button is clicked

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:248:11)

  ● Admin Queue - Scheduled Content › should display all required scheduled content fields

    invariant expected app router to be mounted

    [0m [90m 42 |[39m   updateUrl [33m=[39m [36mtrue[39m
     [90m 43 |[39m }[33m:[39m [33mUseUrlSortOptions[39m [33m=[39m {}) {
    [31m[1m>[22m[39m[90m 44 |[39m   [36mconst[39m router [33m=[39m useRouter()
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 45 |[39m   [36mconst[39m searchParams [33m=[39m useSearchParams()
     [90m 46 |[39m   
     [90m 47 |[39m   [90m// Initialize state from URL or defaults[39m[0m

      at useRouter (node_modules/next/src/client/components/navigation.ts:128:11)
      at useUrlSort (hooks/useUrlSort.ts:44:27)
      at ContentQueue (components/admin/ContentQueue.tsx:52:17)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/queue-scheduled.test.tsx:279:11)

FAIL __tests__/components/admin/AdminLogin.test.tsx
  ● AdminLogin › should render login form with basic elements

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:61:24)

  ● AdminLogin › should handle username input changes

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:71:24)

  ● AdminLogin › should handle password input changes

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:80:24)

  ● AdminLogin › should toggle password visibility

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:89:24)

  ● AdminLogin › should handle remember me checkbox

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:102:24)

  ● AdminLogin › should call login function on form submission

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:120:24)

  ● AdminLogin › should show loading state during login

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:144:24)

  ● AdminLogin › should show error message on login failure

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:168:24)

  ● AdminLogin › should validate required username

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:184:24)

  ● AdminLogin › should validate required password

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:198:24)

  ● AdminLogin › should show development mode notice

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:215:24)

  ● AdminLogin › should show URL error message when provided

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:226:24)

  ● AdminLogin › should show session expired error message

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:234:24)

  ● AdminLogin › should disable form inputs during loading

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminLogin (components/admin/AdminLogin.tsx:29:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (__tests__/utils/component-mocks.tsx:243:16)
      at Object.<anonymous> (__tests__/components/admin/AdminLogin.test.tsx:248:24)

FAIL __tests__/regression/runner.test.ts
  ● Regression Test Suite › Category-Specific Regression Tests › should run API regression tests

    expect(received).toBeGreaterThan(expected)

    Expected: > 90
    Received:   87.5

    [0m [90m 66 |[39m       
     [90m 67 |[39m       [90m// API tests should have high success rate since they're mocked[39m
    [31m[1m>[22m[39m[90m 68 |[39m       expect(successRate)[33m.[39mtoBeGreaterThan([35m90[39m)
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 69 |[39m     })
     [90m 70 |[39m
     [90m 71 |[39m     it([32m'should run integration regression tests'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBeGreaterThan (__tests__/regression/runner.test.ts:68:27)

FAIL __tests__/app/api/admin/reddit/settings/route.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/got/dist/source/index.js:1
    import create from './create.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

    [0m [90m 20 |[39m   is_gallery[33m:[39m boolean
     [90m 21 |[39m   is_video[33m:[39m boolean
    [31m[1m>[22m[39m[90m 22 |[39m   over_18[33m:[39m boolean
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 23 |[39m   spoiler[33m:[39m boolean
     [90m 24 |[39m   stickied[33m:[39m boolean
     [90m 25 |[39m   link_flair_text[33m?[39m[33m:[39m string[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/services/redditClient.ts:22:53)
      at Object.<anonymous> (lib/services/reddit.ts:14:23)
      at Object.<anonymous> (lib/services/reddit-scanning.ts:19:17)
      at Object.<anonymous> (app/api/admin/reddit/settings/route.ts:20:25)
      at Object.<anonymous> (__tests__/app/api/admin/reddit/settings/route.test.ts:10:16)

FAIL __tests__/lib/services/schedule-content.test.ts
  ● Schedule Content Service › scheduleNextBatch › should enforce platform diversity

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 0

    [0m [90m 86 |[39m
     [90m 87 |[39m       [90m// Should still schedule content but with awareness of recent platform usage[39m
    [31m[1m>[22m[39m[90m 88 |[39m       expect(result[33m.[39msummary[33m.[39mtotalScheduled)[33m.[39mtoBe([35m2[39m)
     [90m    |[39m                                             [31m[1m^[22m[39m
     [90m 89 |[39m     })
     [90m 90 |[39m   })
     [90m 91 |[39m[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:88:45)

  ● Schedule Content Service › getUpcomingSchedule › should return scheduled content for specified days

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"confidence_score": 0.9, "content_text": "Test 1", "id": 1, "scheduled_for": undefined, "source_platform": "reddit", "status": undefined}, {"confidence_score": 0.8, "content_text": "Test 2", "id": 2, "scheduled_for": undefined, "source_platform": "reddit", "status": undefined}]

    [0m [90m 106 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUpcomingSchedule([35m7[39m)
     [90m 107 |[39m
    [31m[1m>[22m[39m[90m 108 |[39m       expect(result)[33m.[39mtoHaveLength([35m1[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 109 |[39m       expect(result[[35m0[39m][33m.[39mid)[33m.[39mtoBe([35m1[39m)
     [90m 110 |[39m       expect(result[[35m0[39m][33m.[39mstatus)[33m.[39mtoBe([32m'scheduled'[39m)
     [90m 111 |[39m     })[0m

      at Object.toHaveLength (__tests__/lib/services/schedule-content.test.ts:108:22)

  ● Schedule Content Service › getUpcomingSchedule › should return empty array when no scheduled content

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"scheduled_for": undefined, "source_platform": "reddit", "status": undefined}]

    [0m [90m 116 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUpcomingSchedule([35m7[39m)
     [90m 117 |[39m
    [31m[1m>[22m[39m[90m 118 |[39m       expect(result)[33m.[39mtoHaveLength([35m0[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 119 |[39m     })
     [90m 120 |[39m   })
     [90m 121 |[39m[0m

      at Object.toHaveLength (__tests__/lib/services/schedule-content.test.ts:118:22)

  ● Schedule Content Service › cancelScheduledContent › should cancel scheduled content successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 126 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m cancelScheduledContent([35m1[39m)
     [90m 127 |[39m
    [31m[1m>[22m[39m[90m 128 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 129 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 130 |[39m         expect[33m.[39mstringContaining([32m'UPDATE content_queue'[39m)[33m,[39m
     [90m 131 |[39m         expect[33m.[39marrayContaining([[35m1[39m])[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:128:22)

  ● Schedule Content Service › rescheduleContent › should reschedule content to new time

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 149 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m rescheduleContent([35m1[39m[33m,[39m newTime)
     [90m 150 |[39m
    [31m[1m>[22m[39m[90m 151 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 152 |[39m       expect(mockDb[33m.[39mquery)[33m.[39mtoHaveBeenCalledWith(
     [90m 153 |[39m         expect[33m.[39mstringContaining([32m'UPDATE content_queue'[39m)[33m,[39m
     [90m 154 |[39m         expect[33m.[39marrayContaining([expect[33m.[39many([33mString[39m)[33m,[39m [35m1[39m])[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:151:22)

  ● Schedule Content Service › rescheduleContent › should handle rescheduling errors

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 161 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m rescheduleContent([35m1[39m[33m,[39m [36mnew[39m [33mDate[39m())
     [90m 162 |[39m
    [31m[1m>[22m[39m[90m 163 |[39m       expect(result)[33m.[39mtoBe([36mfalse[39m)
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 164 |[39m     })
     [90m 165 |[39m   })
     [90m 166 |[39m[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:163:22)

  ● Schedule Content Service › platform diversity logic › should distribute content across different platforms

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 0

    [0m [90m 183 |[39m
     [90m 184 |[39m       [90m// Should select reddit, youtube, giphy (diverse platforms)[39m
    [31m[1m>[22m[39m[90m 185 |[39m       expect(result[33m.[39msummary[33m.[39mtotalScheduled)[33m.[39mtoBe([35m3[39m)
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 186 |[39m       expect([33mObject[39m[33m.[39mkeys(result[33m.[39msummary[33m.[39mplatformDistribution))[33m.[39mtoHaveLength([35m3[39m)
     [90m 187 |[39m     })
     [90m 188 |[39m   })[0m

      at Object.toBe (__tests__/lib/services/schedule-content.test.ts:185:45)

  ● Schedule Content Service › error handling › should handle database connection errors gracefully

    expect(received).toContain(expected) // indexOf

    Expected value: "Scheduling failed: Connection failed"
    Received array: ["No approved content available for scheduling"]

    [0m [90m 194 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m scheduleNextBatch([35m1[39m[33m,[39m [35m6[39m)
     [90m 195 |[39m
    [31m[1m>[22m[39m[90m 196 |[39m       expect(result[33m.[39merrors)[33m.[39mtoContain([32m'Scheduling failed: Connection failed'[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 197 |[39m       expect(result[33m.[39msummary[33m.[39mtotalScheduled)[33m.[39mtoBe([35m0[39m)
     [90m 198 |[39m     })
     [90m 199 |[39m[0m

      at Object.toContain (__tests__/lib/services/schedule-content.test.ts:196:29)

  ● Schedule Content Service › time slot allocation › should schedule content at correct time slots

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 222 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m scheduleNextBatch([35m1[39m[33m,[39m [35m1[39m)
     [90m 223 |[39m
    [31m[1m>[22m[39m[90m 224 |[39m       expect(result[33m.[39mscheduled)[33m.[39mtoHaveLength([35m1[39m)
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 225 |[39m       
     [90m 226 |[39m       [90m// Check that scheduled time is set to one of the expected posting times[39m
     [90m 227 |[39m       [36mconst[39m scheduledTime [33m=[39m [36mnew[39m [33mDate[39m(result[33m.[39mscheduled[[35m0[39m][33m.[39mscheduled_for)[0m

      at Object.toHaveLength (__tests__/lib/services/schedule-content.test.ts:224:32)

FAIL __tests__/api/admin/docs.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/jose/dist/webapi/index.js:1
    export { compactDecrypt } from './jwe/compact/decrypt.js';
    ^^^^^^

    SyntaxError: Unexpected token 'export'

    [0m [90m 24 |[39m [90m   * Get JWT secret as Uint8Array for jose library[39m
     [90m 25 |[39m [90m   */[39m
    [31m[1m>[22m[39m[90m 26 |[39m   [36mprivate[39m [36mstatic[39m getJWTSecret()[33m:[39m [33mUint8Array[39m {
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 27 |[39m     [36mconst[39m secret [33m=[39m process[33m.[39menv[33m.[39m[33mJWT_SECRET[39m
     [90m 28 |[39m     [36mif[39m ([33m![39msecret) {
     [90m 29 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'JWT_SECRET environment variable is required'[39m)[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/auth-edge.ts:26:15)
      at Object.<anonymous> (app/api/admin/docs/openapi/route.ts:22:19)
      at Object.<anonymous> (__tests__/api/admin/docs.test.ts:7:16)

FAIL __tests__/api/admin/health/deep.test.ts
  ● /api/admin/health/deep › should return expected response structure

    TypeError: expect(...).toBeOneOf is not a function

    [0m [90m 32 |[39m
     [90m 33 |[39m     [90m// Test response structure[39m
    [31m[1m>[22m[39m[90m 34 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBeOneOf([[35m200[39m[33m,[39m [35m503[39m[33m,[39m [35m500[39m])
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 35 |[39m     expect(data)[33m.[39mtoHaveProperty([32m'ok'[39m)
     [90m 36 |[39m     expect(data)[33m.[39mtoHaveProperty([32m'timestamp'[39m)
     [90m 37 |[39m     expect(data)[33m.[39mtoHaveProperty([32m'version'[39m)[0m

      at Object.toBeOneOf (__tests__/api/admin/health/deep.test.ts:34:29)

  ● /api/admin/health/deep › should include cache-control headers

    TypeError: Cannot read properties of undefined (reading 'get')

    [0m [90m 110 |[39m     [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)
     [90m 111 |[39m
    [31m[1m>[22m[39m[90m 112 |[39m     expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Cache-Control'[39m))[33m.[39mtoContain([32m'no-store'[39m)
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 113 |[39m     expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Content-Type'[39m))[33m.[39mtoBe([32m'application/json'[39m)
     [90m 114 |[39m   })
     [90m 115 |[39m[0m

      at Object.get (__tests__/api/admin/health/deep.test.ts:112:29)

FAIL __tests__/lib/middleware/admin-middleware.test.ts
  ● Admin Middleware › withAdminMiddleware › should add request ID and cache-control headers

    TypeError: Cannot read properties of undefined (reading 'get')

    [0m [90m 37 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m wrappedHandler(request)
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-Request-ID'[39m))[33m.[39mtoMatch([35m/^[0-9A-HJKMNP-TV-Z]{26}$/[39m) [90m// ULID format[39m
     [90m    |[39m                               [31m[1m^[22m[39m
     [90m 40 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Cache-Control'[39m))[33m.[39mtoContain([32m'no-store'[39m)
     [90m 41 |[39m       expect(mockHandler)[33m.[39mtoHaveBeenCalled()
     [90m 42 |[39m     })[0m

      at Object.get (__tests__/lib/middleware/admin-middleware.test.ts:39:31)

  ● Admin Middleware › withAdminMiddleware › should handle timeout and return 504 response

    RequestTimeoutError: Request timeout after 500ms

    [0m [90m 92 |[39m     timeoutId [33m=[39m setTimeout(() [33m=>[39m {
     [90m 93 |[39m       [36mif[39m ([33m![39misCleared) {
    [31m[1m>[22m[39m[90m 94 |[39m         [36mconst[39m error [33m=[39m [36mnew[39m [33mError[39m([32m`Request timeout after ${timeoutMs}ms`[39m)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 95 |[39m         error[33m.[39mname [33m=[39m [32m'RequestTimeoutError'[39m
     [90m 96 |[39m         reject(error)
     [90m 97 |[39m       }[0m

      at Timeout.<anonymous> (lib/middleware/admin-middleware.ts:94:23)

  ● Admin Middleware › withAdminMiddleware › should handle timeout and return 504 response

    RequestTimeoutError: Request timeout after 500ms

    [0m [90m 92 |[39m     timeoutId [33m=[39m setTimeout(() [33m=>[39m {
     [90m 93 |[39m       [36mif[39m ([33m![39misCleared) {
    [31m[1m>[22m[39m[90m 94 |[39m         [36mconst[39m error [33m=[39m [36mnew[39m [33mError[39m([32m`Request timeout after ${timeoutMs}ms`[39m)
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 95 |[39m         error[33m.[39mname [33m=[39m [32m'RequestTimeoutError'[39m
     [90m 96 |[39m         reject(error)
     [90m 97 |[39m       }[0m

      at Timeout.<anonymous> (lib/middleware/admin-middleware.ts:94:23)

  ● Admin Middleware › withAdminMiddleware › should add custom headers when provided

    TypeError: Cannot read properties of undefined (reading 'get')

    [0m [90m 131 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m wrappedHandler(request)
     [90m 132 |[39m
    [31m[1m>[22m[39m[90m 133 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-Custom-Header'[39m))[33m.[39mtoBe([32m'test-value'[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 134 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'X-API-Version'[39m))[33m.[39mtoBe([32m'1.0'[39m)
     [90m 135 |[39m     })
     [90m 136 |[39m[0m

      at Object.get (__tests__/lib/middleware/admin-middleware.test.ts:133:31)

  ● Admin Middleware › withAdminMiddleware › should log structured request data when enabled

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "[ADMIN] GET /api/admin/test 200", ObjectContaining {"duration_ms": Any<Number>, "method": "GET", "path": "/api/admin/test", "rid": StringMatching /^[0-9A-HJKMNP-TV-Z]{26}$/, "status": 200, "timestamp": Any<String>}

    Number of calls: 0

    [0m [90m 149 |[39m       [36mawait[39m wrappedHandler(request)
     [90m 150 |[39m
    [31m[1m>[22m[39m[90m 151 |[39m       expect(consoleSpy)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 152 |[39m         expect[33m.[39mstringContaining([32m'[ADMIN] GET /api/admin/test 200'[39m)[33m,[39m
     [90m 153 |[39m         expect[33m.[39mobjectContaining({
     [90m 154 |[39m           rid[33m:[39m expect[33m.[39mstringMatching([35m/^[0-9A-HJKMNP-TV-Z]{26}$/[39m)[33m,[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/middleware/admin-middleware.test.ts:151:26)

  ● Admin Middleware › createErrorResponse › should create properly formatted error response

    TypeError: Cannot read properties of undefined (reading 'get')

    [0m [90m 173 |[39m
     [90m 174 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)
    [31m[1m>[22m[39m[90m 175 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Cache-Control'[39m))[33m.[39mtoContain([32m'no-store'[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 176 |[39m       expect(response[33m.[39mheaders[33m.[39m[36mget[39m([32m'Content-Type'[39m))[33m.[39mtoBe([32m'application/json'[39m)
     [90m 177 |[39m     })
     [90m 178 |[39m   })[0m

      at Object.get (__tests__/lib/middleware/admin-middleware.test.ts:175:31)

FAIL __tests__/lib/db-strict-prod.test.ts
  ● Database Connection - Production Requirements › Production Environment Tests › should require DATABASE_URL in production

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 37 |[39m       
     [90m 38 |[39m       [90m// Import the module which should trigger the constructor[39m
    [31m[1m>[22m[39m[90m 39 |[39m       [36mawait[39m expect([36masync[39m () [33m=>[39m {
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 40 |[39m         [90m// Dynamic import to ensure fresh module loading[39m
     [90m 41 |[39m         [36mconst[39m { [33mDatabaseConnection[39m } [33m=[39m [36mawait[39m [36mimport[39m([32m'@/lib/db'[39m)[33m;[39m
     [90m 42 |[39m       })[33m.[39mrejects[33m.[39mtoThrow()[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/db-strict-prod.test.ts:39:13)

  ● Database Connection - Production Requirements › Production Environment Tests › should require Supabase URL in production

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 51 |[39m       process[33m.[39menv[33m.[39m[33mDATABASE_URL[39m [33m=[39m [32m'postgresql://user:password@localhost:5432/dbname'[39m[33m;[39m
     [90m 52 |[39m       
    [31m[1m>[22m[39m[90m 53 |[39m       [36mawait[39m expect([36masync[39m () [33m=>[39m {
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 54 |[39m         [36mconst[39m { [33mDatabaseConnection[39m } [33m=[39m [36mawait[39m [36mimport[39m([32m'@/lib/db'[39m)[33m;[39m
     [90m 55 |[39m       })[33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 56 |[39m       [0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/db-strict-prod.test.ts:53:13)

  ● Database Connection - Production Requirements › Production Environment Tests › should accept valid Supabase URL in production

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using Supabase Postgres via DATABASE_URL"

    Number of calls: 0

    [0m [90m 68 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 69 |[39m       
    [31m[1m>[22m[39m[90m 70 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 71 |[39m         expect[33m.[39mstringContaining([32m'Using Supabase Postgres via DATABASE_URL'[39m)
     [90m 72 |[39m       )[33m;[39m
     [90m 73 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:70:30)

  ● Database Connection - Production Requirements › Development Environment Tests › should allow SQLite fallback in development

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using SQLite (development fallback)"

    Number of calls: 0

    [0m [90m 83 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 84 |[39m       
    [31m[1m>[22m[39m[90m 85 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 86 |[39m         expect[33m.[39mstringContaining([32m'Using SQLite (development fallback)'[39m)
     [90m 87 |[39m       )[33m;[39m
     [90m 88 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:85:30)

  ● Database Connection - Production Requirements › Development Environment Tests › should use Supabase when DATABASE_URL is provided in development

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using Supabase Postgres via DATABASE_URL (development)"

    Number of calls: 0

    [0m [90m  96 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m  97 |[39m       
    [31m[1m>[22m[39m[90m  98 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m  99 |[39m         expect[33m.[39mstringContaining([32m'Using Supabase Postgres via DATABASE_URL (development)'[39m)
     [90m 100 |[39m       )[33m;[39m
     [90m 101 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:98:30)

  ● Database Connection - Production Requirements › Preview Environment Tests › should allow SQLite fallback in preview

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using SQLite (preview fallback)"

    Number of calls: 0

    [0m [90m 112 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 113 |[39m       
    [31m[1m>[22m[39m[90m 114 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 115 |[39m         expect[33m.[39mstringContaining([32m'Using SQLite (preview fallback)'[39m)
     [90m 116 |[39m       )[33m;[39m
     [90m 117 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:114:30)

  ● Database Connection - Production Requirements › Preview Environment Tests › should use Supabase when DATABASE_URL is provided in preview

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Using Supabase Postgres via DATABASE_URL (preview)"

    Number of calls: 0

    [0m [90m 126 |[39m       })[33m.[39mresolves[33m.[39mnot[33m.[39mtoThrow()[33m;[39m
     [90m 127 |[39m       
    [31m[1m>[22m[39m[90m 128 |[39m       expect(mockConsoleLog)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 129 |[39m         expect[33m.[39mstringContaining([32m'Using Supabase Postgres via DATABASE_URL (preview)'[39m)
     [90m 130 |[39m       )[33m;[39m
     [90m 131 |[39m     })[33m;[39m[0m

      at Object.toHaveBeenCalledWith (__tests__/lib/db-strict-prod.test.ts:128:30)

  ● Database Connection - Production Requirements › Environment Variable Detection › should correctly reject non-Supabase URLs in production

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 165 |[39m         process[33m.[39menv[33m.[39m[33mDATABASE_URL[39m [33m=[39m url[33m;[39m
     [90m 166 |[39m         
    [31m[1m>[22m[39m[90m 167 |[39m         [36mawait[39m expect([36masync[39m () [33m=>[39m {
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 168 |[39m           [36mconst[39m { [33mDatabaseConnection[39m } [33m=[39m [36mawait[39m [36mimport[39m([32m'@/lib/db'[39m)[33m;[39m
     [90m 169 |[39m         })[33m.[39mrejects[33m.[39mtoThrow()[33m;[39m
     [90m 170 |[39m         [0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/lib/db-strict-prod.test.ts:167:15)

FAIL __tests__/api/health.test.ts
  ● /api/health › GET /api/health › should return healthy status when database is connected

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 25 |[39m   describe([32m'GET /api/health'[39m[33m,[39m () [33m=>[39m {
     [90m 26 |[39m     it([32m'should return healthy status when database is connected'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 27 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 28 |[39m         connected[33m:[39m [36mtrue[39m[33m,[39m
     [90m 29 |[39m         latency[33m:[39m [35m25[39m
     [90m 30 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:27:26)

  ● /api/health › GET /api/health › should return unhealthy status when database is disconnected

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 46 |[39m
     [90m 47 |[39m     it([32m'should return unhealthy status when database is disconnected'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 48 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 49 |[39m         connected[33m:[39m [36mfalse[39m[33m,[39m
     [90m 50 |[39m         error[33m:[39m [32m'Connection timeout'[39m
     [90m 51 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:48:26)

  ● /api/health › GET /api/health › should include development metadata in development environment

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 67 |[39m       process[33m.[39menv[33m.[39m[33mNODE_ENV[39m [33m=[39m [32m'development'[39m
     [90m 68 |[39m
    [31m[1m>[22m[39m[90m 69 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 70 |[39m         connected[33m:[39m [36mtrue[39m[33m,[39m
     [90m 71 |[39m         latency[33m:[39m [35m15[39m
     [90m 72 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:69:26)

  ● /api/health › GET /api/health › should handle database health check errors

    TypeError: Cannot read properties of undefined (reading 'mockRejectedValue')

    [0m [90m 85 |[39m
     [90m 86 |[39m     it([32m'should handle database health check errors'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 87 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 88 |[39m
     [90m 89 |[39m       [36mconst[39m request [33m=[39m createMockRequest([32m'GET'[39m)
     [90m 90 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)[0m

      at Object.mockRejectedValue (__tests__/api/health.test.ts:87:26)

  ● /api/health › GET /api/health › should reject invalid HTTP methods

    expect(received).toBe(expected) // Object.is equality

    Expected: 405
    Received: 500

    [0m [90m 101 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mGET[39m(request)
     [90m 102 |[39m       
    [31m[1m>[22m[39m[90m 103 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m405[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 104 |[39m       
     [90m 105 |[39m       [36mconst[39m data [33m=[39m [36mawait[39m response[33m.[39mjson()
     [90m 106 |[39m       expect(data[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[0m

      at Object.toBe (__tests__/api/health.test.ts:103:31)

  ● /api/health › HEAD /api/health › should return 200 status with no body

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

    [0m [90m 114 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m [33mHEAD[39m(request)
     [90m 115 |[39m       
    [31m[1m>[22m[39m[90m 116 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 117 |[39m       expect(response[33m.[39mbody)[33m.[39mtoBeNull()
     [90m 118 |[39m     })
     [90m 119 |[39m[0m

      at Object.toBe (__tests__/api/health.test.ts:116:31)

  ● /api/health › HEAD /api/health › should handle HEAD requests even when database is down

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 119 |[39m
     [90m 120 |[39m     it([32m'should handle HEAD requests even when database is down'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 121 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 122 |[39m         connected[33m:[39m [36mfalse[39m[33m,[39m
     [90m 123 |[39m         error[33m:[39m [32m'Database down'[39m
     [90m 124 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:121:26)

  ● /api/health › Security Headers › should include security headers in response

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 133 |[39m   describe([32m'Security Headers'[39m[33m,[39m () [33m=>[39m {
     [90m 134 |[39m     it([32m'should include security headers in response'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 135 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 136 |[39m         connected[33m:[39m [36mtrue[39m[33m,[39m
     [90m 137 |[39m         latency[33m:[39m [35m10[39m
     [90m 138 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:135:26)

  ● /api/health › Response Format › should return consistent response format

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 150 |[39m   describe([32m'Response Format'[39m[33m,[39m () [33m=>[39m {
     [90m 151 |[39m     it([32m'should return consistent response format'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 152 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 153 |[39m         connected[33m:[39m [36mtrue[39m[33m,[39m
     [90m 154 |[39m         latency[33m:[39m [35m20[39m
     [90m 155 |[39m       })[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:152:26)

  ● /api/health › Response Format › should have valid timestamp format

    TypeError: Cannot read properties of undefined (reading 'mockResolvedValue')

    [0m [90m 173 |[39m
     [90m 174 |[39m     it([32m'should have valid timestamp format'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 175 |[39m       mockDb[33m.[39mhealthCheck[33m.[39mmockResolvedValue({
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 176 |[39m         connected[33m:[39m [36mtrue[39m
     [90m 177 |[39m       })
     [90m 178 |[39m[0m

      at Object.mockResolvedValue (__tests__/api/health.test.ts:175:26)

FAIL __tests__/integration/token-refresh-workflow.test.ts
  ● Token Refresh Workflow Integration › refresh-token.sh script › should execute without errors when service account is valid

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › refresh-token.sh script › should fail gracefully when no credentials provided

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › Service Token Generation › should generate valid service tokens

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › Service Token Generation › should generate tokens with 30-day expiry

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › Token Refresh Flow › should handle token refresh with valid refresh token

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › Token Refresh Flow › should reject expired refresh tokens

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)

  ● Token Refresh Workflow Integration › GitHub Actions Environment › should handle GitHub environment variables correctly

    TypeError: _db.db.connect is not a function

    [0m [90m 16 |[39m     
     [90m 17 |[39m     [90m// Connect to test database[39m
    [31m[1m>[22m[39m[90m 18 |[39m     [36mawait[39m db[33m.[39mconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 19 |[39m     
     [90m 20 |[39m     [90m// Create test service account[39m
     [90m 21 |[39m     serviceAccount [33m=[39m [36mawait[39m [33mAdminService[39m[33m.[39mcreateServiceAccount()[0m

      at Object.connect (__tests__/integration/token-refresh-workflow.test.ts:18:14)


  ● Test suite failed to run

    TypeError: _db.db.disconnect is not a function

    [0m [90m 37 |[39m     
     [90m 38 |[39m     [90m// Disconnect from database[39m
    [31m[1m>[22m[39m[90m 39 |[39m     [36mawait[39m db[33m.[39mdisconnect()
     [90m    |[39m              [31m[1m^[22m[39m
     [90m 40 |[39m   })
     [90m 41 |[39m
     [90m 42 |[39m   describe([32m'refresh-token.sh script'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.disconnect (__tests__/integration/token-refresh-workflow.test.ts:39:14)

FAIL __tests__/components/admin/AdminDashboard.test.tsx
  ● AdminDashboard › renders dashboard with loading state

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:53:11)

  ● AdminDashboard › renders dashboard with statistics data

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:71:11)

  ● AdminDashboard › handles API errors gracefully

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:92:11)

  ● AdminDashboard › displays quick action buttons

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:119:11)

  ● AdminDashboard › refreshes data every 30 seconds

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/components/admin/AdminDashboard.test.tsx:144:11)

FAIL __tests__/lib/services/social-media.test.ts
  ● Test suite failed to run

    Configuration error:

    Could not locate module @/lib/services/mastodon-monitoring mapped as:
    /home/runner/work/hotdog-diaries/hotdog-diaries/$1.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^@\/(.*)$/": "/home/runner/work/hotdog-diaries/hotdog-diaries/$1"
      },
      "resolver": undefined
    }

    [0m [90m 4 |[39m jest[33m.[39mmock([32m'@/lib/services/reddit-scanning'[39m)
     [90m 5 |[39m jest[33m.[39mmock([32m'@/lib/services/mastodon-scanning'[39m) 
    [31m[1m>[22m[39m[90m 6 |[39m jest[33m.[39mmock([32m'@/lib/services/mastodon-monitoring'[39m)
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 7 |[39m jest[33m.[39mmock([32m'@/lib/services/flickr-scanning'[39m)
     [90m 8 |[39m jest[33m.[39mmock([32m'@/lib/services/youtube-scanning'[39m)
     [90m 9 |[39m jest[33m.[39mmock([32m'@/lib/db'[39m[33m,[39m () [33m=>[39m ({[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.mock (__tests__/lib/services/social-media.test.ts:6:6)

FAIL __tests__/app/api/admin/reddit/scan/route.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/runner/work/hotdog-diaries/hotdog-diaries/node_modules/got/dist/source/index.js:1
    import create from './create.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

    [0m [90m 20 |[39m   is_gallery[33m:[39m boolean
     [90m 21 |[39m   is_video[33m:[39m boolean
    [31m[1m>[22m[39m[90m 22 |[39m   over_18[33m:[39m boolean
     [90m    |[39m                             [31m[1m^[22m[39m
     [90m 23 |[39m   spoiler[33m:[39m boolean
     [90m 24 |[39m   stickied[33m:[39m boolean
     [90m 25 |[39m   link_flair_text[33m?[39m[33m:[39m string[0m

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (lib/services/redditClient.ts:22:53)
      at Object.<anonymous> (lib/services/reddit.ts:14:23)
      at Object.<anonymous> (lib/services/reddit-scanning.ts:19:17)
      at Object.<anonymous> (app/api/admin/reddit/scan/route.ts:20:25)
      at Object.<anonymous> (__tests__/app/api/admin/reddit/scan/route.test.ts:20:16)

FAIL __tests__/app/admin/page.test.tsx
  ● Admin Page › renders without crashing

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:19:11)

  ● Admin Page › renders admin panel heading

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:26:11)

  ● Admin Page › renders all admin sections

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:33:11)

  ● Admin Page › renders section descriptions

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:47:11)

  ● Admin Page › renders coming soon buttons for all sections

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:61:11)

  ● Admin Page › has proper grid layout structure

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:68:33)

  ● Admin Page › renders within Layout component

    useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider

    [0m [90m 255 |[39m     console[33m.[39mgroupEnd()
     [90m 256 |[39m     
    [31m[1m>[22m[39m[90m 257 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useAuth must be used within an AuthProvider. Check that your component is wrapped in <AuthProvider> and imported from @/components/providers/AuthProvider'[39m)
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 258 |[39m   }
     [90m 259 |[39m   
     [90m 260 |[39m   [36mreturn[39m context[0m

      at useAuth (components/providers/AuthProvider.tsx:257:11)
      at AdminDashboard (components/admin/AdminDashboard.tsx:40:27)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (__tests__/app/admin/page.test.tsx:76:11)

FAIL __tests__/components/HomePage.test.tsx
  ● HomePage Component › renders main heading

    TestingLibraryElementError: Unable to find an accessible element with the role "heading" and name `/welcome to hotdog diaries/i`

    Here are the accessible roles:

      contentinfo:

      Name "":
      [36m<footer[39m
        [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m  6 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m  7 |[39m     
    [31m[1m>[22m[39m[90m  8 |[39m     [36mconst[39m heading [33m=[39m screen[33m.[39mgetByRole([32m'heading'[39m[33m,[39m { name[33m:[39m [35m/welcome to hotdog diaries/i[39m[33m,[39m level[33m:[39m [35m1[39m })
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m  9 |[39m     expect(heading)[33m.[39mtoBeInTheDocument()
     [90m 10 |[39m   })
     [90m 11 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (__tests__/components/HomePage.test.tsx:8:28)

  ● HomePage Component › renders description text

    TestingLibraryElementError: Unable to find an element with the text: /your premier destination for hotdog content/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 13 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 14 |[39m     
    [31m[1m>[22m[39m[90m 15 |[39m     [36mconst[39m description [33m=[39m screen[33m.[39mgetByText([35m/your premier destination for hotdog content/i[39m)
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 16 |[39m     expect(description)[33m.[39mtoBeInTheDocument()
     [90m 17 |[39m   })
     [90m 18 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/components/HomePage.test.tsx:15:32)

  ● HomePage Component › renders all feature cards

    TestingLibraryElementError: Unable to find an element with the text: /daily content/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 20 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 21 |[39m     
    [31m[1m>[22m[39m[90m 22 |[39m     [36mconst[39m dailyContentCard [33m=[39m screen[33m.[39mgetByText([35m/daily content/i[39m)
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 23 |[39m     [36mconst[39m smartScanningCard [33m=[39m screen[33m.[39mgetByText([35m/smart scanning/i[39m)
     [90m 24 |[39m     [36mconst[39m mobileReadyCard [33m=[39m screen[33m.[39mgetByText([35m/mobile ready/i[39m)
     [90m 25 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/components/HomePage.test.tsx:22:37)

  ● HomePage Component › renders feature card descriptions

    TestingLibraryElementError: Unable to find an element with the text: /fresh hotdog posts delivered 6 times per day/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 32 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 33 |[39m     
    [31m[1m>[22m[39m[90m 34 |[39m     [36mconst[39m dailyContentDesc [33m=[39m screen[33m.[39mgetByText([35m/fresh hotdog posts delivered 6 times per day/i[39m)
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 35 |[39m     [36mconst[39m smartScanningDesc [33m=[39m screen[33m.[39mgetByText([35m/our intelligent system finds and curates/i[39m)
     [90m 36 |[39m     [36mconst[39m mobileReadyDesc [33m=[39m screen[33m.[39mgetByText([35m/optimized for all devices/i[39m)
     [90m 37 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/components/HomePage.test.tsx:34:37)

  ● HomePage Component › renders coming soon section

    TestingLibraryElementError: Unable to find an accessible element with the role "heading" and name `/coming soon/i`

    Here are the accessible roles:

      contentinfo:

      Name "":
      [36m<footer[39m
        [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 44 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 45 |[39m     
    [31m[1m>[22m[39m[90m 46 |[39m     [36mconst[39m comingSoonHeading [33m=[39m screen[33m.[39mgetByRole([32m'heading'[39m[33m,[39m { name[33m:[39m [35m/coming soon/i[39m[33m,[39m level[33m:[39m [35m2[39m })
     [90m    |[39m                                      [31m[1m^[22m[39m
     [90m 47 |[39m     [36mconst[39m comingSoonText [33m=[39m screen[33m.[39mgetByText([35m/hotdog content will start appearing here/i[39m)
     [90m 48 |[39m     
     [90m 49 |[39m     expect(comingSoonHeading)[33m.[39mtoBeInTheDocument()[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (__tests__/components/HomePage.test.tsx:46:38)

  ● HomePage Component › renders emojis for visual appeal

    TestingLibraryElementError: Unable to find an element with the text: ��. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 55 |[39m     
     [90m 56 |[39m     [90m// Check if emojis are present in the document[39m
    [31m[1m>[22m[39m[90m 57 |[39m     [36mconst[39m hotdogEmoji [33m=[39m screen[33m.[39mgetByText([32m'��'[39m)
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 58 |[39m     [36mconst[39m searchEmoji [33m=[39m screen[33m.[39mgetByText([32m'��'[39m)
     [90m 59 |[39m     [36mconst[39m mobileEmoji [33m=[39m screen[33m.[39mgetByText([32m'��'[39m)
     [90m 60 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (__tests__/components/HomePage.test.tsx:57:32)

  ● HomePage Component › has proper heading hierarchy

    TestingLibraryElementError: Unable to find an accessible element with the role "heading"

    Here are the accessible roles:

      contentinfo:

      Name "":
      [36m<footer[39m
        [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"jsx-fef153891a521edf mobile-feed-container"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"jsx-406f5bf15bead4c3 feed-loading"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-406f5bf15bead4c3 loading-shimmer"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-image"[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-text"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"jsx-406f5bf15bead4c3 shimmer-line short"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<footer[39m
            [33mclass[39m=[32m"jsx-fef153891a521edf feed-features"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"jsx-fef153891a521edf features-mini"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� 6x Daily[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Smart Curation[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"jsx-fef153891a521edf"[39m
              [36m>[39m
                [0m�� Mobile Ready[0m
              [36m</span>[39m
            [36m</div>[39m
          [36m</footer>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 67 |[39m     render([33m<[39m[33mHomePage[39m [33m/[39m[33m>[39m)
     [90m 68 |[39m     
    [31m[1m>[22m[39m[90m 69 |[39m     [36mconst[39m h1 [33m=[39m screen[33m.[39mgetByRole([32m'heading'[39m[33m,[39m { level[33m:[39m [35m1[39m })
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 70 |[39m     [36mconst[39m h2 [33m=[39m screen[33m.[39mgetByRole([32m'heading'[39m[33m,[39m { level[33m:[39m [35m2[39m })
     [90m 71 |[39m     [36mconst[39m h3Elements [33m=[39m screen[33m.[39mgetAllByRole([32m'heading'[39m[33m,[39m { level[33m:[39m [35m3[39m })
     [90m 72 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (__tests__/components/HomePage.test.tsx:69:23)

  ● HomePage Component › renders with responsive container classes

    expect(received).toBeInTheDocument()

    received value must be an HTMLElement or an SVGElement.
    Received has value: null

    [0m [90m 80 |[39m     
     [90m 81 |[39m     [36mconst[39m containerDiv [33m=[39m container[33m.[39mquerySelector([32m'.container'[39m)
    [31m[1m>[22m[39m[90m 82 |[39m     expect(containerDiv)[33m.[39mtoBeInTheDocument()
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 83 |[39m     expect(containerDiv)[33m.[39mtoHaveClass([32m'py-12'[39m)
     [90m 84 |[39m   })
     [90m 85 |[39m })[0m

      at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:2240:22)
      at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:2241:6)
      at Object.toBeInTheDocument (__tests__/components/HomePage.test.tsx:82:26)

FAIL __tests__/app/api/cron/post-content.test.ts
  ● Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/index.js:805:21)

FAIL __tests__/app/page.test.tsx
  ● Home Page › renders without crashing

    TestingLibraryElementError: Unable to find an element by: [data-testid="layout"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"min-h-screen transition-all duration-1000 feed-container opacity-100 scale-100"[39m
          [33mstyle[39m=[32m"z-index: 1;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"fixed inset-0 text-neutral-100 flex flex-col items-center justify-center p-6 z-[99999]"[39m
            [33mstyle[39m=[32m"background: white; height: 100vh;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"absolute top-1/2 left-1/2"[39m
              [33mstyle[39m=[32m"transform: translate(-33%, -18%);"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative max-w-4xl h-[360px] flex items-center justify-center gap-12"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"0"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-1/2 h-8 rounded-full"[39m
                    [33mstyle[39m=[32m"width: var(--shadowBase); background: radial-gradient(ellipse at center, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.0) 70%); animation: shadowAnim var(--duration) infinite ease-in-out; animation-delay: 0s;"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33maria-label[39m=[32m"Loading hotdog 1"[39m
                    [33mclass[39m=[32m"will-change-transform select-none hotdog"[39m
                    [33mdata-anim[39m=[32m"true"[39m
                    [33mdata-testid[39m=[32m"hotdog-wrapper-0"[39m
                    [33mrole[39m=[32m"img"[39m
                    [33mstyle[39m=[32m"transform-origin: center bottom; offset-path: path('M 0 0 C -15 -88, -9 -176, 0 -220, 9 -176, 15 -88, 0 0'); offset-rotate: 0deg; animation-delay: 0s, 0s; --duration: 1.6s; --sqx: 1.282051282051282; --sqy: 0.78; --liftx: 0.9538344143456696; --lifty: 1.0484; --airx: 0.8920606601248885; --airy: 1.121; --shadowBase: 240px;"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mheight[39m=[32m"120"[39m
                      [33mviewBox[39m=[32m"0 0 300 120"[39m
                      [33mwidth[39m=[32m"300"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<defs>[39m
                        [36m<filter[39m
                          [33mheight[39m=[32m"140%"[39m
                          [33mid[39m=[32m"shadow"[39m
                          [33mwidth[39m=[32m"140%"[39m
                          [33mx[39m=[32m"-20%"[39m
                          [33my[39m=[32m"-20%"[39m
                        [36m>[39m
                          [36m<fedropshadow[39m
                            [33mdx[39m=[32m"0"[39m
                            [33mdy[39m=[32m"2"[39m
                            [33mflood-color[39m=[32m"#000"[39m
                            [33mflood-opacity[39m=[32m".35"[39m
                            [33mstdDeviation[39m=[32m"2"[39m
                          [36m/>[39m
                        [36m</filter>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"bun"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#F6D18B"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#E5B873"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"dog"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#C94C31"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#A73D28"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                      [36m</defs>[39m
                      [36m<g[39m
                        [33mfilter[39m=[32m"url(#shadow)"[39m
                      [36m>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"58"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#dog)"[39m
                          [33mheight[39m=[32m"60"[39m
                          [33mrx[39m=[32m"30"[39m
                          [33mwidth[39m=[32m"260"[39m
                          [33mx[39m=[32m"20"[39m
                          [33my[39m=[32m"30"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"18"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M 30 54 C 60 34, 90 74, 120 54 S 180 34, 210 54 240 74, 270 54"[39m
                          [33mfill[39m=[32m"none"[39m
                          [33mstroke[39m=[32m"#F4D43F"[39m
                          [33mstroke-linecap[39m=[32m"round"[39m
                          [33mstroke-linejoin[39m=[32m"round"[39m
                          [33mstroke-width[39m=[32m"10"[39m
                        [36m/>[39m
                      [36m</g>[39m
                    [36m</svg>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-...

    [0m [90m 25 |[39m     render([33m<[39m[33mPage[39m [33m/[39m[33m>[39m)
     [90m 26 |[39m     
    [31m[1m>[22m[39m[90m 27 |[39m     [36mconst[39m layout [33m=[39m screen[33m.[39mgetByTestId([32m'layout'[39m)
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 28 |[39m     [36mconst[39m homePage [33m=[39m screen[33m.[39mgetByTestId([32m'homepage'[39m)
     [90m 29 |[39m     
     [90m 30 |[39m     expect(layout)[33m.[39mtoBeInTheDocument()[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/app/page.test.tsx:27:27)

  ● Home Page › renders HomePage component within Layout

    TestingLibraryElementError: Unable to find an element by: [data-testid="layout"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"min-h-screen transition-all duration-1000 feed-container opacity-100 scale-100"[39m
          [33mstyle[39m=[32m"z-index: 1;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"fixed inset-0 text-neutral-100 flex flex-col items-center justify-center p-6 z-[99999]"[39m
            [33mstyle[39m=[32m"background: white; height: 100vh;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"absolute top-1/2 left-1/2"[39m
              [33mstyle[39m=[32m"transform: translate(-33%, -18%);"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative max-w-4xl h-[360px] flex items-center justify-center gap-12"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"0"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-1/2 h-8 rounded-full"[39m
                    [33mstyle[39m=[32m"width: var(--shadowBase); background: radial-gradient(ellipse at center, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.0) 70%); animation: shadowAnim var(--duration) infinite ease-in-out; animation-delay: 0s;"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33maria-label[39m=[32m"Loading hotdog 1"[39m
                    [33mclass[39m=[32m"will-change-transform select-none hotdog"[39m
                    [33mdata-anim[39m=[32m"true"[39m
                    [33mdata-testid[39m=[32m"hotdog-wrapper-0"[39m
                    [33mrole[39m=[32m"img"[39m
                    [33mstyle[39m=[32m"transform-origin: center bottom; offset-path: path('M 0 0 C -15 -88, -9 -176, 0 -220, 9 -176, 15 -88, 0 0'); offset-rotate: 0deg; animation-delay: 0s, 0s; --duration: 1.6s; --sqx: 1.282051282051282; --sqy: 0.78; --liftx: 0.9538344143456696; --lifty: 1.0484; --airx: 0.8920606601248885; --airy: 1.121; --shadowBase: 240px;"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mheight[39m=[32m"120"[39m
                      [33mviewBox[39m=[32m"0 0 300 120"[39m
                      [33mwidth[39m=[32m"300"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<defs>[39m
                        [36m<filter[39m
                          [33mheight[39m=[32m"140%"[39m
                          [33mid[39m=[32m"shadow"[39m
                          [33mwidth[39m=[32m"140%"[39m
                          [33mx[39m=[32m"-20%"[39m
                          [33my[39m=[32m"-20%"[39m
                        [36m>[39m
                          [36m<fedropshadow[39m
                            [33mdx[39m=[32m"0"[39m
                            [33mdy[39m=[32m"2"[39m
                            [33mflood-color[39m=[32m"#000"[39m
                            [33mflood-opacity[39m=[32m".35"[39m
                            [33mstdDeviation[39m=[32m"2"[39m
                          [36m/>[39m
                        [36m</filter>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"bun"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#F6D18B"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#E5B873"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"dog"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#C94C31"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#A73D28"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                      [36m</defs>[39m
                      [36m<g[39m
                        [33mfilter[39m=[32m"url(#shadow)"[39m
                      [36m>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"58"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#dog)"[39m
                          [33mheight[39m=[32m"60"[39m
                          [33mrx[39m=[32m"30"[39m
                          [33mwidth[39m=[32m"260"[39m
                          [33mx[39m=[32m"20"[39m
                          [33my[39m=[32m"30"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"18"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M 30 54 C 60 34, 90 74, 120 54 S 180 34, 210 54 240 74, 270 54"[39m
                          [33mfill[39m=[32m"none"[39m
                          [33mstroke[39m=[32m"#F4D43F"[39m
                          [33mstroke-linecap[39m=[32m"round"[39m
                          [33mstroke-linejoin[39m=[32m"round"[39m
                          [33mstroke-width[39m=[32m"10"[39m
                        [36m/>[39m
                      [36m</g>[39m
                    [36m</svg>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-...

    [0m [90m 35 |[39m     render([33m<[39m[33mPage[39m [33m/[39m[33m>[39m)
     [90m 36 |[39m     
    [31m[1m>[22m[39m[90m 37 |[39m     [36mconst[39m layout [33m=[39m screen[33m.[39mgetByTestId([32m'layout'[39m)
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 38 |[39m     [36mconst[39m homePage [33m=[39m screen[33m.[39mgetByTestId([32m'homepage'[39m)
     [90m 39 |[39m     [36mconst[39m main [33m=[39m screen[33m.[39mgetByRole([32m'main'[39m)
     [90m 40 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/app/page.test.tsx:37:27)

  ● Home Page › has proper page structure

    TestingLibraryElementError: Unable to find an element by: [data-testid="header"]

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<main[39m
          [33mclass[39m=[32m"min-h-screen transition-all duration-1000 feed-container opacity-100 scale-100"[39m
          [33mstyle[39m=[32m"z-index: 1;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"fixed inset-0 text-neutral-100 flex flex-col items-center justify-center p-6 z-[99999]"[39m
            [33mstyle[39m=[32m"background: white; height: 100vh;"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"absolute top-1/2 left-1/2"[39m
              [33mstyle[39m=[32m"transform: translate(-33%, -18%);"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative max-w-4xl h-[360px] flex items-center justify-center gap-12"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"0"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-1/2 h-8 rounded-full"[39m
                    [33mstyle[39m=[32m"width: var(--shadowBase); background: radial-gradient(ellipse at center, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.0) 70%); animation: shadowAnim var(--duration) infinite ease-in-out; animation-delay: 0s;"[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33maria-label[39m=[32m"Loading hotdog 1"[39m
                    [33mclass[39m=[32m"will-change-transform select-none hotdog"[39m
                    [33mdata-anim[39m=[32m"true"[39m
                    [33mdata-testid[39m=[32m"hotdog-wrapper-0"[39m
                    [33mrole[39m=[32m"img"[39m
                    [33mstyle[39m=[32m"transform-origin: center bottom; offset-path: path('M 0 0 C -15 -88, -9 -176, 0 -220, 9 -176, 15 -88, 0 0'); offset-rotate: 0deg; animation-delay: 0s, 0s; --duration: 1.6s; --sqx: 1.282051282051282; --sqy: 0.78; --liftx: 0.9538344143456696; --lifty: 1.0484; --airx: 0.8920606601248885; --airy: 1.121; --shadowBase: 240px;"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33mheight[39m=[32m"120"[39m
                      [33mviewBox[39m=[32m"0 0 300 120"[39m
                      [33mwidth[39m=[32m"300"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<defs>[39m
                        [36m<filter[39m
                          [33mheight[39m=[32m"140%"[39m
                          [33mid[39m=[32m"shadow"[39m
                          [33mwidth[39m=[32m"140%"[39m
                          [33mx[39m=[32m"-20%"[39m
                          [33my[39m=[32m"-20%"[39m
                        [36m>[39m
                          [36m<fedropshadow[39m
                            [33mdx[39m=[32m"0"[39m
                            [33mdy[39m=[32m"2"[39m
                            [33mflood-color[39m=[32m"#000"[39m
                            [33mflood-opacity[39m=[32m".35"[39m
                            [33mstdDeviation[39m=[32m"2"[39m
                          [36m/>[39m
                        [36m</filter>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"bun"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#F6D18B"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#E5B873"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                        [36m<lineargradient[39m
                          [33mid[39m=[32m"dog"[39m
                          [33mx1[39m=[32m"0"[39m
                          [33mx2[39m=[32m"0"[39m
                          [33my1[39m=[32m"0"[39m
                          [33my2[39m=[32m"1"[39m
                        [36m>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"0%"[39m
                            [33mstop-color[39m=[32m"#C94C31"[39m
                          [36m/>[39m
                          [36m<stop[39m
                            [33moffset[39m=[32m"100%"[39m
                            [33mstop-color[39m=[32m"#A73D28"[39m
                          [36m/>[39m
                        [36m</lineargradient>[39m
                      [36m</defs>[39m
                      [36m<g[39m
                        [33mfilter[39m=[32m"url(#shadow)"[39m
                      [36m>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"58"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#dog)"[39m
                          [33mheight[39m=[32m"60"[39m
                          [33mrx[39m=[32m"30"[39m
                          [33mwidth[39m=[32m"260"[39m
                          [33mx[39m=[32m"20"[39m
                          [33my[39m=[32m"30"[39m
                        [36m/>[39m
                        [36m<rect[39m
                          [33mfill[39m=[32m"url(#bun)"[39m
                          [33mheight[39m=[32m"44"[39m
                          [33mrx[39m=[32m"22"[39m
                          [33mwidth[39m=[32m"280"[39m
                          [33mx[39m=[32m"10"[39m
                          [33my[39m=[32m"18"[39m
                        [36m/>[39m
                        [36m<path[39m
                          [33md[39m=[32m"M 30 54 C 60 34, 90 74, 120 54 S 180 34, 210 54 240 74, 270 54"[39m
                          [33mfill[39m=[32m"none"[39m
                          [33mstroke[39m=[32m"#F4D43F"[39m
                          [33mstroke-linecap[39m=[32m"round"[39m
                          [33mstroke-linejoin[39m=[32m"round"[39m
                          [33mstroke-width[39m=[32m"10"[39m
                        [36m/>[39m
                      [36m</g>[39m
                    [36m</svg>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"relative w-[300px] h-full flex items-center justify-center"[39m
                  [33mdata-i[39m=[32m"1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"pointer-events-none absolute bottom-0 left-1/2 -translate-x-...

    [0m [90m 47 |[39m     
     [90m 48 |[39m     [90m// Check that the page includes header, main content, and footer[39m
    [31m[1m>[22m[39m[90m 49 |[39m     [36mconst[39m header [33m=[39m screen[33m.[39mgetByTestId([32m'header'[39m)
     [90m    |[39m                           [31m[1m^[22m[39m
     [90m 50 |[39m     [36mconst[39m main [33m=[39m screen[33m.[39mgetByRole([32m'main'[39m)
     [90m 51 |[39m     [36mconst[39m footer [33m=[39m screen[33m.[39mgetByTestId([32m'footer'[39m)
     [90m 52 |[39m     [0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByTestId (__tests__/app/page.test.tsx:49:27)


Test Suites: 41 failed, 61 passed, 102 total
Tests:       185 failed, 955 passed, 1140 total
Snapshots:   0 total
Time:        15.508 s
Ran all test suites.
