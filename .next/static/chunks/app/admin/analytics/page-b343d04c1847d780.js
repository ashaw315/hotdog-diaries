(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1093],{3895:(e,s,t)=>{Promise.resolve().then(t.bind(t,8646))},8646:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var l=t(5155),r=t(2115),a=t(4464);function d(){var e,s;let[t,d]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0),[n,x]=(0,r.useState)(null),o=async()=>{try{c(!0);let[e,s]=await Promise.all([fetch("/api/admin/filtering/stats"),fetch("/api/content/process")]);if(!e.ok||!s.ok)throw Error("Failed to fetch analytics data");let[t,l]=await Promise.all([e.json(),s.json()]);d({filteringStats:t,processingStats:l}),x(null)}catch(e){x(e instanceof Error?e.message:"Unknown error")}finally{c(!1)}};(0,r.useEffect)(()=>{o()},[]);let m=e=>"".concat((100*e).toFixed(1),"%");return i?(0,l.jsx)(a.default,{children:(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((e,s)=>(0,l.jsx)("div",{className:"h-32 bg-gray-200 rounded"},s))})]})})}):n?(0,l.jsx)(a.default,{children:(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error"}),(0,l.jsx)("p",{className:"text-red-600",children:n}),(0,l.jsx)("button",{onClick:o,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Retry"})]})})}):t?(0,l.jsx)(a.default,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Comprehensive filtering and processing metrics"})]}),(0,l.jsx)("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Refresh"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"text-2xl",children:"\uD83D\uDCCA"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Total Processed"}),(0,l.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:t.filteringStats.current.total_processed.toLocaleString()})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"text-2xl",children:"\uD83C\uDFAF"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Accuracy Rate"}),(0,l.jsx)("div",{className:"text-2xl font-bold ".concat((e=t.filteringStats.current.accuracy_rate)>=.9?"text-green-600":e>=.7?"text-yellow-600":"text-red-600"),children:m(t.filteringStats.current.accuracy_rate)})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"text-2xl",children:"⚡"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Auto-Processing"}),(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:m((t.filteringStats.current.auto_approved+t.filteringStats.current.auto_rejected)/Math.max(t.filteringStats.current.total_processed,1))})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"text-2xl",children:"⏱️"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Avg Process Time"}),(0,l.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:(s=t.processingStats.stats.avg_processing_time)<60?"".concat(Math.round(s),"s"):s<3600?"".concat(Math.round(s/60),"m"):"".concat(Math.round(s/3600),"h")})]})]})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Filter Detection Results"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-lg",children:"\uD83D\uDEAB"}),(0,l.jsx)("div",{className:"text-sm font-medium text-red-800",children:"Spam Detected"})]}),(0,l.jsx)("div",{className:"text-xl font-bold text-red-600",children:t.filteringStats.current.spam_detected.toLocaleString()}),(0,l.jsx)("div",{className:"text-xs text-red-600 mt-1",children:m(t.filteringStats.current.spam_detected/Math.max(t.filteringStats.current.total_processed,1))})]}),(0,l.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-lg",children:"⚠️"}),(0,l.jsx)("div",{className:"text-sm font-medium text-orange-800",children:"Inappropriate"})]}),(0,l.jsx)("div",{className:"text-xl font-bold text-orange-600",children:t.filteringStats.current.inappropriate_detected.toLocaleString()}),(0,l.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:m(t.filteringStats.current.inappropriate_detected/Math.max(t.filteringStats.current.total_processed,1))})]}),(0,l.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-lg",children:"\uD83D\uDD04"}),(0,l.jsx)("div",{className:"text-sm font-medium text-yellow-800",children:"Unrelated"})]}),(0,l.jsx)("div",{className:"text-xl font-bold text-yellow-600",children:t.filteringStats.current.unrelated_detected.toLocaleString()}),(0,l.jsx)("div",{className:"text-xs text-yellow-600 mt-1",children:m(t.filteringStats.current.unrelated_detected/Math.max(t.filteringStats.current.total_processed,1))})]}),(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-lg",children:"\uD83D\uDCC4"}),(0,l.jsx)("div",{className:"text-sm font-medium text-blue-800",children:"Duplicates"})]}),(0,l.jsx)("div",{className:"text-xl font-bold text-blue-600",children:t.filteringStats.current.duplicates_detected.toLocaleString()}),(0,l.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:m(t.filteringStats.current.duplicates_detected/Math.max(t.filteringStats.current.total_processed,1))})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Top Performing Patterns"}),(0,l.jsx)("div",{className:"space-y-4",children:t.filteringStats.patternEffectiveness.slice(0,10).map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat({spam:"bg-red-100 text-red-800",inappropriate:"bg-orange-100 text-orange-800",unrelated:"bg-yellow-100 text-yellow-800",required:"bg-green-100 text-green-800"}[e.pattern_type]||"bg-gray-100 text-gray-800"),children:e.pattern_type.toUpperCase()}),(0,l.jsx)("code",{className:"bg-white px-2 py-1 rounded text-sm font-mono",children:e.pattern})]}),e.description&&(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("div",{className:"text-lg font-bold text-gray-900",children:e.matches.toLocaleString()}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:[m(e.avg_confidence)," confidence"]})]})]},s))})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Processing Pipeline Status"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,l.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:t.processingStats.stats.pending.toLocaleString()}),(0,l.jsx)("div",{className:"text-sm text-yellow-800",children:"Pending"})]}),(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.processingStats.stats.processing.toLocaleString()}),(0,l.jsx)("div",{className:"text-sm text-blue-800",children:"Processing"})]}),(0,l.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.processingStats.stats.approved.toLocaleString()}),(0,l.jsx)("div",{className:"text-sm text-green-800",children:"Approved"})]}),(0,l.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.processingStats.stats.rejected.toLocaleString()}),(0,l.jsx)("div",{className:"text-sm text-red-800",children:"Rejected"})]}),(0,l.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:t.processingStats.stats.flagged.toLocaleString()}),(0,l.jsx)("div",{className:"text-sm text-orange-800",children:"Flagged"})]})]})]})]})}):(0,l.jsx)(a.default,{children:(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("p",{className:"text-gray-500",children:"No analytics data available"})})})})}}},e=>{e.O(0,[6874,4464,8441,5964,7358],()=>e(e.s=3895)),_N_E=e.O()}]);