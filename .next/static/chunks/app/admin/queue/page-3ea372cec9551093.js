(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3490],{483:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(5155),n=s(2115);function l(){let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),[r,i]=(0,n.useState)(new Set),[d,c]=(0,n.useState)("created_at"),[o,x]=(0,n.useState)("all");(0,n.useEffect)(()=>{m()},[d,o]);let m=async()=>{try{l(!0);let e=new URLSearchParams({sort:d,filter:o}),s=await fetch("/api/admin/content/queue?".concat(e));if(s.ok){let e=await s.json();t(e)}else console.error("Failed to fetch queued content")}catch(e){console.error("Error fetching queued content:",e)}finally{l(!1)}},h=async e=>{if(0!==r.size)try{(await fetch("/api/admin/content/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,contentIds:Array.from(r)})})).ok?(await m(),i(new Set)):console.error("Failed to ".concat(e," selected items"))}catch(t){console.error("Error performing bulk ".concat(e,":"),t)}},u=async(e,t)=>{try{(await fetch("/api/admin/content/".concat(e,"/schedule"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({scheduled_for:t.toISOString()})})).ok?await m():console.error("Failed to schedule content")}catch(e){console.error("Error scheduling content:",e)}},g=e=>new Date(e).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-24 bg-gray-200 rounded animate-pulse"},t))]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Content Queue"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Manage pending and scheduled content for posting"})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,a.jsxs)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",onClick:m,children:[(0,a.jsx)("span",{className:"text-lg mr-2",children:"\uD83D\uDD04"}),"Refresh"]})})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"filter",className:"text-sm font-medium text-gray-700 mr-2",children:"Filter:"}),(0,a.jsxs)("select",{id:"filter",value:o,onChange:e=>x(e.target.value),className:"border-gray-300 rounded-md text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"scheduled",children:"Scheduled"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sort",className:"text-sm font-medium text-gray-700 mr-2",children:"Sort by:"}),(0,a.jsxs)("select",{id:"sort",value:d,onChange:e=>c(e.target.value),className:"border-gray-300 rounded-md text-sm",children:[(0,a.jsx)("option",{value:"created_at",children:"Created Date"}),(0,a.jsx)("option",{value:"priority",children:"Priority"}),(0,a.jsx)("option",{value:"scheduled_for",children:"Scheduled Time"})]})]})]}),r.size>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[r.size," selected"]}),(0,a.jsx)("button",{onClick:()=>h("approve"),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>h("schedule"),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Schedule"}),(0,a.jsx)("button",{onClick:()=>h("delete"),className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:e.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.size===e.length&&e.length>0,onChange:()=>{r.size===e.length?i(new Set):i(new Set(e.map(e=>e.id)))},className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),(0,a.jsxs)("span",{className:"ml-3 text-sm font-medium text-gray-900",children:["Select All (",e.length," items)"]})]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:e.map(e=>(0,a.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.has(e.id),onChange:()=>(e=>{let t=new Set(r);t.has(e)?t.delete(e):t.add(e),i(t)})(e.id),className:"mt-1 h-4 w-4 text-indigo-600 border-gray-300 rounded"}),e.media_url&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("img",{src:e.media_url,alt:"Content preview",className:"h-16 w-16 object-cover rounded-lg"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.title||"Untitled"}),e.content_text&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 line-clamp-2",children:e.content_text}),e.tags.length>0&&(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[e.tags.slice(0,3).map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["#",e]},t)),e.tags.length>3&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-3," more"]})]})]}),(0,a.jsxs)("div",{className:"ml-4 flex flex-col items-end space-y-2",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.priority)),children:e.priority}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case"pending":return"bg-blue-100 text-blue-800";case"scheduled":return"bg-purple-100 text-purple-800";case"processing":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:[(0,a.jsxs)("div",{children:["Created: ",g(e.created_at)]}),e.scheduled_for&&(0,a.jsxs)("div",{children:["Scheduled: ",g(e.scheduled_for)]})]})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{let t=new Date(Date.now()+36e5);u(e.id,t)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Schedule"}),(0,a.jsx)("span",{className:"text-gray-300",children:"|"}),(0,a.jsx)("button",{className:"text-sm text-green-600 hover:text-green-800",children:"Approve"}),(0,a.jsx)("span",{className:"text-gray-300",children:"|"}),(0,a.jsx)("button",{className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})]})]})},e.id))})]}):(0,a.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No content in queue"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Content will appear here when it's added to the posting queue."})]})})]})}},8602:(e,t,s)=>{Promise.resolve().then(s.bind(s,4464)),Promise.resolve().then(s.bind(s,483))}},e=>{e.O(0,[6874,4464,8441,5964,7358],()=>e(e.s=8602)),_N_E=e.O()}]);